<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>sum2() benchmarks</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>

<meta name="author" content="Henrik Bengtsson">

</head>

<body>
<p><a href="https://cran.r-project.org/package=matrixStats">matrixStats</a>: Benchmark report</p>

<hr/>

<h1>sum2() benchmarks</h1>

<p>This report benchmark the performance of sum2() against alternative methods.</p>

<h2>Alternative methods</h2>

<ul>
<li>sum() + [()</li>
</ul>

<p>as below</p>

<pre><code class="r">&gt; sum2_R &lt;- function(x, na.rm = FALSE, idxs) {
+     sum(x[idxs], na.rm = na.rm)
+ }
</code></pre>

<h2>Data type &ldquo;integer&rdquo;</h2>

<h3>Data</h3>

<pre><code class="r">&gt; rvector &lt;- function(n, mode = c(&quot;logical&quot;, &quot;double&quot;, &quot;integer&quot;), range = c(-100, +100), na_prob = 0) {
+     mode &lt;- match.arg(mode)
+     if (mode == &quot;logical&quot;) {
+         x &lt;- sample(c(FALSE, TRUE), size = n, replace = TRUE)
+     }     else {
+         x &lt;- runif(n, min = range[1], max = range[2])
+     }
+     storage.mode(x) &lt;- mode
+     if (na_prob &gt; 0) 
+         x[sample(n, size = na_prob * n)] &lt;- NA
+     x
+ }
&gt; rvectors &lt;- function(scale = 10, seed = 1, ...) {
+     set.seed(seed)
+     data &lt;- list()
+     data[[1]] &lt;- rvector(n = scale * 100, ...)
+     data[[2]] &lt;- rvector(n = scale * 1000, ...)
+     data[[3]] &lt;- rvector(n = scale * 10000, ...)
+     data[[4]] &lt;- rvector(n = scale * 1e+05, ...)
+     data[[5]] &lt;- rvector(n = scale * 1e+06, ...)
+     names(data) &lt;- sprintf(&quot;n = %d&quot;, sapply(data, FUN = length))
+     data
+ }
&gt; data &lt;- rvectors(mode = mode)
</code></pre>

<h3>Results</h3>

<h3>n = 1000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285898 282.3   10014072 534.9 10014072 534.9
Vcells 37045416 282.7   58945016 449.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 1000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.001119</td>
<td align="right">0.001141</td>
<td align="right">0.0012235</td>
<td align="right">0.0011955</td>
<td align="right">0.001232</td>
<td align="right">0.003760</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.004984</td>
<td align="right">0.005041</td>
<td align="right">0.0053416</td>
<td align="right">0.0050985</td>
<td align="right">0.005272</td>
<td align="right">0.022475</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">4.453977</td>
<td align="right">4.418054</td>
<td align="right">4.365984</td>
<td align="right">4.264743</td>
<td align="right">4.279221</td>
<td align="right">5.977394</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 1000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5283732 282.2   10014072 534.9 10014072 534.9
Vcells 15410641 117.6   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.002260</td>
<td align="right">0.0025265</td>
<td align="right">0.0028729</td>
<td align="right">0.0026320</td>
<td align="right">0.0028675</td>
<td align="right">0.015109</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.004457</td>
<td align="right">0.0047370</td>
<td align="right">0.0050891</td>
<td align="right">0.0048975</td>
<td align="right">0.0050645</td>
<td align="right">0.021819</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.972124</td>
<td align="right">1.874926</td>
<td align="right">1.771432</td>
<td align="right">1.860752</td>
<td align="right">1.766173</td>
<td align="right">1.444106</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYYAAAEECAIAAACjmgRhAAAgAElEQVR4nO3de3wU1d0/8DMzu8lmNwmBQJBLQp6VQCxULk0wxB9KxRciYOSiDbW2QIumSlGwAalcDGqJPBR+QmMLtlRbkYtGgRQFXpaL3CHeUH4KRB9iSAxINhGy2dwm2d8f87ius7Ozs7Mzu2c2n/eLP3YmM2fOHGa+e87M2XMYt9tNAADowEY6AwAA30NIAgCKICQBAEUQkgCAIqZIZ+B7zc3NnZ2d/v7KcRwhpKOjQ49DcxynR8oMw5jN5ra2Ns1TJrrlmRBiMpk6Oztl/i9UYxiGYRidUjaZTO3t7ZqnTCJd1CzLxsXF6XF0OlEUklpaWmT+4202m9vtbm5u1vy4DMNYLBY9UhYupmvXrmmeMiHEZrPpkWdCSEJCQmdnpx6JcxxnNptbWlo0T9lkMlksluvXr2ueMtGzqBMTE3meb21tldmG47guFZLQcAMAiiAkAQBFEJIAgCIISQBAEYQkAKAIQhIAUMQYIcnV2Tm/8hLvdsecPnbk4sU9151Msyv2wL5I5wsANGaMkGRl2bGJCXP+56td/zU47eiBiQ3fxJW9yd88ItL5AgCNGSMkEUKm9EjqazY/VX+tz6R7bWVvtg8f2dEzJdKZAgCNGSYk7aj/tradL05KuPzvnY3T8s2ffMRdqY10pgBAY8YISa7OzsPXG/9mT8v76ouq2+/cm9CjefJ002efRjpfAKAxin7jJsPKsv83PdXtdrtG5f4fQgghbkJafzo+wtkCAK0Zo5YEAF0EQhIAUAQhCQAogpAEABRBSAIAiiAkAQBFKOoEYLFYZP5qNpsJIQzDaH5chmE4jmNZ7aOzMNS0zWbTPGVCiNls1illk8nEsqxOBcKyrDCMurZYljViUXMcFxsbazJRdBtGHEVloWTsbZfLpflxdR17OzY2tqmpSfOUCSE2m02nlFmW5XnecGNvm81mwxU1x3Gtra0Ye9sbGm4AQBGEJACgCEISAFAEIQkAKIKQBAAUQUgCAIogJAEARRCSAIAiCEkAQBGEJACgCEISAFAEIQkAKIKQBAAUQUgCAIogJAEARRCSAIAiCEkAQBGEJACgCEISAFAEIQkAKGLUkJSw+pmE1c9EOhcAoDFDhiRPMEJUAogy6idN4nl+/fr1TqczLS1t1qxZkitFi263+29/+9s333yTmJg4b948PSZlAwBDU19LOnnyZN++fZcvX15bW1tdXS25UrT4/vvv22y2pUuXjhgx4sqVK6HnvnHh8tATAQB6qK8lVVRUDBkyhBBit9srKir69+/vu7KystJ7saqqimGY9evXZ2Zm3nDDDaoPjUgEEK3UhySXy9WzZ09CSHJystPplFwpWnQ6nU1NTbNmzdq4cWOvXr1GjBhBCHn++edLS0sJIa+//rrdbpc/qNVqVZ1heTrNsEwIEUpAD/pNghobG6tfgcTHx+uUshGLOiYmJiEhQWYDmSmgo5L6kGS1Wh0Oh91udzgcKSkpkitFizabbfTo0SkpKWPGjPnyyy+FkDR//vxHH32UEMLzvMPh8Hc4g07AnZSUVF9fr3nKRM9ZoePj43me12OabP0m4OY4LjExsaGhQfOUiZ5FnZiYqGQC7qSkJD2OTif1ISkjI6OysjI7O7uqqio3N1dypdlsFi1+8cUXI0eOvHjx4sCBA4VdLBaLxWIhhDQ0NHR2dvo7nPs7qjMsQ6eUhTSNlWfv9PVIU9dsG66olRSIrv/LFFL/eDsnJ6empmb16tUpKSmpqakXLlwoKSkRrfRdvHjx4lNPPVVXV+eJYgAAHgw9MbihoUGm2WzQhlv37t1lWqOh0K81kZCQwPO8HgWiX8PNZDIlJiYaro2ssOHWvXt3PY5OJ0N2lQSAaIWQBAAUQUgCAIogJAEARRCSAIAiCEkAQBH1XSUBZHiPG+PvN4nCNvjFInhDLQkiA4NegSSEJACgCBpuoIuAzbHGhcvRcANfCEngl6dJpVPUQDACX2i4AQBFjF1L8n0ySvMXr96VDoAoYOBakuSbGmpf31CbMRlC6FQSQI14dkAnA4ek6KhrCBPSUXtLK49HNJ8FGIixG27eN4zC1zcavuUJqiGGF0wRh/I3BAPXkkQaFy5XGI+I1xe75F/VCVjfUZJDQ5M5O3rqUJRkA/wxdi0pFN5RiV9e7FlUFzU0vNAN9xRc+TeB9fmn25etVHcU1f81YCzRU0vyx7vyot+TWtV3i1B1Cs/NZtwKgmStFqJSlNeSZHoJeP7kXPS0RWoDyRS8/yraUu+wEuKjkBCrgVoxP/uU+bvPYc6JwsOJaqkJq5/pLFqlY7bgh6I5JMl/qX4fm/57BfFzvar4Wtap2eX9FEzdrRVBnntbk9S0fUotU0qeP7FFT5LgD4en6epEbUhSeAOouNWVZ6DpyaK2xY8LM5kqTzyobCi57rU6Nb2jrUyyvnVbyZMKmJR8ANLwvPS7rqIeRSFJmGDSH7PZTAhhGEZFykLFO+B80qIpp9miJ33TSSh60pNgQN7ThWtY/xeSMpvN3te9fOI2m82zQcByMJlMLMuy7A+eM3qXhrq5uTuLVrHflR5b9GRn0SpbaMl6nzXLst7XhvcXkmTJ+JaYkB/ffMrnzbOBkJrvNSOzLyGE47jY2FiTiaLbMOKidh435V/pklvKr5RP1lNzYVnWtqpIYTYCEh3dZrN53wD+Gp4qjutvHrfQa0mS87gFm2ywDUAl/63yh/Y3j5vof0QyY/IpYx43X1EbnpXfNs5FT2s7taT3oWOeX9e2+PEQn0kTP6fj7zbwXimfgoooE/FRAWSeTAkFItrAu23rrxhVZTlwJkGFqK0lKSc5263yqpMMydluZV7hichvKfrq9r0VRQI+v//+eY0RZrtVWCVRWLGVJzPbrSfeyRzIOyaKnv2hluQramtJIQrb12nojz9FT1L9VZ0MJKgH3gJhAm4S5ATcKgpflDflu4uqrqhG+dMlQhI9r8ODouTdecD2S8BDiBo4AhMhKl57Uyhg3VBJQbFFTwb72lTyWL7cywpjCGmNiqLWSpcISfrx7VbnvahEiFFS3VNVJcL5TR7Z7wzljTv5HzAGPJDop9foKCApqkJSBDunKb+qgs1ewO3DfL5hDlVU3auNCoZz8A6vvsGOqtOhU/SEJJnvHOUNGUNTd47+HgnLNHn0K8zwPA6T/82Q90phy86iVZ7H28qrUcpPIeqvzKBET0iSp9+r6zBXzX5wofu8DdQmWDyzmud5osMbN2/+yk10CmH4LvE9nOomVVDt6MaFy4U3bkT2jVtX01VCkn68rzbR7x6anizS9lhKvngN8dMq+beEotMMWw3XE9aVbEYCvZY1+nvPSImekETPTei5Fm2risjz6yKVB2P1APR98hLmW1ry6KGcr799vQ/kJoQs/aPqQ0Sl6B8vKZoo76djFJJ1TNGT4PCcmm/zTaduaKI1Mc8t0fwohmb4WlKvs+eFD1eHDo5sTjw837FNTxbF6JC48MFmsxE/XYrp5+9u930vEZbsfH+48Le22pb+Ec+SvBk+JNFJuJfCXAUN/7P2qBFUJAqxNed9LObZP9EWjzo6Oq5du9ajR49IZUDiruns7Ny1a9dTTz01ceLECRMm/OEPf9ixY0dnZ2f4MwfB0qm50dXoWoae/yNdj7JmzRq73Z6ZmVlUVEQIefnllx988EFCyKlTp3Jycjo6OjZu3PjYY4/df//9d9xxR0FBQVtb27Fjx/Lz84cNG/bSSy/pl7GAxCFpz549eXl5Z86cueWWW9auXbtu3brRo0efPXs2Ly9vz549EcmiErq22nqdPe9pHkLUC/+jK80dOHBg27Zt77//fnl5+enTp1977bXZs2dfvXr13//+9+9+97tNmzZxHEcIeeedd1555ZUDBw60t7dv2rSJELJv376ysrLFixfrl7eAxA23urq6HTt2COOlCQYPHpyXl8fz/NatW8ObN0X0foTkCUa9zp6n53EVaCvKqpaHDh1qaGjIz88nhNTU1JSXl//iF7946aWXRowYUVhYOGTIEGGziRMnCsPL5efnb9q06eabb87NzbXb7ZHMum9I+uUvfyla43a7GYYxmUy+fwIAClmt1oKCgoULFxJCOjo6hAGIGhsbOY6rqanxbOZ5GsPzvPBZ3Xih2pJ+Art///758+cTQqZOnZqYmPjKK6+ENVM0Qc0IDGfcuHFbtmxpbGxsb28fP378rl27eJ7/zW9+s2fPntOnTx85ckTYbOfOnVevXuV5fsOGDT/96U8jm2cP6ZBUUFAwefLkEydOtLS0nD9//o9/7NK9ua4OHSz8i3RGABTJzs6eOXNmdnb2wIEDR44cOX369JUrV44dOzYrK2vDhg2//e1vhVH0srKy8vLyMjIybrjhhoceeijSuf5f0qNKpqamXrp0aenSpampqQUFBenp6ZWVlXpnJWyjSoq6MkmOKqkJyVEltSIz1GGIDDGqpIgwhFt9kEO4KaRfUUdwVMmNGzdWV1c/++yzmqccIul+ScOGDZs5c+bhw4c/+uijp59+uk+fPmHOFgB0TdIh6bXXXtuyZcsTTzyRlJTEcRyd79oAQLWCgoJIZ0GadEiyWCwDBgw4e/bs2bNnb7zxxlOnTqWnp4u24Xl+/fr1TqczLS1t1qxZkisltzlz5syBAwcWLFig0ykBgHFJh6SpU6dardbU1FRhkWVZoY+Dt5MnT/bt23fGjBnFxcXV1dX9+/f3XVlZWSnaxuVybd26NSUlRdezkocH1QDUkg5JMTExpaWl8ntWVFQIfa7sdntFRYUQkkQrKysrRdv885//vO+++w4fPqzxeQBAVJAOSRkZGXv27Bk3bpzQ8ZwQ4vng4XK5evbsSQhJTk52Op2SK0WL5eXlvXv3TktL805n7969H374ISFk9uzZMm8WhEmKRbNCa8VkMvmeYOgYhmEYJj4+XvOUCSEmk0m/lFmW1alAWJbVY75p4xY1wzDeP5YAvxfHtGnThGgiuHTpkmgDq9XqcDjsdrvD4fA0xEQrRYs7d+60WCxnzpy5dOnSvn377rrrLkJIUlJSv379CCEsy8p0AhDuEJkNVGMYprOzU6eUiT55JoRwHKdTyiaTye1265E4y7IMw+iUMjFgUbvd7oDXnnAVBaWxsVFFZhISElTspTnpkHTixAmHw2G1WmX2zMjIqKyszM7Orqqqys3NlVxpNpu9F4Ueot98883mzZuFeEQIycnJycnJIYQ0NDTI9IVhWdbtduvRWUbXfklxcXF6pCwkrlPKJpPJiP2SYmNjDVfUZrO5ra0tYL8k+Tsxyki3gwYNGhSw3p6Tk1NTU7N69eqUlJTU1NQLFy6UlJSIVooWQ8+u8KN8/C4fIFpJ996eMmXKsWPHRo8e7QlMO3bs0DsrSnpv205/JCxq+NYMvbdF0HtbxHC9t6Ow4bZw4ULhZ8QAAOEkDknNzc1xcXG33nqr76bCn8KSKwDQQWcn0eedNSHk+vXr06dPb2tr69at2/bt21XHCnH+5s+fv2LFiitXrnivvHLlyooVKx5//HGVmdUOfpQPoA536N2YlctinlvCfvyBHum/+uqrd95553vvvTdy5MhQfoImriVt3Ljx2LFjs2fPrqysFDoB1NXVpaenL1myRLLqBAD0Y2oucUcPCZ9Nu99qG3wTiQvwFu/06dPPP/88z/MTJ05sbW0dOHDgpEmTVqxYceedd37xxRdHjhyJj4//+uuv7XZ7dXX11KlTs7KyhP7SPXr0sFgsqrMq8Szp1ltvfeeddwgh1dXVhBDhMABgXMz1az9YdDa6A4WksrKyBx54YMqUKdu3b/d9AD9o0KBFixbddtttxcXFCQkJc+fOfeONNwghu3fvLi0t3b17t+qsyjUs+/fvj3gEEAU6B3w/onbnfw10J/cKuMvDDz+8a9euCRMmxMR8Pxshz/PChwEDBhBCbDZbenq6zWYT1q9cufL1118vKytLTExUnVXM4wbQBVit7fMWsmc+IOaYzhFZSh5yv/fee8XFxcnJybm5uXPmzGloaCCEnDx5csKECZLbv/XWWw0NDf/6179CzClCEkCX4O6W1HHbOOXb9+zZc+7cuTabLS8vLy8v71e/+tWbb76ZmpoaGxvru3Hv3r33799/7NixMWPGEELmzp07Y8YMdfmU7ipJCHnttdfKy8v/9Kc/lZWVTZs2TV3qQQnbQLci6Copgq6SIugqGU7StaSnn366vLy8srKSYZgXX3zx1KlTq1atCnPOAKALkm5Sbtu27fXXX+/Xrx/HcXv37t2+fXuYswUAXZN0Lamtra29vV343NLSgk7bQCHRTDMQHaRrSXPnzh0/fvzFixdXr149ZsyYRx55JMzZAlAOI0NEE+laUmFh4ciRIw8dOtTR0fH3v/89KysrzNkCgK5JupbU2tra0tIyePDg1NTU8+fP41kSUEhor+E3j1FG/QwlESdU13E5dmX4348+6mcoiSzP44NeZ8/jujQE4b+sMWtYpDOihvfjKlxvupJuuAkzlLS1tXV8J8zZgijjuaUT3j8T2ZwA5dTPUAJdVsSbzBHPgDf0RZC0bt26srKyl19++dtvvz137lxtbe3Pf/5zJXPKSteShBlKLnnROsOh8ozlRvl1wL53XHK9cSc18G4yq9g9YMMt4IwPIWZAHc9lRvn1JuNgo/MXX37164tVZ126zLbia9GiRWlpaZs2bZoyZcqMGTP+/Oc/K9lLupakZIYSCCj5k8+J1NMuFQ/CqKoXqCDkPOBFRXOYNm7hE0IqW9vuvfA/wufS+m+vjBgaF2gwgGCHcJs+fbpvIi6Xy+VyxcTE9O7du6KiQklWpbNVX1/fv3//vLy8qd9RkhZ40/DuovNGjdQtaujQECkfNv3g9+pftsj90FcgDOH21ltvSf4cd9CgQS+88MLly5cfeuihtWvXbtu2TVgv6lZ97tw5u/1/h2pKSEioq6sLeFyKZigR5lCW+StRNfOnwuNqnnLdjzN7fnrOcwh/2/jbXdhXtEGvs+e91+hRGgETl8mzwjRlsi0k3vPTc/JH8fdX/QokYJ5VJxvw2tPkpIZaf/CbMLtFYoARkYcffnjJkiUbNmwoKCjwrJQcwq2lpYXn+SNHjmzZsuXw4cOPPPKIZ+LYr776qk+fPsLnvn37Xrx40fsJtSRxSMrOzi4tLX3hhRdE68Mw8HZMTIy/kVLId3X+UMb09YdhGJPJFDDl+PKPhQ/O7OEKU24aNcJqtfqOaxEwBc+xen56zntj789K8qwOx3E63dssywpzcMtvpryEvVMWBplRmzU5oRe1v4uHZVmz2RyGkDTIEvtPe9rmugYzyzzeu5dVhyHcxowZI/z47K9//SshZN26dYSQAQMG7Nu3T9igtrY2PT094HHFIamwsLBHjx7z588PuKfmWltbZXob0DMBt/ItNZmAu7m52dNU8U5K+azQwT6HCucE3Fo9IwvzBNwB37L5e0ooSiecE3BP7Z40tXuS8u2DHcJNMpHMzEwhQhFCrl271qtX4AF2xSFJ6KW9ZcuWF1980bNy1qxZmJ4kIlTfq76Pn5Q8SvfspaKeoiK4BHzML/kQLfT4pTCrSjaTzLmwo9E78d5999133323Z/HgwYOez54fve7Zs4cQYrPZNmzYIKzxBCCB1Wq1WCzt7e0NDQ0ZGRlKjisOSTfddBMhpKqq6sCBA8IanueTkoIIrqCcv4s+/Jey6OaPL/9YyIPCTjfh7EwveYjuH/8/4cPVoYM9pSqZeYVZ9d7MdctIjfLetaxZs+ZHP/rRnDlzduzYcfny5Xnz5inZSzzQrTAq66OPPvqXv/zFszIpKSkMfQIiPtCt5n3e5Ae6DeU3CkoaDp4NfOsa/joleDizhwtNDIWZ9LeZKJ8cx/U485n3GvkT8feq0V/FRJ7oiMoTdN0y0veBoEwdSvmFhIFufYlrScnJyYSQLv7T//BXuVU/UlGSVc8GCisILaOzPC9WfBPxdwjfU/C9+T3xSHmyvqmpi0fE56wlg7XvX/3lUCbnIcapLg4zlESM7y2hIhSquGF8j+h7+wlviDx/UpKakm3qh/3INyopJB8CfGuF/upEyks4qKarckZ/xqQ3vzOUhF/EG26ap6xwhhJ1LTh1FSvJ21WmHRfizePbcDObzQnvn9H8npSfoUS+kaXwMZlWReGdlE4NN0NDLYkiQV30kg841B1C2+9t73tYMtkw1BFEcSTYRpYeArYEQRC1ISls1WP51zpE7VMJbQfo8c2kTPoto7MsJ94PeNyAJx6pFoquv7+ReetPgnk0Bv5EW0gS3RLCB087xd814elcG8pFE7BzjcI2guYXrvwtKnk4zxs3dWl6b2b0+/Dq0MHC1JJK/h+j4HwjLqpCkr/7RDSchWRNwd+O/r4SFb6B8pcTmW9ahZe19dSH/pKSz4zyaCLa3V+5Kezgo/peVfK6nRDScdvoEA8ENAj8UxcD0fZa9PTB9V1JpO400dGvDh3suPmmzttzlWRP8sXQVWUDQilvp/gGyoDVRvLDUw4Y9D3PbhRmPiBRgcvkIWA6qvcVaPXaEeRFVS2JKOgEqEffH/qfIAT7mNmZPdw7Kvnu6Fuwuj7BER1C8n+EO3zCkz2d8ubv6qLhvzhqRFtIElESLAJ2AgjDayPftlXA9F23jLSe+lBFP6agWojyvXvCEIYCdmgUPphMJs9vSsIjDOfeNUV5SPIW7DssPSKRwv5+oacWOu/E5d8PyIen0DPp+wwrlEAMlOtCIYl+4blzVB/FNxD4hi1dyR+i47bR3OETQfW0CDEz6Gekh2gISSq+PAO++dLpTbzChpLeovUuCvN5RWsxRlY0hCQPoWXhL9z469EnSsH7g0z3E1Ga8mEx2Bf8AF0WOgEEzbePD55TAGglGkKSVl1giG5BDTUjAIWiISSJeHrryW/jL4r56/rou4HyXeSPCAAeUfUsyUO/V/X+NkCsAdBEFNaSAMC41NeSeJ5fv3690+lMS0ubNWuW5ErRosvlKi4u5nneZrMtWrQoJiZGm5MAgGihvpZ08uTJvn37Ll++vLa2trq6WnKlaPHgwYPDhw8vLi6+8cYbDx8+rNEpAED0UF9LqqioGDJkCCHEbrdXVFT079/fd2VlZaX3YkZGhjDdQHx8vNlsFtL59ttvhdERLRaLzDwowtSSekyUIsyArEfKLMuS7+bp1ZxOeSY6FwjLsihq75QDFgirYGbaaKI+JLlcLmF67+TkZKfTKblStDho0CBCSHl5+fHjx5ctWybs8sorr5SVlRFC/vGPfwgTjUsSpiGWnGlTE3FxcYE3Ch7DMPrNgqdTaTAMYzabdSoQgqL2Ikz+Lj+ZrcyA9FFJfUiyWq0Oh8NutzscjpSUFMmVvtu88cYb1dXVS5cu9fw3zJ8/X5jvu6GhQWbk/CieDkAdYahDPVJOSEgI2wTcWpGfDiBE+hU1pgPwpb5OmJGRUVlZSQipqqoaOHCg5ErR4okTJ5xO54IFC2w2W8g5B4AopD4k5eTk1NTUrF69OiUlJTU19cKFCyUlJaKVosUzZ858/PHHixcvXrx48ZEjRzQ8DQCIDpjHDQ03MTTcRNBwC6eu9TAfACiHkAQAFEFIAgCKICQBAEUQkgCAIghJAEARhCQAoAhCEgBQBCEJACiCkAQAFEFIAgCKICQBAEUQkgCAIghJAEARhCQAoAhCEgBQBCEJACiCkAQAFEFIAgCKICQBAEUQkgCAIghJAEAR9bPdas5iscj81Ww2k++m4daWMOO7HjOvMwzDMIxO82iazWadUjaZTCzL6lQgLMtyHKd5yizLGrGoOY6LjY01mSi6DSOOorJoaWmJvnncYmNjdZoCTL/JxViWNeI8bmaz2XBFzXGcknnc4uLi9Dg6ndBwAwCKICQBAEUQkgCAIghJAEARhCQAoAhCEgBQBCEJACiCkAQAFEFIAgCKICQBAEUQkgCAIghJAEARhCQAoAhCEgBQBCEJACiCkAQAFEFIAgCKICQBAEUQkgCAIghJAEARhCQAoAhCEgBQRP2kSTzPr1+/3ul0pqWlzZo1S3Kl/KImJwAA0UR9LenkyZN9+/Zdvnx5bW1tdXW15Er5RY1OAQCih/qQVFFRYbfbCSF2u72iokJypfyiBtkHgOiivuHmcrl69uxJCElOTnY6nZIr5ReFXbZt23b48GFCyJIlS1JSUvwdTpi1WZiGW3Msy8bExGierDABd7du3TRPmRDCcZxOEzcLKetRIOS7GYA1T9agRW0ymTiOk5963u1263FoaqkvaKvV6nA47Ha7w+HwhBLRSvlFYZfMzEzh6jeZTDIzEcfGxrrd7ra2NtUZ9odhGJPJ1N7erlPK8tMrqxYbG6tTyhaLpaOjQ48CYVmW4zidUo6LizNcUbMs297ezvO8zDYMw+j09UAn9SEpIyOjsrIyOzu7qqoqNzdXcqXZbJZZFHYZPnz48OHDCSENDQ0ys8VzHOd2u/WYTp5hGIvFokfKLMtarVY9UiaEcBynU8pms5nneT0S5zjObDbrkbLJZNLpP5HoWdQxMTHt7e3y8Y7jOJvNpsfR6aT+WVJOTk5NTc3q1atTUlJSU1MvXLhQUlIiWim/qOFpAEB0YOhpqTY0NHR0dPj7q81mc7vdLpdL8+MKtaTm5mbNU2ZZtnv37g6HQ/OUCSE2m62pqUmPlBMSEnie16NAdK0lJSYm1tfXa54y0bOoExMTW1tbA9aSunfvrsfR6YSukgBAEYQkAKAIQhIAUAQhCQAogpAEABTRpU+qOiwrFx+vX79OCNGvj7XQO1xbbre7uro6Pj5e85QFeuSZEFJfX28ymfTor8yyrE5F3dHR8fXXX+vXf0enonY4HAGLWv6+iD4UdQKQt3btWpvNVlBQEOmMBOHq1av33nvv8ePHI52R4Cxbtmzo0KH5+fmRzkgQLly4sGDBgrfffjvSGQnOvHnzJk+efNddd0U6IxTpWgEYABX67sYAAAUKSURBVChHUcNN3o9//GM9fq6pK4vFMmXKlEjnImhZWVn9+vWLdC6Ck5SUNGHChEjnImi5ubn4GYOIYRpuANAVoOEGABQxQMPNWMPjulyu4uJinudtNtuiRYuuX7/++9//XhiJZcGCBX379o10BqXV1dV55zMlJYX+Mi8tLT116hQhxOl0jho16p577qG/qJ977rnCwkKLxYIxoP1yU+/IkSNbt251u90rV668dOlSpLMTwO7du0tLS91u95YtW959993PPvts27Ztkc5UYKJ8GqvMS0pKamtrKS/qxsbGwsLCe+65p7m52e1TwsYqcF0ZoOFmrOFxMzIyxo4dSwiJj483m81Xrlz5+uuvS0pKDh06FOGcyRLl00BlXlVVFRcXd8MNN1Be1PHx8atWrbr55puFRYwB7Y8BQpLk8LjUGjRoUHJycnl5+fHjx7Ozs61W69ChQ2fMmLF///5PPvkk0rnzS5RPA5V5aWnp/fffT3xOIdL5kiD0FBU+KxkDumsywLMkyeFxafbGG29UV1cvXbrUarWOGjVKWHnHHXdcuHDB8yVJG1E+jVLmTU1Nzc3NCQkJxOcUqC1qgZIxoLsmA9SShMFzCSFVVVUDBw6MdHYCOHHihNPpXLBggfDjhq1bt545c4YQUlVV1adPn0jnzi9RPo1S5h988IEn9BilqAWiEjZKgYeBAfol8TxfUlLS3t6ekpIyc+bMSGcngA0bNnz++edxcXGEkEmTJmVmZq5du9ZkMiUnJz/22GPU/l7p6tWr3vns7Ow0RJmvWbPmZz/7mdDbUHQKdBb1smXLlixZIrxx8y5hY13kujJASAKAroPGbxIA6LIQkgCAIghJAEARhCQAoAhCEgBQBCEpmm3fvj07O9vhcNx0000qdvfsKKSjde4AJBig9zaoNnHixJycnICbdXR0XLt2rUePHiGmAxA61JKi2SeffFJYWPjoo49WVVXNnTuXELJmzRq73Z6ZmVlUVEQIOXbsWH5+/rBhw1566SW32z1v3rx+/foNGTJk/vz5brfbs6OQDiGkqKhI6Gr8zDPPCLs/+OCDixYtmjZtWn5+vk6zVEPXEtmBCEBXR48eve++++rq6jIzM91u9/79+7OyshwOx/Xr1+++++7NmzcfPXq0W7duX375pdvt/vTTT++66662tra2traMjIxz5855dhTSefvtt3NycpqampqamkaNGrV3796jR4/GxcXV19e73e68vLydO3dG9nwhCqDh1oUcOnSooaFBmHqkpqamvLw8PT09NzdXGBZj6NChr7766rvvvnv69OnLly+3tLT47j5z5kyr1UoIefDBBw8dOjR58uTRo0d3796dEGK32313AQgWQlIXYrVaCwoKFi5cSAjp6Ohwu92nTp3yzH124sSJOXPm/PrXv540adLBgwd9d3e73Z6xNRiG6ejoIITIPIECUAHPkroEnucJIePGjduyZUtjY2N7e/v48eN37drlvc1//vMfYazY3r17f/755+3t7Z4dBbfffvvmzZtbWlqam5s3b94sjFQHoC2EpOiXlJSUlJQ0e/bs7OzsmTNnZmdnDxw4cOTIkdOnT/fe7IEHHvjoo49+8pOfPPHEE3Pnzi0qKvLsKGwwefLksWPHDhs2bNiwYRMmTJg4caL37izL6jFBLnQ1GAkAACiCWhIAUAQhCQAogpAEABRBSAIAiiAkAQBFEJIAgCIISQBAkf8Po08jeEQT4gAAAAAASUVORK5CYII=" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5283798 282.2   10014072 534.9 10014072 534.9
Vcells 15410793 117.6   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.003205</td>
<td align="right">0.0033685</td>
<td align="right">0.0036921</td>
<td align="right">0.0035035</td>
<td align="right">0.0036435</td>
<td align="right">0.015403</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.005639</td>
<td align="right">0.0059140</td>
<td align="right">0.0063060</td>
<td align="right">0.0060625</td>
<td align="right">0.0063215</td>
<td align="right">0.023978</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.759438</td>
<td align="right">1.755678</td>
<td align="right">1.707994</td>
<td align="right">1.730412</td>
<td align="right">1.735008</td>
<td align="right">1.55671</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5283861 282.2   10014072 534.9 10014072 534.9
Vcells 15411547 117.6   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.004796</td>
<td align="right">0.005037</td>
<td align="right">0.0053913</td>
<td align="right">0.0052775</td>
<td align="right">0.0054270</td>
<td align="right">0.019443</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.007811</td>
<td align="right">0.008228</td>
<td align="right">0.0086706</td>
<td align="right">0.0084785</td>
<td align="right">0.0086505</td>
<td align="right">0.027825</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.628649</td>
<td align="right">1.633512</td>
<td align="right">1.608267</td>
<td align="right">1.606537</td>
<td align="right">1.593975</td>
<td align="right">1.431106</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h3>n = 10000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5283859 282.2   10014072 534.9 10014072 534.9
Vcells 15411171 117.6   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 10000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.008359</td>
<td align="right">0.0084920</td>
<td align="right">0.0087336</td>
<td align="right">0.0087300</td>
<td align="right">0.008890</td>
<td align="right">0.013520</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.023246</td>
<td align="right">0.0234935</td>
<td align="right">0.0243467</td>
<td align="right">0.0242645</td>
<td align="right">0.024508</td>
<td align="right">0.038936</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">2.780955</td>
<td align="right">2.766545</td>
<td align="right">2.787707</td>
<td align="right">2.779439</td>
<td align="right">2.756805</td>
<td align="right">2.879882</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 10000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5283987 282.2   10014072 534.9 10014072 534.9
Vcells 15412229 117.6   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.009381</td>
<td align="right">0.0098160</td>
<td align="right">0.0104215</td>
<td align="right">0.0101070</td>
<td align="right">0.010366</td>
<td align="right">0.026156</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.014412</td>
<td align="right">0.0151175</td>
<td align="right">0.0158846</td>
<td align="right">0.0154295</td>
<td align="right">0.016011</td>
<td align="right">0.047106</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.536297</td>
<td align="right">1.540088</td>
<td align="right">1.524217</td>
<td align="right">1.526615</td>
<td align="right">1.544569</td>
<td align="right">1.800963</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284050 282.2   10014072 534.9 10014072 534.9
Vcells 15413500 117.6   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.016520</td>
<td align="right">0.0173035</td>
<td align="right">0.0185803</td>
<td align="right">0.0177755</td>
<td align="right">0.0186300</td>
<td align="right">0.047761</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.025237</td>
<td align="right">0.0256790</td>
<td align="right">0.0265971</td>
<td align="right">0.0259685</td>
<td align="right">0.0267315</td>
<td align="right">0.047665</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.527663</td>
<td align="right">1.484035</td>
<td align="right">1.431468</td>
<td align="right">1.460915</td>
<td align="right">1.434863</td>
<td align="right">0.99799</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284113 282.3   10014072 534.9 10014072 534.9
Vcells 15415801 117.7   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.030125</td>
<td align="right">0.0311480</td>
<td align="right">0.0324510</td>
<td align="right">0.0319985</td>
<td align="right">0.0330070</td>
<td align="right">0.053185</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.043065</td>
<td align="right">0.0447205</td>
<td align="right">0.0463941</td>
<td align="right">0.0451745</td>
<td align="right">0.0466175</td>
<td align="right">0.086259</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.429544</td>
<td align="right">1.435742</td>
<td align="right">1.429667</td>
<td align="right">1.411769</td>
<td align="right">1.412352</td>
<td align="right">1.621867</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h3>n = 100000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284111 282.3   10014072 534.9 10014072 534.9
Vcells 15415734 117.7   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 100000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.063881</td>
<td align="right">0.0680950</td>
<td align="right">0.0733152</td>
<td align="right">0.0729955</td>
<td align="right">0.078838</td>
<td align="right">0.090616</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.160387</td>
<td align="right">0.1707445</td>
<td align="right">0.1822474</td>
<td align="right">0.1750475</td>
<td align="right">0.192853</td>
<td align="right">0.266294</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">2.510715</td>
<td align="right">2.507446</td>
<td align="right">2.485808</td>
<td align="right">2.398059</td>
<td align="right">2.446194</td>
<td align="right">2.938708</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 100000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284239 282.3   10014072 534.9 10014072 534.9
Vcells 15422193 117.7   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.066354</td>
<td align="right">0.069639</td>
<td align="right">0.0753954</td>
<td align="right">0.0746885</td>
<td align="right">0.0796145</td>
<td align="right">0.106737</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.091711</td>
<td align="right">0.098280</td>
<td align="right">0.1046967</td>
<td align="right">0.1032705</td>
<td align="right">0.1101540</td>
<td align="right">0.148418</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.382147</td>
<td align="right">1.411278</td>
<td align="right">1.388634</td>
<td align="right">1.382683</td>
<td align="right">1.383592</td>
<td align="right">1.390502</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284302 282.3   10014072 534.9 10014072 534.9
Vcells 15432604 117.8   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.117490</td>
<td align="right">0.125675</td>
<td align="right">0.1370252</td>
<td align="right">0.1338885</td>
<td align="right">0.1439435</td>
<td align="right">0.198406</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.162947</td>
<td align="right">0.173521</td>
<td align="right">0.1864323</td>
<td align="right">0.1796390</td>
<td align="right">0.1997535</td>
<td align="right">0.242362</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.386901</td>
<td align="right">1.380712</td>
<td align="right">1.36057</td>
<td align="right">1.341706</td>
<td align="right">1.387722</td>
<td align="right">1.221546</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284365 282.3   10014072 534.9 10014072 534.9
Vcells 15452646 117.9   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.212844</td>
<td align="right">0.2478245</td>
<td align="right">0.2739784</td>
<td align="right">0.2853315</td>
<td align="right">0.2996865</td>
<td align="right">0.330411</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.296554</td>
<td align="right">0.3357550</td>
<td align="right">0.3879250</td>
<td align="right">0.3594785</td>
<td align="right">0.4611125</td>
<td align="right">0.526610</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.393293</td>
<td align="right">1.35481</td>
<td align="right">1.415896</td>
<td align="right">1.259863</td>
<td align="right">1.53865</td>
<td align="right">1.593803</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h3>n = 1000000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284363 282.3   10014072 534.9 10014072 534.9
Vcells 15452711 117.9   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 1000000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.521083</td>
<td align="right">0.5320005</td>
<td align="right">0.5701767</td>
<td align="right">0.5496415</td>
<td align="right">0.576922</td>
<td align="right">0.823035</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.288003</td>
<td align="right">1.3036955</td>
<td align="right">1.3888050</td>
<td align="right">1.3578260</td>
<td align="right">1.364872</td>
<td align="right">2.159972</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">2.471781</td>
<td align="right">2.450553</td>
<td align="right">2.435745</td>
<td align="right">2.470385</td>
<td align="right">2.365783</td>
<td align="right">2.624399</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 1000000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284491 282.3   10014072 534.9 10014072 534.9
Vcells 15513169 118.4   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.714451</td>
<td align="right">0.8014775</td>
<td align="right">0.8624878</td>
<td align="right">0.8448635</td>
<td align="right">0.9042715</td>
<td align="right">1.105876</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.084261</td>
<td align="right">1.2269625</td>
<td align="right">1.3056103</td>
<td align="right">1.2767335</td>
<td align="right">1.3636405</td>
<td align="right">1.653814</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.517614</td>
<td align="right">1.530876</td>
<td align="right">1.513772</td>
<td align="right">1.511171</td>
<td align="right">1.507999</td>
<td align="right">1.495479</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284554 282.3   10014072 534.9 10014072 534.9
Vcells 15613213 119.2   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.043881</td>
<td align="right">1.099131</td>
<td align="right">1.191024</td>
<td align="right">1.136103</td>
<td align="right">1.223502</td>
<td align="right">1.807013</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.444731</td>
<td align="right">1.505727</td>
<td align="right">1.633820</td>
<td align="right">1.553992</td>
<td align="right">1.584235</td>
<td align="right">6.847922</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.384</td>
<td align="right">1.369926</td>
<td align="right">1.371778</td>
<td align="right">1.367826</td>
<td align="right">1.294836</td>
<td align="right">3.789636</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYYAAAEECAMAAAAbJmMEAAAC+lBMVEUAv8QICAgJCQkKCgoMDAwNDQ0PDw8REREUFBQVFRUaGhobGxscHBweHh4fHx8gICAhISEjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKysvLy8wMDAyMjIzMzM0NDQ2NjY3Nzc4ODg7Ozs8PDw9PT0+Pj5AQEBBQUFCQkJDQ0NERERFRUVFzdFGRkZHR0dISEhJSUlKz9JLS0tMTExNTU1Nz9NOTk5PT09QUFBRUVFTU1NUVFRU0dRVVVVWVlZXV1dZWVlbW1tcXFxdXV1eXl5fX19gYGBhYWFjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBycnJ0dHR1dXV2dnZ3d3d4eHh5eXl7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSWlpaXl5eYmJidnZ2enp6fn5+goKCg4OKh4eKioqKjo6OkpKSlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+wsLCxsbGx5eaysrKzs7O0tLS1tbW2tra3t7e4uLi55ue6urq7u7u8vLy9vb2+vr6/v7/AwMDBwcHCwsLDw8PExMTGxsbG6OnHx8fIyMjJycnKysrLy8vMzMzM6uvNzc3Pz8/Q0NDR0dHS6+zT09PU1NTW1tbX19fY2NjZ2dna2trc3Nzd3d3f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojo8PDp6enp8PDq6urr6+vs4N/s4uHs4uLs7Ozt2Nft7e3u0tDu1tTu1tXu19Xu7u7vzcvv7+/wx8Tw8PDxtbDxtbHx8fHyqaTyqqXy6Ojy6ejy8PDy8vLz19Xz3dvz4+Lz6unz8/P0wr/0ycb09PT1lI31lI71lY71sq31tK/1ubX19fX2l5H29vb3fnX39/f4dm34+Pj5+fn6+vr7+/v8/Pz9/f3+/v7///8Fw2GlAAAQSklEQVR4nO3de5xUZRkH8C3LrDQF5aLmqomFW+pGhOgmpVmmhqSCq6ysXCSkCAEFWZdN22DlYhYCkSQYDCZLGWYkiVw0iDjlSpeNtraL02Vq7Dad5j7zfj6d2zvnPbdnzjnvXM7sPr8/mJ15zjvvnPe75zbn7KGOYAKQump/AIwcZAhEkCEQQYZAxBWDGKWJpaJg4nBZTHI1T4pwvUjzVAwsi3DZMOtiNRh6BZrenAAmBpcjSbguwuVkhKv3XC9Y7u8Dy8fZWe9FBt+9I4MWZEAGZKBBBmRABhpkGDgMv/up8Ivf+OkdGbSUhOHV13/1j1f89D6QGBKJBPBZK7JS+vX/XvXV+wBjABwqwfDzf/7s9Z/46R0ZtJSE4fevCL/8rZ/eBxKDUP2Vkt/eBxQDz0AgAzIgAw0yIEPNM4iFxPMimAxcTme5mmfTXM3zcbCcSoLlpGHWq8GAS4MQhKUBGQRk0IMMtHtkUIIM/nsfWAzV/k7Jd+8DigH8bg8ZkGFQMQjIEAgGjoFABmRABhpkQAZkoEGGUjI47yshQ2UZHByQARkGGEOstWV2ipDMPbOWOTL4Gwhk8MCwbjVZvomQbSvI3QdtGXwPBDJ4YNjTQ9Y+SUj7DtK1GRloqrBt6G6JEbJkL9m0lpCl48btyxZCsmDycDlXpF6snONqXuSz5+B3z7HN05VgWLkgKv3b3q0sDYd27xaO0/Tnj4OJw2UxDdeTcDktcvWe7wfL0QhYDueYJ/0VYNjerjxsW0nmHVB+wpWSUIWV0tJbpk7dumdxZuG8DoIMNME7bpBjv9OKDMgwSBlsHJChCgxWB2SoMIP94oAMVWDwPBDIUHIGPwOBDMiADDTIgAzIQIMMpWKoq7P5iIWdpoox+DmGH0AMdTYMzJFchRjsjx0HF4PFARmqwWD5gMhQcQbbTbQ+IpVhcLpAZ5AzuB4IZOBh0M/hlvlcdJHm9Fy0pOCneY2di7YkEqaJ5sNgUnA5nuFqnokbniYS3prno2BZjIFlw6xHqsEQtJWSGuuqaYCvlFwySMOCDFVnSFSewVRHBjkOe/NMSvydkrk7ZFBTzKG0DJbekEGNMjAABDJUjAFaIEq+UjI+RwYt5WWw/ZKdSVkZDPMVcIZYORnsvt019g6/OxdDoqYY6Ee2L9cwQ20tDdoHLheDYJVIuPh+V/1AA4wB+J1kGOwo/DJoQyBtoi1LBGvulsH+18TEYJ4mcJtoYN1AV0oOx3IcDPKbqQzWkqCNbHEG9SNZP5u8n53oY56ZFmlziwAwQKvowkAkbPdduRgSSs8ODu4YEkys768RaUc/7FSWFgFgKL406DNmcvDJQN+qrs4OQh9ZGwb9AySYCc0fTn+qV3SKRDAZgJSUIcGs3pR3KsZgXeMXFhXr+Fsd+mgDfclgWgRu2wDE8PtoHRpPDNaRS9oyCIZprCXjaBYG2dJA3USzDIZVaxUYZself4Rrmptf5mcobEAFlwyG9bFhfJMRdZ/Vtq00VczeQbcwlwzPmT0lvaS0VH6qOEOkeazMsLuLvuD77Bu7ApCfu2EojBfzi6yV5T0lqHmisLE2r1bUH2vsO6XcNJlhy4LFW6SHeH//sR6a47keMKL5BWnmC//29ERTcPO4Oi2dXH8DNako3FyZlv5jiFLOHwdbh/vBsmHWj1eCgbTKDDseF1qfJWTuOefs5e4mQeTBKDaRMoU6bm6mt38D+g8Tf58ZSrbE7wcwSNm8SnkowSUB6qohkjSvkC2TqD/ZfyPi6oruwkrJsD6TU3NfdCsMy3eRjlCJGLQxiSTYQVIKhjozar4Z2HcwlmuRYc/ioy2tC3P2DI4HcEUY7EMXBLuRN8Qdg+O71ByDKXYM9hAAA0BR+N0vyZ+ZOGoigxL9d958TCVoaydk8MTg+PVekRMvhu0Bu5+vpTR/dBWUlVL2mFeG3KN3NF7S8kjOLYPToezg/du3+acNm0HaryJPn5dtu7npPTekQhPOnOuRYcOYWY9+//kv3zVmg1sGfwMxcBmeqD8WbuwkF6+t/x5pGxIl194fOtHD4ZbK8JB277jMQx4Y7NZLg5bhziENDSMmk31vmUNI282EbLwy1OhewbBtyDtN5MhgcRi0DHPnSduCDHnupEkSw6cIWXdFqMkHw9cnk/FvWuaZwewwaBm6zw6nR6/OnLuzfitpe/vRzAeW+GIYsmn7pS8P9cQg2Hz3P2gZyMJhpzSTWbeTb42Mt112/qnXpXwxnEymtZF3+GEwQAxeBiZtrR4AjAxjrjn1+PTzvTHYOCADH0Pf/bvIrBc9MljXS8jgL5Qhub6zs7PLYSLguKHgoGIgAx9D4xVTpky51TsD3W/VNJCBj+EyaCL4KFq7tLTCDD6OWmqAoXlDSr6nux8GgVk1VYzB7kKZgcDwhpOl8DC4GYiBuzRY/5zdF8O7YsBE0QhNLB+xTeF6OvsyTTID11NwOZM0dumxeT4GlkURLBtmPVomhmuTwER9vTT9+V6nqAyOZSWxFFyPw+VUzNqnh+b5frAcCYPl/hzzpK9MDJedNHb8+PEOE7n6oltbW4N/kVPqPSVvx/A1sFIKKeFhEAT7C9/ZlIPB/cFj4BlE+lS0ncjDaZ/KM7C9w80rwfAazNDfcOFYuzFWGW6YeVh+ODzzel4G+I9my3D45nlpsPmA6kulYPhXIvE3iGHJZ8iMBxwZSKhxxKhRIxod1kreToICW4jSMxiWB2cGZTKFofDdS52xWBKGP8lXhfyRYdhx+dili9aRmaGOT0y+cupVq59+idz7RWcGKQcP2hv4YXBaNZWXAVgQzQx1LhjoJNrcuGH4u8zwZ4Zh2qpMp8rwWTLqhSNNhDw2yu7OZGX4M5MSMpjexGGlpO+jOTooJcqgfcZCg8JBj6E/fbFR44bhD5LCf19jGPZffdFKiaE11NFFLs1Gx5M5H7W9GLwcf+1TMgbz2zh8tWfPYP0E5iVAXzCYCOyLhqKbbcNf/v2fv7LbhocOimcv+QJpoAxrmu1HOFg3eTMPpGngYAZja5tl0rgCMw2y1cLwzCWDeYd1w7iPTD/w7vHX7lQZPjnprAsuWAExdE7OrAkCg7Y+toyk8qPDF910cNne6wytje+uPWH/pNHBgr5FnbuVEvfh2/TGEdnRt5eBQZ1J7YnGAK7CLUPDjqv73vXBLLxkvc27oYd+vXNGpTBtRRjOiDSQtMdLAooMRGFOmX2OpP6SYRrtB7HOPP91hvWI19M+xl1nu8M3pmzYU7KaV4Th1N4GEh5eHgY6S6bFXyjgaK/Lm2iLA/tWfs6+FWFgYmYwlSvC8Ln6IfPOurcMDIKJwWn9q/wrFqa2dSjOQDuyHc/Af6ck5Yk75+50moifgf6UtOyOGyKy0/pgYJY3m3INMPi9MsM8EDavMWMSSZpW9o4MtnHF4LRKqwkG/1dmGAcCLpt3WOmA0VET4W8GXTI4HU/XAIPxygzlZg2Ze2YtKzODedeV/wIZfXNvTQ0wsFdmaDdr2LaC3H2wzAym1O51SqViYK/MUG/W0L6DdG0m5MUdO4Q+mnC+D0wSLotpruZpkat5PgyWY1GwHMkxTyyD7IVh0ej9zz686Igdg/HKDOXP05fsJZvWErLs6qsPZGiyJAMmV6Sc52qeL/b2cJlkwXK2SJmd9ZQDw1c++KGnijNsJLekDhuuN7a/MkNhaO9WlgaCKyUlblZK35U3TT9mGMynfTSG2HWEfNiOwXhlhsKwbSWZdwAZaNwwfF5meIphsJ72mSgzPHM3IdcJNgzGKzOUmzVkFs7rIMhA44bh2zLDjxgG82mfrRNHTvzSoo2PSLug07stDPX7mpSY35wgQyGu9pQefN/7v8ZuG8ynfZil4fqjFoaucEmuU0IG856S+bSPxiBvGyawzelKaZL8z8eQwTmlO26Q9pRuSh+ZZmUYPvyE4cOHD61HBueUkOG9B3Y9fO9hK0NPzwT5DnK+/77B7UAgg0OCdUkAMiADMtDULgNnkKEQZKBBBmRABhpkQAZkoEEGZEAGGmRAhsAziIXE8yKYDFxOZ7maZ9NczfNxsJxKguWkYdarwYBLgxCEpQEZBGTQgwy0e2RQggz+e0cGLciADMhAgwzIgAw0yIAMyECDDMiADDTIgAzIQIMMyIAMNMjggUG7S4NwTXPzy8hAU3EG7S4Nuws3lEEGoQoM2l0atixYvEV69s2OjsNRGjEfBZOGy6kMV/NMkqt5XgTLyThYNsw69L9dlIpBu0vDjseF1mcJ+eqcOT+M0yTzcTAZuJzOcjXPprma55NgOZUCy8ZZrwCDfpeGzauUB1wpCdXYNqh3aVi+i3SEkIGm8ntK8l0a9iw+2tK6MIcMNHjcQIMMtHtkUIIM/ntHBi3IgAzIQIMMyIAMNMiADMhAgwzIgAw0yIAMyECDDMiADDTIgAw1zxCzvzzB+7URgb4yIx6wKzMswaVBCMLSgAwCMuhBBto9MihBBv+9I4MWZEAGZKBBBmRABhpkQAZkoEEGZEAGGmRABmSgQQZkqDUG7S4B2gMyqKnWXQK0B2RQU627BGgPyKCm4gzaXQK0hxU33vhSmiZD0mCyRco5uF6sXOzt4TLJgOVMkXKeeZKqAIN2lwDt4Ttr1hyO0MTyETApuJzMwPU0XM4kuXrPx8ByXATLhlmPVoBBu0uA9kBwpaSkWncJUB6QgQaPG2iQgXaPDEqQwX/vyKAFGZABGWiQgYehr5em52AvGBEuHz3E1fzQUbgeg8sHe8ByOAyWDbPeVw0GPfsauHpbdQdX85bVXM0v2s/T+geNXJ3DQQa3CRLDsYVcvT3zCFfzNc9wNV9wjKf1kfu4OofjkQFTniBDIOKNQT8v6j2x1pbZKf32616jtPTf/6rm5ontvnufHVdnnWf+wXhj0M+Les+61WT5Jv32616jtOTpnyw55LP3SPPYuNo1V/9QvDHo50W9Z08PWfukdvt1H1Fa8vS//wHit/fctLjaNU//YLwxaOdFfaa7Jabdft1HlJY8/d8TJr57b42rs843/0A8Lg3dHL8NKxcopw6126/7yOZVHP1HP0389y4xKF1zzT8Uj9uGwnlR79neTtjbr3uN0pKj/2+s5ehdYlC65pl/MB73lArnRb1n6S1Tp27Vb7/uNUpLjv7nH9Dew09jiUHpmmf+weBxQyCCDIEIMgQiyBCIIEMgggyBSIAZuup7hltelF7qqq/ChylzAswQ3scwZLVTNtJL4X1V+kBlTIAZQk0TTphE5p82bAYJTThzbv6mt42cnJdeCjWRGUOGziKhq267fEKpL62uUgLNIP3qP1F/LNzYGTpxL3nuknT69Oell0JN68+Pxc7dGHpjLxn3aLU/ZWkSdIY7hzQ0jJgckk/HH10/4827FIbblhJyX0toNCFTfJ+/CFaCzjB3nrRdyEjrIbJ95PzuC1WG5jZCFt8mv4gMZY/EMJR0nx1Oj14tj/hdU8n+t+6UXgo1PXZBXDxvPTJUJKGmbP3HycJhpzQTecRfuPidV8wcI70kPWk94/QZyou38l25FJgEmGEwBRkCEWQIRJAhEEGGQAQZAhFkCESQIRD5P9B3KGsZ6MejAAAAAElFTkSuQmCC" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284617 282.3   10014072 534.9 10014072 534.9
Vcells 15813785 120.7   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">2.106396</td>
<td align="right">2.243083</td>
<td align="right">2.367009</td>
<td align="right">2.274287</td>
<td align="right">2.332871</td>
<td align="right">7.591631</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">2.890362</td>
<td align="right">3.057860</td>
<td align="right">3.306450</td>
<td align="right">3.133010</td>
<td align="right">3.217300</td>
<td align="right">8.729541</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.372184</td>
<td align="right">1.36324</td>
<td align="right">1.396889</td>
<td align="right">1.377579</td>
<td align="right">1.379116</td>
<td align="right">1.14989</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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ycnJMRgM58+f/+qrr55//vmamposR5aYiID1uyHq6+stFku3bt10tAlycnJWrFhx7bXX0j8jVr5+t0XaZSElxayQqwv9+vUrLCysq6v78MMPy8rKrFbroEGD7r777l27dn366afZji6+iID1uyGqq6unTZtGopYo23HFQWu20ccRK1+/2xYVHNEAAAOSSURBVCLtsnAtKWaFXL148803T58+vWjRIqvVOnz4cPrk9773vS+++CL0BcitiIB1uiGam5vdbndubi6JWiL+N0FIxMrX6bZgIQu9JFohlxBSX1/ft2/fzAeg2YEDB1wu15w5c+h9GJs2bTpy5AghpL6+vnv37tmOLr6IgHW6IQ4fPhxKPbrbBCERK1+n24KFLIxL8vv9zz//vM/nKyoqmj59eoY/PRVVVVWff/65xWIhhEyaNKm0tPS3v/2tLMuFhYU///nP+b8X6eLFi+EBB4NBPW6I1atX/+AHP6C1lSOWiP9N8Pjjjy9cuJD+4ha+8vV7UKQdhkoCAEd4/1YBgA4FKQkAOIKUBAAcQUoCAI4gJQEAR5CS2oMtW7aUlZU1NjYOGDBAw9tDb6TtpDs6gCRkrYQbpNHEiRNHjBgR92WBQODy5cudOnVKsR0AdtBLag8+/fTTefPmPfLII/X19RUVFYSQ1atXFxcXl5aWLlmyhBCyf//+8vLywYMHr1u3TlGURx999Fvf+tY111wze/ZsRVFCb6TtEEKWLFlChxQvW7aMvv3ee+9dsGDBnXfeWV5e3tzcnNXFhXYtu4UIIC327dt31113NTQ0lJaWKoqya9euYcOGNTY2XrlyZcKECevXr9+3b19+fv6XX36pKMrf//73cePGeb1er9dbUlJy7Nix0BtpO3/+859HjBjR3Nzc3Nw8fPjwv/zlL/v27bNYLE1NTYqiTJ48+e23387u8kI7hhO3dqimpsbhcJSXlxNCzpw5U1dX17t375EjR9LyF4MGDXrjjTd27tx56NChc+fOeTye6LdPnz7darUSQu69996amppbb731hhtuoLXSi4uLo98CkC5ISe2Q1WqdOXMmnY0nEAgoilJbWxuasu3AgQMPPvjgAw88MGnSpN27d0e/XVGUUA0NQRDorAcqV6AA0gjXktoVv99PCBk9evTGjRudTqfP5xs7duw777wT/pq//vWvtD5s165dP//8c5/PF3ojdfPNN69fv97j8bjd7vXr19OqdQCZgZTUfhQUFBQUFNx///1lZWXTp08vKyvr27fv0KFDp06dGv6ye+655+OPP/7Od74zd+7cioqKJUuWhN5IX3DrrbfecsstgwcPHjx48Pjx4ydOnBj+dlEUZRmda2AFlQAAgCPoJQEAR5CSAIAjSEkAwBGkJADgCFISAHAEKQkAOIKUBAAc+f+Cv5ZdD+z5GQAAAABJRU5ErkJggg==" alt=""/></p>

<h3>n = 10000000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284615 282.3   10014072 534.9 10014072 534.9
Vcells 15813409 120.7   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 10000000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">6.011622</td>
<td align="right">6.43525</td>
<td align="right">6.53022</td>
<td align="right">6.502597</td>
<td align="right">6.595218</td>
<td align="right">9.190804</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">13.629251</td>
<td align="right">14.55810</td>
<td align="right">14.75445</td>
<td align="right">14.783079</td>
<td align="right">14.854335</td>
<td align="right">18.384923</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">2.26715</td>
<td align="right">2.262243</td>
<td align="right">2.259411</td>
<td align="right">2.273412</td>
<td align="right">2.252289</td>
<td align="right">2.000361</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 10000000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284743 282.3   10014072 534.9 10014072 534.9
Vcells 16413867 125.3   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">7.314241</td>
<td align="right">9.419828</td>
<td align="right">9.966503</td>
<td align="right">9.799765</td>
<td align="right">10.03223</td>
<td align="right">21.90145</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">9.949639</td>
<td align="right">13.301965</td>
<td align="right">14.147249</td>
<td align="right">13.825064</td>
<td align="right">14.52792</td>
<td align="right">23.94363</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.36031</td>
<td align="right">1.412124</td>
<td align="right">1.41948</td>
<td align="right">1.410755</td>
<td align="right">1.448125</td>
<td align="right">1.093244</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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bdq0xsbGrKwsQRD27t07fPjwpqam5ubmCRMmvPfee4cOHUpMTDx37pwgCN9///29997rdDqdTmdmZubZs2elFcU4H3/88ciRI1tbW1tbW0eMGPHpp58eOnRIr9dfvnxZEIT8/PwPP/wwutsL4hI8uMWtiooKq9VaUFCAELpw4cLJkyfT09NHjx4tDoKRnZ397rvv7tmz58SJE5cuXXI4HP6rz5gxw2AwIIQeffTRioqK++67b9SoUeIo4xaLxX8VAJSDkhS3DAZDYWHhvHnzEEJut1sQhOPHj4s/EkYIHT169KmnnnryyScnTpy4b98+/9UFQZBG0qAoyu12I4SCtEABoApoS4pDPM8jhO6+++5Nmza1tLS4XK577rlnx44d3st8/vnn4hCxvXr1OnPmjMvlklYU3XHHHe+9957D4bDb7e+99544Xh0AuEFJijdJSUlJSUlPPPFEbm7ujBkzcnNzMzIyhg0bNnXqVO/FHn744W+++eaWW2558cUXZ82aVVJSIq0oLnDfffeNHTs2JycnJydn/PjxeXl53qvTNI11glzQZcFIAAAAgsBdEgCAIFCSAAAEgZIEACAIlCQAAEGgJAEACAIlCQBAEChJAACC/H+tn+bjBWonfwAAAABJRU5ErkJggg==" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284806 282.3   10014072 534.9 10014072 534.9
Vcells 17414550 132.9   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">12.55466</td>
<td align="right">14.48667</td>
<td align="right">17.16335</td>
<td align="right">17.14016</td>
<td align="right">17.78849</td>
<td align="right">26.72905</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">17.85022</td>
<td align="right">25.15459</td>
<td align="right">25.78433</td>
<td align="right">25.73430</td>
<td align="right">27.01727</td>
<td align="right">39.47177</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.421801</td>
<td align="right">1.736396</td>
<td align="right">1.50229</td>
<td align="right">1.501404</td>
<td align="right">1.518806</td>
<td align="right">1.476736</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284869 282.3   10014072 534.9 10014072 534.9
Vcells 19414592 148.2   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">24.21368</td>
<td align="right">29.69736</td>
<td align="right">32.57814</td>
<td align="right">34.04261</td>
<td align="right">34.83274</td>
<td align="right">47.32989</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">43.24212</td>
<td align="right">45.98824</td>
<td align="right">49.12330</td>
<td align="right">51.14857</td>
<td align="right">51.94686</td>
<td align="right">54.11252</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.785855</td>
<td align="right">1.548563</td>
<td align="right">1.507861</td>
<td align="right">1.502487</td>
<td align="right">1.491323</td>
<td align="right">1.143306</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h2>Data type &ldquo;double&rdquo;</h2>

<h3>Data</h3>

<pre><code class="r">&gt; rvector &lt;- function(n, mode = c(&quot;logical&quot;, &quot;double&quot;, &quot;integer&quot;), range = c(-100, +100), na_prob = 0) {
+     mode &lt;- match.arg(mode)
+     if (mode == &quot;logical&quot;) {
+         x &lt;- sample(c(FALSE, TRUE), size = n, replace = TRUE)
+     }     else {
+         x &lt;- runif(n, min = range[1], max = range[2])
+     }
+     storage.mode(x) &lt;- mode
+     if (na_prob &gt; 0) 
+         x[sample(n, size = na_prob * n)] &lt;- NA
+     x
+ }
&gt; rvectors &lt;- function(scale = 10, seed = 1, ...) {
+     set.seed(seed)
+     data &lt;- list()
+     data[[1]] &lt;- rvector(n = scale * 100, ...)
+     data[[2]] &lt;- rvector(n = scale * 1000, ...)
+     data[[3]] &lt;- rvector(n = scale * 10000, ...)
+     data[[4]] &lt;- rvector(n = scale * 1e+05, ...)
+     data[[5]] &lt;- rvector(n = scale * 1e+06, ...)
+     names(data) &lt;- sprintf(&quot;n = %d&quot;, sapply(data, FUN = length))
+     data
+ }
&gt; data &lt;- rvectors(mode = mode)
</code></pre>

<h3>Results</h3>

<h3>n = 1000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284867 282.3   10014072 534.9 10014072 534.9
Vcells 24969716 190.6   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 1000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.001531</td>
<td align="right">0.0015765</td>
<td align="right">0.0016532</td>
<td align="right">0.0016220</td>
<td align="right">0.0016525</td>
<td align="right">0.004144</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.004587</td>
<td align="right">0.0046945</td>
<td align="right">0.0049569</td>
<td align="right">0.0047675</td>
<td align="right">0.0048755</td>
<td align="right">0.019813</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">2.996081</td>
<td align="right">2.977799</td>
<td align="right">2.998318</td>
<td align="right">2.939272</td>
<td align="right">2.950378</td>
<td align="right">4.781129</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 1000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYYAAAEECAMAAAAbJmMEAAAC91BMVEUAv8QICAgJCQkKCgoMDAwNDQ0PDw8REREUFBQVFRUaGhobGxscHBweHh4fHx8gICAhISEjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKysvLy8wMDAyMjI0NDQ2NjY3Nzc4ODg7Ozs8PDw9PT0+Pj5AQEBBQUFCQkJDQ0NERERFzdFGRkZHR0dISEhJSUlKz9JLS0tMTExNTU1Nz9NOTk5PT09QUFBRUVFTU1NUVFRU0dRVVVVWVlZZWVlbW1tcXFxdXV1eXl5fX19gYGBhYWFjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJ0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSWlpaXl5eYmJiZmZmdnZ2enp6fn5+goKCg4OKhoaGh4eKioqKjo6OkpKSlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6wsLCxsbGx5eaysrKzs7O0tLS1tbW2tra4uLi5ubm55ue6urq7u7u8vLy9vb2+vr6/v7/AwMDBwcHCwsLDw8PExMTGxsbG6OnIyMjJycnKysrLy8vMzMzM6uvNzc3Ozs7Pz8/Q0NDR0dHS6+zT09PU1NTW1tbX19fY2NjZ2dnc3Nzd3d3f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojo8PDp6enp8PDq6urr6+vs3t7s397s7Ozt19bt2Nft7e3uzszu0M7u7u7vx8bv7+/w5OPw5eTw8PDx8fHyrKjy6Ojy6ejy8PDy8vLz19Xz3dvz4+Lz6unz8/P0s6/0tK/0wr/0ycb09PT1lI31sq31tK/1ubX19fX2l5H29vb3fnX39/f4dm34+Pj5mJH5+fn65OP6+vr76Ob76Of7+/v8/Pz9/f3+/v7////xtf8WAAAO0UlEQVR4nO2de2AcRR3HT1FE5dVCUx4GsEVrBGKtUIhUKloVpYqtBFok9IVQKIVaKQTaqhgh9kG10KJWQMsBTRUpojxLy8va1Wo0VhOV8xEfh3qud8d5epebP9zX7M7sbmb3dvdye+n3+8c+5jczv5n57MzsZjdzCQLFQIl6FwBSBQyxEDDEQsAQC1WJQU5TZQppobJiczETJnVeFpozYrOcF+cudp4pslnVB0OfRNVfloSSxeZKb5jU+UGhuX9AaB4siHMXO+8lzEkfMAwvYPBZF2AABmAwBQzAAAxUwBANhj//V/rxbwLXBRgiwvDrV37+8s8C1wUYIsLQ/59//zJ4XYAhIgy/euUXL/80cF2AISIMf/mf9BPMDXXHgDslVXXCIJvKV2ShSmIzyYZJXS4KzfmC0Fwoi3MXO88S9qw+GNAbYtEbgAEYLAGDWVVgkIBBaAYGn3UBBmAABlPAAAzAQAUMwAAMVMAADMBABQzAAAxUwAAMwEAFDMAwqjDkFAWtCzAAw6jDELguwBAZhjB1AQZgaBAMpWsXrqI7bVO56fLlFWDQNWIY7ruNXLnb2Gmbni6y9QVg0DViGFZuI933GDtts/pzy79KgEHXiGFY8RTZstHY6Zur9yz6LiGrpk/fVaIqV0pCDYnNJFTqitheLoszj67ohRpiWNmj9wZ1p21WPUTuXUvI09u2Sf1U6aF+ofJicyUVJnVRFprTGaFZLopzFzsfIMxJqoYY7ltDluwydvrmS2TlVs2EQWkE75SWLVlNnrhe2+mbqy5ZUgYGXXhuMAUMZlWBQQIGoRkYfNYFGIABGEwBAzAAAxUwAAMwUAEDMAADFTAAAzBQAcMBjUH9uAoYTAEDMAADVf0wYG5ghCk6Ogz4ojsOGIRf1gPDSGKgJBxARhSD7XqoHQbFT+wwqIUyODg7hkdDiv85okoMdu81w6A6ih8GqwV8YWDjiP9VyLUlmPgjiIHLOS4YmLVOjXVYczljl/NczJSNk3MkqCa1fR1WPuMo12Hly6mexH4dVu7CkY2rh7+WzOOKOafk3MzufSlHvTimaDOpFmv43pBze27I8TE4585eG4feIMKgldgstGwG8W1gyJiic1VhMFPkBx2ATaoiDDkXDI4y2rO2tpoaAYNVB1k9GH4G0DDkrEtc8sTAtlrempK4pjT2GgY3zwwGvv/YKuGeTlcDYGDKS9tpmNZUMRgJrMiWWXjPaPUG1huDXcVgA2UmlnQMTMO6Y3CE0uO4Y7Cq5H7vxIli4JKxA5QgrTY30KufbT56bmFg25Rh5qBEW9/smtxDEZtBLhdTDI725ivNBHtjYC5uh5mdHgZNC4eBlm1A4jlwHZUxsIOZ5VJmg7hqsd09Zhicl70W4hhW+GopGPhqctW2apxjphym0QY5PPbcczkmN7N5meGG48MmsDA4ZgkTVPwxMD1dtg8s/OVV6XW0O9+O1iXshsHWe/hyWJe2LVbOJjYtM1PJbKPbbwNijIGrjiHZdt3Yxg3aG2xjs5laC7Rdpnxrmq1nx8Bi48tk5aVvJHflWAcsXW3XG0sMXJ2FGDjpzw1c07FmOqQx7Wa/rPWG4QJtregsAO1fLiO/NwbLap3EEwNzgTkGJV42DPbI9pklxzdI3tkHuLjG45trARRzwexprmXLWUORe/bWSWwwSByG4RvSpir/0G27LJk/Zrg1pb8/7Yl6g8uha1B8MEjuV13E7xv49sBrH7OqeBctAYPQDAw+6wIMwAAMpg4kDOVevxiGNlzSeurc24eAwdO5B4alR46bT1aeQx48sdx5Qdtbzyskpx272CeGzZMXbnjs8S8vmrwZGMJhuLu5N9XaRU7Z2Px90jkmTWbckDz4KU8KBoZbivpZ6RZgCIfhsjEtLeNnkZ2vu4KQzgsIuevsZKs3BW5uqHhHBwYPDIuXKHNBiTx6yEwFw0cJufOsZFsVGL4xi0x9zapqMSQSiWB1GbUYeo5PFSetK52wvXkr6Xzj3tI7V1SFYcyW+097bmyVGBLA4GihZeMOaycLLybfPibbecZJR3ywUBWGQ8mlneRw/dixDishO64DBkP+b1g7O3wA4DFMPveI/fNO0o8d67CSzJxr3TBIw1MAhkAY+m/YQRY+rR871mElN2x3xxC4LgcEhipEMeQ3dXV1devHjnVYe9bvUTHcdv75zxapSpWiUENiMymFST1UFppL4szLXrmLzYQ5jnod1tazZs+efaF+7FiH9ZOL5s24i5DHtmzZm6LKDKWEKojNlXSY1KWs0JyRheZsSZy72Pkg4U6ixXAGE+ZYh5WQPRiUqGo6KLVvLpTL+lqrznVYgYFRbTG86lBFntGBwQODcxCrCsObM76iA0NtMczIA4M/5zXFcMYhU6ZOnQoM3s5riiGpCRi8ndcQg/mfdF7/UgcMPjG8JMYw0HLyFLatdQznLXhR3b244EPAEAmGv+dyfxVhWHEVmX+zAwNJto6fOHF8q+eoBAy+MPxe/dLzdwyGbWdOufHTd5IFydUfmHX2nHPWPfgsWf5FJwZFu3d7MQAGVX4w/E3F8AcGw6VrS106hqvJxCf3tBFyx8QBVwy+BAy+MPxWofCvlxgMz0x/2xoFQ0dydTc5rZyeSq547342GTBU69zX3PDHf/zzT+zccMtu+fgVXyAtFMP6dj4ZMFTrPNAN6+bT3zNv11umztiuY/jwzOMmTLjNDUPXrNJ6YPDhvKaPb/Nax5cnXQwM3s5riuHowRZSPBwYvJ3XFMMRfS0k1QQM3s5riuGa5jFLjlsODN7Oa4qB3H3Z4u3e0YGhthjYLzOAQaSaYmC/zAAGkWr72sdXbGCoMQb2ywxgEKm2GPBlhk/n+DLDVOwxfOVd734gCAafX2Zk0lTZobRQRbG5khGaPVKXCkJzNis058vi3MXOM4Q7ccXwPfVfDn7EYLC/9hkOg88vM/bvo+ov7xNKFpsrfWFSF9JC88CA0DxYEOcudt5HmJP99gbSm/6zKoYHGAzO1z7uGPBlhl/nfgal76gYfshgcLz2ccXQvLNNEzB4O/c1N3z+7e/4Gjs32F/7uGPoTqE3+HUeyWsfdwyEzFQ37wMGb+c1vGFtajqoqalpbDMweDuvIYZ9+6ap8z6eon04r+0fuv0JGIDBEjCYVQUGCctaCc3A4LMuwAAMwGAKGIABGKiAARiAgQoYgAEYqIABGICBChiAARiogMETg2Md1kzH3MsLwKBrxDA41mG9cx25dUtjYNBWhh0dGBzrsD6xj2z8ZkNg0NdJHh0YHOuwEtIzN9MQ67CqGBp5HVZWjnVYyZrr0qQx1mFNJFKNvA4rK8c6rPevpKboByX31dYxRbusw3rjx+fM2Ro1BqP544hBsBD/aHtuoD86EFMMw3MABlPAYFaVxeBSaL+DEiczLBoMw7Sm99zQmIOS29UT5LnBykc2A1xT+8fglp5i4KzMSUym6MAY2GrJrr91Ygb5wsA1Y8Lc6BjcMjfCvDBY46Fpto4TCRsGrhCK4ojBGt8Tbhq2nTkMVgvwR7Z2Yn0YjWNvIj1OP/VNt0ZRbW64rNgwvliWWY8fQwwJs6juGGwsrAZgMdh42ZlacTw8WOxoqHtE2hsk3sCcWBsmPP4Y3NvGVn4+noWBaUj3BueuSXdJLnFcy6VhKLgUmzmTeQxWPbSAOM4NTH24VnVtBcf1x8S3JWZrzvcUI5TS4zMz5o9+tn84KOgYnKUxj2SzXzlziScG9gp2njPtlKA1c8VgR8hEcWSs7rQpOpFgLmk2Ev/cwPZKycJgZMe6p0fOOyU2XowxOKXdbri0vBgDM6K436oyGCS2+QQYJDtK9YaVc2l34n7DSuM1FAamLiYArlLDvW9IuDSrQ7bnBnv00fGnvYgxuAovQYEBGKiAARiAgQoYgAEYqIABGICBChiAARiogAEYGh4D1mH1WId1ZDBgHVaPdVhHBgMGpVgMSsAADJaAwawqMEjAIDQDg8+6AAMwAIMpYAAGYKACBmAABipgAAZgoAIGYAAGKmAABmCgAgZgAAYqYAAGYKACBmBoDAyOdViNAGBQVb91WI0AYFBVv3VYjQBgUFW/dViNgAZYh1XXKF2H1Qh4eP36Fwep5KFBoYpicyUdJnUpLzTLWaE5XxLnLnaeJtxJ7TA41mE1AggGJame67BqG2DQhecGU8BgVhUYJGAQmoHBZ12AARiAwRQwhMHQ30clPdcnlCw27+oNk/qFvUJzKiU0S8+Lcxc7793NnPTXB4Olh88O5Xfi82FSX7I2TOqNnwiTuveEMKmHETBUq3hh2HVTKL/XhOrOtz8UJvUja8KkzlwZJvUwCowBilLAEAsFxWC9F61e2m9bSue2tz8XJLWWMLD7te3tH1kZ2PflWftb4YgUFIP1XrR6ab9t+YPugKm1hGHcr3ghoO/B9ilZYnsrHJGCYrDei1Yv7bct773u+nsDpdYShnD/zM0kqO+hS7PE9lY4IgXFYLwXDaieuZltX5c6HgmSVksYwv21KRLYd0eW+4nO6BS4N/SEuB7037Yk9wS9+79nbXD36U+R4L4VDOxb4egUeG4w34tWL+23LW/dQVYng6TWEgZ3/62NIXwrGGxvhSNS4Dsl871o9dJ+23Lv3I5lQ0FSawmDu1+6y8giSGIFg+2tcETCc0MsBAyxEDDEQsAQCwFDLAQMsVAjYOhu3tfkCFSCupvrUJjaqBEwpHYyGMq9+l4JSu2sU4GiVyNgSLZNO2gmWXrkuPkkOe3YxZWPveGYWRUlKNlG5o8Zu5Akz7nozGlRfVtdHzUGBuXSv7u5N9XalTz4KfLoqcXiUY8rQcm2TSdlMifclXx1Hzl9Q71LGUoNg+GyMS0t42clW5XzvZvmv3aHhuGiGwn5zNzkJEJmB319EQ81DIbFS5R5oaSMQ+T+Y5b2nKxjaO8k5PqL1EBgqLkUDGNJz/Gp4qR1aosvmkOeef12JSjZdseErHziJmAYESXbys3vJ8vGHdZO1BZ/8pQ3nbVgshKknHQcfdR8LfDCdfUuZSg1AoYDQMAQCwFDLAQMsRAwxELAEAsBQywEDLHQ/wGhUDo6hwR8FQAAAABJRU5ErkJggg==" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5284992 282.3   10014072 534.9 10014072 534.9
Vcells 20971029 160.0   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.002419</td>
<td align="right">0.0025985</td>
<td align="right">0.0028787</td>
<td align="right">0.0027255</td>
<td align="right">0.0028575</td>
<td align="right">0.015057</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.004512</td>
<td align="right">0.0047965</td>
<td align="right">0.0050846</td>
<td align="right">0.0049025</td>
<td align="right">0.0050295</td>
<td align="right">0.019761</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.865234</td>
<td align="right">1.845873</td>
<td align="right">1.766273</td>
<td align="right">1.798752</td>
<td align="right">1.760105</td>
<td align="right">1.312413</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285058 282.3   10014072 534.9 10014072 534.9
Vcells 20971178 160.0   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.003181</td>
<td align="right">0.003371</td>
<td align="right">0.0036848</td>
<td align="right">0.0034885</td>
<td align="right">0.0036545</td>
<td align="right">0.018744</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.005737</td>
<td align="right">0.006082</td>
<td align="right">0.0064582</td>
<td align="right">0.0062275</td>
<td align="right">0.0064965</td>
<td align="right">0.022366</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.803521</td>
<td align="right">1.804212</td>
<td align="right">1.752686</td>
<td align="right">1.785151</td>
<td align="right">1.777671</td>
<td align="right">1.193235</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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EgwosscEs2244kVVmNDyRJwuuFLB3meoPSmC3l/cet9VUqTLv/jMCn7vBYYN6pfUm7vVrrgasuo5VbtKSs/sgr+Xh+5YkeclhWalqPaPlOclhesbKZJQghpu4jGj7eaKrpJBkqLhFsOqNb9qz8oNoW+JXHARb1PEZIuk3C8SulHSb+YQXF3EtpVsIo1ctMViKJEbbuF+Nwk3s3qHPiHEpE5YQohZ6cjhVtTHEVT9OMJN5y+ZR1VNU+/gSUKJnJKixR18FouFqPBI08TQ3oc3A8fkPJd+zV5kQeiNJEpJOGgUoepuFLzmLf26FSSAJEpJcQSnGS/iroj5vX6grKS4vA0AEnm93osXL8awAAIpyefz7dmz5+mnny4pKSkuLn7qqad2794tcrsZQN+T/UNekti4caPNZhs1atTq1asJIa+88srcuXMJIceOHSsqKvJ6vS+99NLjjz9+9913T5s2raysrKen58iRI6Wlpfn5+du2bYthyYMbbvv27duyZUthYeH1119/3333MQxz6tSp+vr6l19+uby8fMaMGTEpJUAoJKNwPvzww+rq6r/+9a86na60tPT111+///77q6ur//jHP65du/bVV19lWZYQ8u6779bX11sslgceeODll18eO3bs+++//9lnn9lsthgWPjglXbhwYffu3TrdD3dNjxw5ctasWR6PZ+fOnX1bNgCQ48CBAw6Ho7S0lBDS2tpaV1f3s5/9bNu2bePHj1+8ePGYMWO42UpKSrjHnpSWlnIpafLkybHNRyQ0Jf385z8PmuL3+xmG0Wq1oW8BAIXMZnNZWdmSJUsIIV6vl7tDo729nWXZ1tZWfjb+agz/ICAaHswkfHl7//79CxcuJITMnj37qquuevXVV/u0UADQCzfffPOOHTva29vdbvctt9yyZ88ej8fzi1/8Yt++fcePHz906BA329tvv93W1ubxeLZu3frjH/84tmXmCaeksrKy22+//ejRoy6X69SpU7/85S/7uFgAIFtBQcG8efMKCgpycnImTJgwZ86c9evXT506deLEiVu3bn344YddLhchZOLEibNmzcrNzc3MzHzwwQdjXervCN92m52dffr06WeeeSY7O7usrGz48OFNTU19XLKYjFBCCBG/wVI2k8nEsqwawwHQMEJJVERuu+0lKbfdyqPSURHD225feumllpaWdevWKR65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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285121 282.3   10014072 534.9 10014072 534.9
Vcells 20971420 160.0   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.004437</td>
<td align="right">0.004741</td>
<td align="right">0.0052337</td>
<td align="right">0.004875</td>
<td align="right">0.0050265</td>
<td align="right">0.022275</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.007661</td>
<td align="right">0.008263</td>
<td align="right">0.0086313</td>
<td align="right">0.008441</td>
<td align="right">0.0086600</td>
<td align="right">0.023283</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.726617</td>
<td align="right">1.742881</td>
<td align="right">1.649199</td>
<td align="right">1.731487</td>
<td align="right">1.722869</td>
<td align="right">1.045252</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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mFFLZt830EWg42ZMx02RSsdN0JGdOGpvIta+4XcLmtZxU7niFpPwnpHFYnGs7OgJoEi0dNyi9kkVe3PouIVDSopnSuoI7cdJrAcq/SkpnOzubWPFmpKI5jpHSgqHjlsyQycCEk4y3wQA0Dn0NZHoFAwGTWpsaqSQkkKh0BtvvPHEE09MnDhxwoQJjz/++O7du0OhUOcHB5BwKMlHa9ascbvdgwcPXrp0KSHkxRdfnDZtGiGksrJyzJgxwWDw+eeff/jhh++6664bbrihrKzM5/MdOXJk6tSphYWFmzZtimPk8pS0b9++0tLSzz777Jprrlm7du369evHjh178uTJ0tLSffv2xSVEgERBST764IMPduzY8de//rWqqur48eNbt2699957L1y48Oabb/7mN7/ZvHkzx3GEkLfffvull1764IMP/H7/5s2bCSHvvvvunj17HnvssTgGLz+X1NDQsHv3bqvVKk4ZNGhQaWlpIBDYvn27qaEwDMMwjMq74v9mrNekkok5MUvLT6DCE7dC1Ev2LFiS+n+XeRYsiXX1WvY9HRt14MCBpqamqVOnEkLOnj1bVVX185//fNOmTSNHjiwvLx82bJgw28SJE10uFyFk6tSpmzdvHj58eElJidvtjnV1xpKnpF/84heyKTzPMwxjsVjC3zKWzWZTufwn5HW73W74eoWtM6lk4XKe4SUTQkyKmRDCcZxJxzbLsizLmlG4UGwcqzqweKWOdbMsa7VaDU9JTqezrKxs/vz5hJBgMCgcVs3NzRzHnT17VpxNPBsTCASEv4UMFV/KV9z279//5ptvrlu3bvLkye+///6zzz47Y8YMs0Npb29XuQmAZVme5824Mm3qTQAOh8OMkoXCTSrZYrEk4k0AKSkpCVfVVqvV5/NFvQnA6XTGVOyNN954//33P/DAA3a7fcKECQ899NDtt9/+61//et++fQ8++OChQ4euu+46Qsjrr7++ZMmSzMzMjRs3TpgwoUNbYhzlK25lZWWTJk06evSo1+s9derUb3/7204OCwB0Ky4unj59enFx8YABA0aNGjVlypQVK1aMGzeuqKho48aNDzzwgPCtUFRUVFpamp+ff9VVV913333xjvrflG+VzM3NPXPmzJNPPpmbm1tWVpaXl1dTU2N2KLhVMiax/hZUO9wqKWNeVcfxVsnnn3++rq7uqaeeMrzkDlLuuBUWFk6fPv3gwYMnTpxYsmRJ7969OzksAOialFPS1q1bt23b9sgjj2RkZHAcZ/a1NgDoZGVlZfEOQZlySrLb7f379z958uTJkyd/8IMfVFZW5uXldW5gANAVKaekyZMnO53O3Nxc4SXLssI9DgAAplJOSTabbdeuXZ0cCgCA8k0A+fn5+/bt8/l8wf/o5LAAoGuKODjJnXfe2aNHD/HlmTNnOiUeAOio5uZmHUulpaUZHokOyinp6NGjjY2Nsd4zCgDQQcodt4EDBwq/KQMA6EzKraSLFy/27dt37NixYmLavXt3J0YFAF2UckqaP3++8DNiAIDOJE9JbW1tDofj2muvDZ9VeKtTooqo58lTwh8XCgbFNxKAxBMKEdassa2vXLkyZcoUn8/XrVu3nTt36s4V8vjmzp27bNmy8+fPSyeeP39+2bJlc+bM0RmsQVzHT8Q3AIDExR14z7Zike3pheynn5hR/ssvv3zTTTd99NFHo0aN6shP0OStpOeff/7IkSP33ntvTU2NcBNAQ0NDXl7ewoULFZtOnall9EhkJQAdmLNnuMMHhL8te1/zDRpCHFGupx8/fvyZZ54JBAITJ05sb28fMGDArbfeumzZsptuuukf//jHoUOHUlNTz50753a76+rqJk+eXFRU1LdvX0JI9+7dOzKWnsK5pGuvvfbtt98mhNTV1RFChNVQ4kLBoJ4nT6HXBhAT5srl7730NPPRUtKePXvuueeeO+64Y+fOneHDpwwcOHDBggXXX3/9ypUr09LSZs2a9eqrrxJC9u7du2vXrr179+oOVa1j2bdvX6rykQD5CCBWof7fjagd+q8BfFbPqIvcf//9b7zxxoQJE2w2mzgxEAgIf/Tv358Q4nK58vLyXC6XMH3FihWvvPLKnj170tPTdYeKR0sCdAFOp3/2fPazT4jVFhpZpOUk90cffbRy5cqsrKySkpKZM2c2NTURQo4dOxZpSNzXXnutqanpT3/6UwcjRUoC6BL4bhnB62/UPn+PHj1mzZrlcrlKS0tLS0t/+ctf/vnPf87NzU1JSQmfuVevXvv37z9y5IgwqvesWbPuvvtufXEqD3RLCNm6dWtVVdXvfve7PXv23HnnnfpKjwkGuo0JBrqVwkC3Ukn4G7clS5ZUVVXV1NQwDPPcc89VVlauWrWqkyMDgC5IuUu5Y8eOV155pU+fPhzHvfPOOzt37uzksACga1JOST6fz+/3C397vd6437QNAF2EckqaNWvWzTff/PXXX69evfq666578MEHOzksAOialM8llZeXjxo16sCBA8Fg8I9//GNRUVEnh6URfvIGkGSUW0nt7e1er3fQoEG5ubmnTp2i81ySmI8AIGkk8BNKhB+XxDsKADBSYj+hBP01oB9OL8QETygBMBEa8rFKtieUCHsAvo5AO1P3mS57emH9+vV79ux58cUXL1269NVXX9XX1//sZz/Lzs6OumBSPaFE/OzRVAaNpPuMeVnJjGJj9WGz54//rzGFZR7p1bPA2Rl3Gi5YsKBfv35r1qxZvXp1U1PTs88++9RTT0VdSjklJc0TSqgaXAktOIiXmnbf7af/Jfy96+Kl8yMLHNEGA4h1CLcpU6aEF9La2tra2mqz2Xr16lVdXa0lVOWwhCeUlJaWTv4PLWXFXfjRHj6l58lTwj/pxNSqT8XpJjWzw1twiSVq5ai8mxCbnNxfFX9r+d7v1f/pVfuhr0AYwu21115T/DnuwIED161b9+233953331r167dsWOHMF12W/VXX33ldv97qKa0tLSGhoao69X/hJJAILBhwwaPx9OvX78ZM2YoTpS9bGhoePTRR4X+5Lx583JycqLGFyv1HUt2bKgcQgm9gxreb1WsN2nhKt0f4S2TqrTjDc+E/qC1k/XU3HaFAUZk7r///oULF27cuLGsrEycqDiEm9frDQQChw4d2rZt28GDBx988MHx48cLs33zzTe9e/cW/s7Jyfn666+lZ6gVyVNScXHxrl271q1bJ5sePvD2sWPHcnJy7r777pUrV9bV1QnjT8om1tTUSF82NzdPnDgxLrc4hWefTv7q1neaU8chp76WjqcGU0++KG5vpEqQRtI0YpixkUg5K/8m/q1xk9W/FcR320uKOxydJgPtKf/j7relocnKMnN69XSaMITbddddJ/z47A9/+AMhZP369YSQ/v37v/vuu8IM9fX1eXl5UdcrT0nl5eXdu3efO3du1CWrq6uHDRtGCHG73dXV1UJKkk2sqamRvmQY5ty5cxUVFQUFBePGjYu6Ci30tQhkCcJTPCK16lPpxJiON2lRKkvFegArBiM7PsMPV5XcJzZYogaTWvWpdB6xTFnhxmal8O01b13mCW9RSistjpswOTNjcmaG9vljHcJNsZDB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" alt=""/></p>

<h3>n = 10000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285119 282.3   10014072 534.9 10014072 534.9
Vcells 20971044 160.0   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 10000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.01245</td>
<td align="right">0.012975</td>
<td align="right">0.0130618</td>
<td align="right">0.013061</td>
<td align="right">0.013142</td>
<td align="right">0.019014</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.01938</td>
<td align="right">0.019759</td>
<td align="right">0.0205490</td>
<td align="right">0.020372</td>
<td align="right">0.020553</td>
<td align="right">0.035907</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.556626</td>
<td align="right">1.522852</td>
<td align="right">1.573223</td>
<td align="right">1.559758</td>
<td align="right">1.563917</td>
<td align="right">1.888451</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 10000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285244 282.3   10014072 534.9 10014072 534.9
Vcells 20972097 160.1   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.009791</td>
<td align="right">0.0102445</td>
<td align="right">0.0112660</td>
<td align="right">0.0105070</td>
<td align="right">0.0111005</td>
<td align="right">0.041983</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.015937</td>
<td align="right">0.0163620</td>
<td align="right">0.0169763</td>
<td align="right">0.0165925</td>
<td align="right">0.0169615</td>
<td align="right">0.032312</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.627719</td>
<td align="right">1.59715</td>
<td align="right">1.506863</td>
<td align="right">1.579185</td>
<td align="right">1.527994</td>
<td align="right">0.7696449</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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AICo0d3dffHixeTk5Gg5oCBJPp/v3XffPXbs2MmTJ30+34QJE7Kzs++55x5ZDOC6uroxY8YghBwOR11dHZYkWeKtt966du3a4uLvp29bWlrOnTtXXl6emZk5ZcoUnFhfX//f//4XF1GJ+IlrJxSOllxc194JdKu7ZULGOY4j1NQ4fLURmzpkg2iLvb1u3brNmzebzea5c+euXLny1VdfPXDgwNatW48dO/bUU08dPnz45Zdf/uqrr5qbm51OZ0ZGxgsvvFBdXb1p06avvvrqwQcfLCws1HpOPUUuSfv27du8eXN2dvbPf/7zhx9+mGGYM2fO1NTUvPLKKwsXLpwxY4aU0+PxDBgwACGUkpLidruDJeLbEn9rtVozMzMnTJiwcePG5OTksWPHIoQqKysPHDiAEFqzZk1iYmIwR4mG1mdZludJrRolFKWU0BYGiKRwkAtGjuPqG7GpY2JizGazSh6fzxep2Y8++qiiouKf//ynyWTKzc194403HnnkkYqKinfffbekpOS1117Dp/P+++/X1NTYbLZHH330lVdeGTt27IcffvjZZ585HA7tp9Rj5Pdha2vr22+/7X/RjBw5ctasWYIgbN++3T+n1Wp1Op0Oh8PpdOLpoWCJEtnZ2fjD1KlTa2trsSTNnz8fzzq5XK7vvvsumKPGfeKmclI9AZ64+YPXJRmuqcN84qauWYFUVla6XC48Q9LU1FRdXf3rX//6pZdemjBhQn5+Ph7HIIRmzpyJRTw3NxdLUk5OTnT1CAU+cXvooYdkP2J4lQDP8w899JB/ekZGRn19PUKooaEhPT1dJVFi+/btNTU1+NtrrrlGv7MAAOBHrFbrggUL9u/fv3///i+//PL5559HCLW3t3Mc19TUJGWT+l+CIODPNOw7oDxMPXDgwOLFixFCs2fPTkhIeO211wLzTJo0qampqayszG63p6Wl1dbWlpeXyxJlRaZNm1ZRUVFUVORyuSZPnqz3uQAAgBBCt91227Zt29rb27u6um6//fZ33nlHEITf/OY3+/btO378+KFDh3C23bt3X7hwQRCELVu23HrrrdH1WUJ5qWR6evqWLVtsNltJSckrr7xyyy231NXVkXYFlkpGBAzc/FF8oaSHq9gloj5w07BUcsOGDVu2bOno6Lj//vvLyspKSkouX768du3aEydOPPzwwydOnPjLX/6yb9++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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285310 282.3   10014072 534.9 10014072 534.9
Vcells 20974061 160.1   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.017026</td>
<td align="right">0.0178370</td>
<td align="right">0.0187920</td>
<td align="right">0.0181555</td>
<td align="right">0.0185335</td>
<td align="right">0.041306</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.026892</td>
<td align="right">0.0274085</td>
<td align="right">0.0286044</td>
<td align="right">0.0285305</td>
<td align="right">0.0290305</td>
<td align="right">0.042820</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.579467</td>
<td align="right">1.536609</td>
<td align="right">1.522163</td>
<td align="right">1.571452</td>
<td align="right">1.56638</td>
<td align="right">1.036653</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285373 282.3   10014072 534.9 10014072 534.9
Vcells 20976103 160.1   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.027775</td>
<td align="right">0.0295830</td>
<td align="right">0.0427377</td>
<td align="right">0.0321220</td>
<td align="right">0.049970</td>
<td align="right">0.324094</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.043930</td>
<td align="right">0.0464865</td>
<td align="right">0.0664115</td>
<td align="right">0.0493125</td>
<td align="right">0.077513</td>
<td align="right">0.365197</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.581638</td>
<td align="right">1.571392</td>
<td align="right">1.553932</td>
<td align="right">1.535163</td>
<td align="right">1.551191</td>
<td align="right">1.126824</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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nDjxs88+GzlyZFeWe/TuJb311ltHjx6dPXt2XV0dvgmgubk5MzNz6dKlSnhKGASJxJPG0POKXlTjJeZIOX7N7vrQPngoSgjwefqJEydefvllp9M5efJkm802cODAKVOmrFy5cuLEiefOnTt8+HBiYuLly5cNBkNDQ8PUqVNzc3NvuukmhFDPnj27suiwxFzSHXfcsXv3boRQQ0MDQggfBkQXCB/AE9V24ydfmtqFQCFp586d06dPf/DBB7dt22az2by+O2jQoCVLltx5551r1qxJSkqaN2/eBx98gBDatWvX9u3bd+3aFXJT5fK4yQcjp9O5bt06k8mUkZExa9YsmcKqqqpPP/104cKFIbcSBAkiEZDkHvDjitru/xoo6HoH3OXJJ59cunTp+vXr586dKxY6nU78YsCAAQghrVabmZlptVpx+erVq6urq3fu3JmcnBxyU0Of66qoqEhLSysuLm5qasL9KclCs9m8ZcsWQms7AACCwvOO+Ytdd453TZjkmvaLYCa5P/vsszVr1nz88cerV69mWdZoNCKEKioq/G3/4YcfGo3Gf/zjH6mpqV1paeghqba2FiczMBgMtbW1/gr//ve/P/zww11pIgCg64SUVNedE1xjxgqaoD4L69Wr17x58x5//PHCwsLCwsJ33nln6tSp6enpHMf5btynT58DBw7s379/7NixY8eO3bp1a8jt9Dtw27RpU2Vl5auvvrpz586HHnrIdwOz2Yznv3U6nclkkiysrKzs06dPRkaG545lZWU41s6fP9/zMTovDMPQNE3ouRuciIZQvkyGYRISEiR/c13HsmwIWXSCQVEURVGETjhOmoSzG4UdrpbQ8wYsy+I8cSQqpygqMTFRmWOI++67zzNv48GDB8XXubm5+MWePXsQQlqtdv369eE6rvRbZPny5ZWVlXV1dRRFvfnmm8ePH3/llVe8tuF5vqWlxWAwtLS06PV6ycKysjKNRlNVVXXp0qV9+/bde++9CKHMzEwcC1iWlXkWXxAElUpFLvMXuTQ7LMu6XC5x1B1e5LKh0TRN7oTjvFvkWk5uXQeKooLM4xYCtVodsHKKogj9eVMm6ZC0devWU6dOTZ06lWGYvXv3ZmVl+YakrKysurq6vLy8+vr6goICyUKcieXatWsbN27E8QghlJOTk5OTgxAyGo04U4IkjuNompbZoCuILk7C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" alt=""/></p>

<h3>n = 100000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285371 282.3   10014072 534.9 10014072 534.9
Vcells 20975727 160.1   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 100000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.094780</td>
<td align="right">0.098565</td>
<td align="right">0.1075561</td>
<td align="right">0.104930</td>
<td align="right">0.1130135</td>
<td align="right">0.140206</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.128716</td>
<td align="right">0.133412</td>
<td align="right">0.1452161</td>
<td align="right">0.139195</td>
<td align="right">0.1529955</td>
<td align="right">0.206819</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.35805</td>
<td align="right">1.353543</td>
<td align="right">1.350143</td>
<td align="right">1.326551</td>
<td align="right">1.353781</td>
<td align="right">1.475108</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 100000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285496 282.3   10014072 534.9 10014072 534.9
Vcells 20982181 160.1   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.074931</td>
<td align="right">0.0776945</td>
<td align="right">0.0842740</td>
<td align="right">0.0827955</td>
<td align="right">0.0898935</td>
<td align="right">0.134197</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.098437</td>
<td align="right">0.1019860</td>
<td align="right">0.1103848</td>
<td align="right">0.1096140</td>
<td align="right">0.1172700</td>
<td align="right">0.178788</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.313702</td>
<td align="right">1.312654</td>
<td align="right">1.309832</td>
<td align="right">1.323913</td>
<td align="right">1.304544</td>
<td align="right">1.33228</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285562 282.3   10014072 534.9 10014072 534.9
Vcells 20992230 160.2   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.122919</td>
<td align="right">0.1332805</td>
<td align="right">0.1434866</td>
<td align="right">0.1375625</td>
<td align="right">0.1471465</td>
<td align="right">0.242858</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.170248</td>
<td align="right">0.1810130</td>
<td align="right">0.1938263</td>
<td align="right">0.1876185</td>
<td align="right">0.2056520</td>
<td align="right">0.247134</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.385042</td>
<td align="right">1.358136</td>
<td align="right">1.350832</td>
<td align="right">1.363878</td>
<td align="right">1.3976</td>
<td align="right">1.017607</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285625 282.3   10014072 534.9 10014072 534.9
Vcells 21013376 160.4   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.200907</td>
<td align="right">0.2049795</td>
<td align="right">0.2430657</td>
<td align="right">0.2304685</td>
<td align="right">0.2710590</td>
<td align="right">0.381346</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.294714</td>
<td align="right">0.3037645</td>
<td align="right">0.3536334</td>
<td align="right">0.3444330</td>
<td align="right">0.3837955</td>
<td align="right">0.505304</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.466918</td>
<td align="right">1.481926</td>
<td align="right">1.454889</td>
<td align="right">1.494491</td>
<td align="right">1.415911</td>
<td align="right">1.325054</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h3>n = 1000000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285623 282.3   10014072 534.9 10014072 534.9
Vcells 21013000 160.4   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 1000000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.840542</td>
<td align="right">0.879559</td>
<td align="right">0.9531875</td>
<td align="right">0.9141775</td>
<td align="right">0.971534</td>
<td align="right">1.434754</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.094986</td>
<td align="right">1.141694</td>
<td align="right">1.2144403</td>
<td align="right">1.1695140</td>
<td align="right">1.218933</td>
<td align="right">1.886511</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.302714</td>
<td align="right">1.29803</td>
<td align="right">1.274083</td>
<td align="right">1.279307</td>
<td align="right">1.254648</td>
<td align="right">1.314867</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 1000000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285748 282.3   10014072 534.9 10014072 534.9
Vcells 21073453 160.8   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.941601</td>
<td align="right">0.973291</td>
<td align="right">1.318922</td>
<td align="right">1.065950</td>
<td align="right">1.484930</td>
<td align="right">12.968698</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.093633</td>
<td align="right">1.132885</td>
<td align="right">1.358048</td>
<td align="right">1.261791</td>
<td align="right">1.613638</td>
<td align="right">1.696689</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.161461</td>
<td align="right">1.163974</td>
<td align="right">1.029665</td>
<td align="right">1.183725</td>
<td align="right">1.086676</td>
<td align="right">0.1308296</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285814 282.3   10014072 534.9 10014072 534.9
Vcells 21173502 161.6   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.836883</td>
<td align="right">1.983291</td>
<td align="right">2.334697</td>
<td align="right">2.16177</td>
<td align="right">2.678529</td>
<td align="right">3.605998</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.464862</td>
<td align="right">1.627438</td>
<td align="right">2.264823</td>
<td align="right">2.20644</td>
<td align="right">2.405063</td>
<td align="right">10.886105</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.7974716</td>
<td align="right">0.8205744</td>
<td align="right">0.9700717</td>
<td align="right">1.020663</td>
<td align="right">0.8979044</td>
<td align="right">3.018888</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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laeeemry5Ml33nlneXm53+8/dOhQWVlZcXHxmjVrdIxc2XDbtWvX6tWrhwwZcttttz344IMcx506der48eOvvvpqRUXF2LFjUxBT+Bph6YTZizi55J0s6V1kqc2u2seki3fffXfDhg1//vOfLRZLWVnZunXrHn744Q0bNvz+979fsmTJ66+/bjKZCCE7d+48fvy40+l85JFHXn311Ztvvvmdd9758MMPCwoKdAxemZLq6+u3bNkizrwh6tu374QJEwKBwJtvvpna2IxKcVMmw2/QZELxw4umb2H37dvncrnKysoIIefOnautrf3+97+/Zs2aW265ZdasWTfddJO42bhx45xOJyGkrKxMTEnDhg3TNx+R8JT0gx/8QPGMIAgcx5nN5vA/0aNYgd5wwgfaQcZK/ZXscDjKy8srKysJIdKUT26322QynTt3TtpM6o0JBALiYzFD6Uu9e3vPnj0zZswghEycOLF9+/avv/56SoMihLTRtZQeMmFdlvBELJU6vQuuIBU2laUeNWrU+vXr3W53a2vrmDFjtm3bFggEfvjDH+7atevYsWMHDhwQN9u6devly5cDgUB1dfU3v/nNlIWnTT0llZeX33333YcPH/Z6vadOnfrZz36W4rAgDTTfNsjQP+g1rpKSkqlTp5aUlPTu3XvQoEGTJk1atmzZyJEjBw8eXF1dPW3aNK/XSwgZPHjwhAkTCgsLu3bt+qMf/UjvqD+nPi7J5/ONHj163rx59957b/fu3elN5wppTzUZJWWB8sCcmTZCWtmuSivu1aTsJwozZswQGzqiBQs+f7tbb731b3/7/BfXX/va17Zu3SptM3z48OHDh1ONKhrqKam4uHjq1Kn79+//6KOPFi5c2K1btxSHFZGxhlMqSIvfSs8YuuMsSsm9kSpvEDF+3KTwMqrFGjf1htu6deuGDh26devW3Nxck8nE+L02I55p1dVQjViQmDCeOzJKeXn50qVL9Y5ChXotyWaz9ezZ88SJEydOnLjxxhuPHj3aq1ev1AYG6SnpWclAaU4Mlf1qnb7UU9LEiRMdDkePHj3Ef/I8L45xYFNb66+bDXW9KjiXLyKEEMPGHw15x0qsLXF35QJxoltitI5OKTF9/u+0PsVxUJ97+95775X3e6lqbm6uqqoKBAJOp3P27NlWq1X+V11Wu01kwetYJXfRJI0mm+IKTlZZ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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285877 282.3   10014072 534.9 10014072 534.9
Vcells 21373544 163.1   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">2.498542</td>
<td align="right">2.801975</td>
<td align="right">3.806862</td>
<td align="right">3.986315</td>
<td align="right">4.251293</td>
<td align="right">12.90702</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">3.335579</td>
<td align="right">3.785414</td>
<td align="right">4.869589</td>
<td align="right">5.051364</td>
<td align="right">5.205932</td>
<td align="right">13.96770</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.33501</td>
<td align="right">1.350981</td>
<td align="right">1.279161</td>
<td align="right">1.267176</td>
<td align="right">1.224552</td>
<td align="right">1.082178</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYYAAAEECAIAAACjmgRhAAAgAElEQVR4nO3de3wU1d0/8DMzu5vNbq6EhPvliQmGSwlgQgF/WBTlbhSRxlpatFVQUyBQQAVEwJaUF4V6oRZprbZiAEkFIgV9USByMUC0iqJA0QcMCQTIBcgmu8nuZn9/jF332Z3sZXbOzNns5/3ij2TZPefMzJnvnnNy5hzO5XIRAAA28FoXAADgewhJAMAQhCQAYAhCEgAwREcpXavV2tbW5ucNer3e4XDQG1zned7lctFLXxAEQojT6aSUvpgFvfQ5jtPpdHa7nVL6hHL5SdRUIZ7nY2NjKZWBQbRCks1m83+ujUZjc3Ozw+GgVIDY2NiWlhb/YTEcJpOJ4zir1UopfZ7nY2Ji6KWv0+mMRuPNmzcppU8IMZvN9MpPCDEajVarlV5UNRqNdrudXlQNsgoJghBVIQkdNwBgCEISADAEIQkAGIKQBAAMQUgCAIYgJAEAQ6IuJHE2a8yBD4jLRQjRnTopXPhGzdyN+/Zwra2EEKH6ov7kJ2pmvfrKtYutdkJIpd1edKVWzazfqL9e0WwjhDQ62xZfuqJm1gcsTduv3ySEOF2uZy9duemkNSnEF3+9wXD0Q/FnQ0W5cFXVA49cUReSXMbYtu49Y/fs0n/xma7qW2efdDVztw8cbCzdrrvwv4byQ47+P1Az658nJ82prjlmaZ5bVfPTTolqZp2flLD+Wu2BRsusqktTExPUzHqM2XzY0rSl4UZhdc1QkzFBUK/CtyUlE4MhpmyfoaKca7I407qolnVEi7qQRAixZw10GfQxx47Y7plMOE7NrJ3dezoys4z/fLdlfJ7LYFAz654G/dK0zjMuXno6LaW3Xq9m1iaef6VH14LqmjvjzCPNqs764zmyrnvXP1yr03Pcj5NUDcSEkNbckXx9ne7Mly1j7lE568gVjSFJf+oz4mxr+X9jjO+XEmrTuyUJ1Rd1585Yp0yLeb+Ua2lRM+uLrfbfXq0t7tNjzdW6b1spPkfiq9HZ9kRVzas9uh20NB1talYza6fLteBSza9TUxwu19aGG2pmTQgxVJS3dUpxZA2MKdunctaRK+pCEme18teu2sZPsfcf5Oh7i/DteTVz13/1he2+6c4+/9M66g7dmVNqZv1Ww/UNPboON8W+0rPbFnVvzpIbN59OS7kz3vznXt1Lb1rUzPrDpuYxceb85MQ/9Oj6ha1F3bGkes7e2jLmntbcka64eIwlBYmj9FRhQ0OD/4eDkpOTGxsbI/0Zt6amJkrpq/CMW0JCQn19PaX0CSFms5ne+SGEJCcnWyyWSH/GLeApEgQhOTmZUhkYFHWtJABgGUISADAEIQkAGIKQBAAMQUgCAIYgJAEAQxCSAIAhCEkAwBCEJABgCEISADAEIQkAGIKQBAAMofXYbcDnRY1GY2trK73HYnU6ndPppLdVqV6vJ4TQe+aT4zhBEOg9lszzvMFgsNlslNInhOj1eqq76UZ6FdLpdBzHBXOKomprSc12uzUYDFarFSsBtEeFlQD0ej3VJ/VprwQghtRoWAkgqkISOm4AwBCEJABgCEISADAEIQkAGIKQBAAMQUgCAIYgJAEAQxCSAIAhCEkAwBCEJABgCEISADAEIQkAGIKQBAAMQUgCAIYgJAEAQxCSAIAhCEkAwBCEJABgCEISADAEIQkAGIKQBAAMkb9Dicvl+vOf/3z16tWEhIQ5c+ZwHKdgsQAgOslvJX388cdms3nZsmVDhw69cuWKgmUCgKglPyR99dVXTqfz5ZdftlqtXbt2VbBMABC15HfcLBZLU1PTI4888tprr6Wmpg4dOpQQ8uKLL5aWlhJC/vrXv/bp08fPxzmOS0xMlJ17MEwmE73ExY6q0WiklwWhfwgpKSn00ieUzw/HcQkJCfTSVwHHcQFPEb29LdkkfwPuN998c/DgwcOGDSsrK6utrX3wwQcJIdevXxd37zQajTzvrwmWmJhosVjone6YmJjW1lZ6uyeLG5DS242W4ziDwdDS0kIpfUEQ4uLibty4QSl9QkhsbCy980MISUhIaG5uprdhckxMjN1up7dhsniPNDc3+38bz/O0v7yZIr+VlJGR8fXXXw8bNuz8+fMZGRnii0lJSUlJSYSQhoYG/+HG5XK1tbXRC0li+vTqU1tbG8dx9MrP87zL5aKXvtjKo/oNTLX8IqpVSKw/tKtotDWCApI/ljRixIjz588vWbKktrZ21KhRCpYJAKKW/FaSTqd7+umnFSwKAACmSgIAQxCSAIAhCEkAwBCEJABgCEISADAEIQkAGIKQBAAMQUgCAIYgJAEAQ+TP3mZB/NpVhJDGRcu1LgjQIl5iES50NIjgVpK7snrWWgDaUN+oiuxWUlRx3wlaNRZYbpOqdnLEjOLXrmLzPHQAEdxKckPlUEHANmn82lXiv5D+KyD3xfVzlT1TVq0Jg7YSJRHcSkIkkqTJFzjV+5PZC+2n2ah5kzZyRXBIiji0Oz6eDRl3LkrdG42LlkdEu4DS6fUaZfc6FX5OMrp4oZK/0K1/AVeVTE5ObmxsVGqVUt8LHxsb29LSQm9VSZPJxHGcuKpvQL43c8BqyvN8TEyM10Kx7VX99oKF183j+SmdTpeQkFBfXx+o7IG1l4XZbBbPj1Jh0SumJycnWywWu90efJFCYjQa7Xa7WI39h6SAJMsQZBUSBCE5OTmk7CJaR2glqTbiGNKtRbVNEeTB+n6Za/KNrUimTLXRPI8oYMHQSgpJxA9vszOcKXsEV0G+tV/x+8FPi0/le8+xZL46GXl+FQV/hsXXEY9C1RE6bpKNF8U7br63YtuKNZ6tbq9iyOiseZLsuEkm65WF5NnwHcaS13Hz00P0fdHdcVNESFkrwt1xC6kbGPyIITpukrQMSeK3nLJVyrP2ND29QtmxJP9RxjMWSN4/ioQkyWKEmjiRFZL8REMVQpKfAlCKSvJCUvAQkiRp1nFzt7oV7OzQ7jf5ttslZ9xQfQZCw74hm30QFUqlVc80OtEa3tbpdP63lvSk1+tplMG8ZgUhxLbkBWWTtS15wbj6Oa8X9Xq9Z0buN3i+HtJBchwnCELAMyMvcUKIIAgk9DPvdezir7YlL0imwvM8pSsrZh0fH9/c3Kyntg+aIAgul0usxuJ5VvZgeJ4P5hQFfx91DLQ6bo2Njf47TfHx8fZnC4nSIcM3WBCPG0nBvLwyUjzw+dnt1p11OJkKgmAymRobG2WnEJDRaLTZbPTSF0MSva0ZDQaDw+GgN48kJiaG5/mAGwLzPB8fH0+pDAzqCMPbkoLp4ITTDhcHAvgVT4eflCQ/Y0mKUHBeUnsUH0vy4mdekiI85yXRgLEkSR1hXpIkx/Ii3apnCeVpxxhcAFBWhw1JhMJf3ACAto4ckty8JgqhaQPArKgISSJEIgD2RdffFwGAcQhJAMAQhCQAYAhCEgB8z+l0Up2tFpBESGpra9u1a9eSJUsmTZo0YcKEZ599dseOHfhrOkAEWbduXXp6elZW1ooVKwghb7zxxowZMwghx48fHzFihNPpfO211+bOnTt9+vS77rpr9uzZra2tR48ezc/Pz87O3rRpk4Yl9w5Je/fuzcvLO3ny5A9/+MP169e/9NJLI0eOPHXqVF5e3t69ezUpIgCE5MCBA1u3bv34448rKipOnDjx9ttvP/roo9euXXvvvfd+9atfvf766+ITjnv27HnzzTcPHDhgt9tff/11QsgHH3xQWlr6zDPPaFh470kAtbW1O3bs8HwU8NZbb83Ly3M4HFu2bFG3bMCK1FNnxR+uDbpV25JAMMrKyhoaGvLz8wkh1dXVFRUVP/3pTzdt2jR06NCFCxcOHDhQfNukSZPMZjMhJD8///XXXx88ePCoUaPS09O1LLpvSPrZz37m9YrL5eI4TqfT+f4XRJvUU2cRlTyxeUJMJtPs2bMXLVpECHE6neJzrI2NjYIgVFdXu9/mHo1xP10sRihtSQ9v79+/v7CwkBAyderUhISEN998U9VChSL11Fnxn9YFAeUxfnHFgjFYwrFjxxYXFzc2Ntrt9nHjxu3atcvhcPzyl7/cu3fviRMnDh8+LL5t586d165dczgcGzduvPPOO7Uts5t0SJo9e/aUKVPKy8ttNtvZs2d/+9vfqlysIHlWBQZrRsfg2WvTqkXA/sVlqni5ubkzZ87Mzc3NyMgYNmzYtGnTVq9ePWbMmJycnI0bNz7xxBPiojE5OTl5eXmZmZldu3Z9/PHHtS71d6QfKGlpabn77ruXLVt2//33d+/end76D4qj3ZAWa576dyZGcwirvSQ2FRYWih0d0fLl3z1Nddttt3355Zfizz/4wQ927tzpfs/tt99+++23q1lISdIhKTs7e+bMmYcOHfr000+ff/75bt26qVysIIkV1PMLSp0qm3rqbNPwoX7+V9mSyP4G1iSQKXj41wbdGuqx0zhkdyj0Kozni55FRdwMh3RIevvtt4uLixcsWJCUlCQIAu2/tYX5jL5nzdD2i9SrI6lUSSTvTN8bwCsWqN+V8Dp8osSNKhkLRLrDx7zeSeP8u+uV5H9Jdma1akqHZPbs2VoXQZp0SDIajX369Dl16tSpU6duueWW48eP9+3bV4XSKLL3oVhR4io+I8xXi1BJHo7X3SIefjAhLJxMfVMOpmyyeSXeXoDw84qMmhD/8clQP+KVewerfuqQDklTp041mUy9evUSf+V5XpzjQJtS64e466Li1aK9r8Rg3qlsviF9lkaLyTcUKp4FU9ynUfwB4YYS6ZBkMBhKSkpUK4R7ibVwWkleNUbJ8skqjApZSB6mmLXn2fDzZtlCTY32CfHsripysJLDRu5cJA9Hwy5zRyIdkjIzM/fu3Tt27Fhx4jn57x479LiHk8KMSpKvqNm3V/PL02ucxStr/7+Gn7XkTevJbDabjv9b8azdHKNH+G4H4BU7FIkOind1wY92V5V84IEHOnfu7P714sWLkm87efLkgQMH5s9XaXf2IF0bdKu4AXfK56fdL/o2thUZutK8/mlVgGDypVS24JP1fGdIl9urmRmO4LfkVoq8vbAY2ZpJeqpkeXl5XV3dRQ+Sb2tubt6yZYsi2y6pvwqtWFE03DwWVOPekTiky92Yk12fPUDBMiiVVMcm3Urq169fMD21v/3tbw8++OChQ4fcr9TU1DQ0NBBCUlNTdTp/C3uLu7l6vmJ9dpW/MoWI53mvAjQMGSj5Tv/l9JO++OifnMIFl77vIShIPPn00idSl0Bx4oa0IX0kfu0qd03zj+d5QRA4jpNVtO/EFn3/Xet1NoKsQtG226306aivr+/Zs+fIkSPdUWPHjh1e76moqOjSpUvv3r09X9y5c6e4hsnLL7/cs2dPPxnzPG82myXrk2PJd91A3eo/+Cv64WOO0SP8pB8TE/N9mj7vdO9pKa+9KlYUerccx3Hihrf00qe9jSrtkCRu2BtUSFr9B3elIkFfcTEYhdsJ8MjaK1/xEgc8RdG2VJn0brdHjx71esV3pvnSpUuNRqPD4bh48WJ+fv748eM9/zec3W69mriSfbqAs2zEsSR6lzPIrUplw263AYW6222oM3Ijd7fbiB5L8o7QVqs1NjZW8lEX8b/cv4rP4l69enXz5s1e8SiyqD/6CKCNtjZCrRt48+bNadOmtba2JiYmbtu2zTNWhMS7fIWFhStXrrxy5Yrni1euXFm5cuW8efNkFjZEakYHz8kHqmXqVQD34CtQ5a5X0Xm2hbJ9htXPGX6zlP/sExrpv/XWW3ffffeHH344bNiwcB5B824lvfbaa0ePHn300UcvXLggTgKora3t27fv0qVLJZtOaWlpCxYskJ19ewJGJRp/XVZkTkCE5u4uA4mOBqNWZ1urM8xVXxSOlIk/63a/23prfxJr8v+REydO/O53v3M4HJMmTWppacnIyJg8efLKlSvvvvvur7/++vDhw3FxcZcuXUpPT6+qqpo6dWpOTo44fNypUyej0Si7qBJDa7fffvuePXsIIVVVVYQQ/6PUtHl+oXX4W0XzmMhCMVSj/mFqeIa5mzf+z6+WRlegkFRaWvrwww/ff//927Zta2lp8frffv36LV68+I477igqKoqPjy8oKNi+fTshZPfu3SUlJbt375ZdVH8dy549e2obj1TQuGi5Z+VQv0nP5s2v/nlQp/fK5tlWQVuf71fUbvufDFdKasCPzJo1a9euXRMmTPD8s6/771F9+vQhhJjN5r59+5rNZvH11atXv/POO6WlpQkJCbKLGklTHuhVWUZqKiPFUJ+aI3oanmQtr6/JZJ+zyHnHXc6xE5zTHgpmkPvDDz8sKip67733Vq9erdPpxPmGx44da+/97777bkNDw9///vekpKRwSkp3Jlv4Ghct7/CDkV41VTzepqdXqF+MDn+qRe4jVb8DpWFUciUmOe8YG/z7O3fuXFBQYDab8/Ly8vLyfv7zn//jH//o1auX53Q/ty5duuzfv//o0aOjR48mhBQUFDz00EPyyik9L4kQ8vbbb1dUVPz+978vLS194IEHQk03nHlJvjxnlAQ5QChjXpJYQYNMn9K8JPeRNj29IqrmJckY9w11XpJXXp4k88W8JE1Ih6Tnn3++oqLiwoULX3zxxbhx43JyctasWRNSusqGJLfgR7vlTZUMPn2EpIDCnCoZcGaj7JBEgotKCEmakO5Sbt269Z133unRo4cgCO+///62bdtULhYLWJgupGEB3BOmND8JNHj9WQPYIR2SWltb3V8+NptN9kTMiONbTVW+IcVbRSyGbtWz6hdAEgtloEHbP7aCJOmQVFBQMG7cuPPnz69du3b06NFPPvmkysVqjwp1CN+fTMG1iDbSIWnhwoVr1qx5+OGHnU7nX/7yl7lz56pcLM15xb4o/ArVPBao/90QhVeZQdLD2y0tLfv37xdnIhBCdDpdqNsBUBreFgXzSLciKwH4WZMAKwEExNpKAO1p728aGN7WhMY7lMhbS1TzL/AOKWp33fCckOUZnuzPrdaoRFFNyx1Kkj/7biNgZm+G6Jk9yMLGnBpy75GjdUGAmR1KmIUWGYCawt2hJBwNQway31CC6OHZVmpctFz++hpAyEsvvVRaWvrGG29cv379zJkzly9f/slPfpKWlhbwg9IhSdyhxGQKsHxB+FjYBhIIA1s/saOjtosPNlr+crUuhucWdEkdZFJjpuHixYt79+69bt26tWvXNjQ0vPLKKy+88ELAT4W1QwkARIQLLa33/ed/xZ9L6q9fGTooNtBiAKEu4TZt2jTfRJqbm5ubmw0GQ5cuXc6dOxdMUaWLJe5QkpeXN/W/gkkLANj076Zmz1+/sXkvyeZLXMLt3XfflZwc0K9fvxdffLGmpubxxx9fv3791q1bxde9plWfOXMmPf27pZri4+Nra2sD5ivdSlq0aNGiRYsCflgR6DIA0ObVU0s3Siww4mXWrFlLly7duHHj7Nmz3S9KLuFms9kcDsfhw4eLi4sPHTr05JNPuvcH+fbbb7t16yb+3L179/Pnz3uOUEvyDkm5ubklJSUvvvii1+uSC2+DbEpt7gwQjH7GmL+l995c26DnuXldUk1BL+GWkpIyatSoxx57zL2E24QJEyTfP3r0aPHhsz/96U+EkJdeeokQ0qdPnw8++EB8w+XLl/v27RswX++QtHDhwk6dOhUWFgb8JMim4Yi+O+v29v5VIWsEYk1MTU6amhzCeo+hLuEmmUhWVpYYoQghN27cSE0NvMCud0gSZ2kXFxf/8Y9/dL/4yCOPhNpKCrhFAc/zsbGxXg98mI7/W/yh+YfDQsrOl06nC2Z3ZjFHGdnp9XpCiNlsllc8kZ+PixuU09t8OfmzL9t+NCrM8vun1+sl0089dTb860sI4XneaDTS2xBYp9PpdLpwd7v1mz7HcVQvQTgmTpw4ceJE968HDx50/5yTkyP+IG5tbTabN27cKL7iDkAik8kkPpfT0NCQmZkZTL7eIal///6EkMrKygMHDoivOBwOGYvp2mw2/w8HGQwGq9Xq+YybZ9vBdPzfYX6XBvOMmztHGdkp8oybn3xpP+NGCOE//EjMnVL7xc8zbk1NTeF3XQ0Gg81mC/8Zt/Yo+Iyb5BkO/hm3CF0daN26dQMGDHjsscd27NhRU1MzZ86cYD7l/dhtXV0dIeSpp5569dVX3S8mJSWFOidA3mO3Xj2acOprSCFJRl5hhqSAR0ovJPnpNtIOSe1lLS9fpR67bQ+NkEQ8DhaP3Ury7hekpKSkpKRs27YtxYNqc5Q8q6aaIw5RNboRVQfLIMwN9o+5TZM8b5jUU2fFf/TyEv9RSt9/1upn6id3dc5De1lQvcoswNdA8FjcNEny+nW8v9e4H6bxHNBR7eg8HzAkKj5j6D5Y32eJwulHs8/zeGmfbUa6YPK0u2lSmBRZwi2coQcZS7iFFPWUXcLNd2hJnSXchEPlnpl6FSbM2yaYJdy8wlBIUSmCxpI8+dZq/0cqYywpojHXcfMkXir1+1aadyJST51N+fx0XMVntDNyn1j/LVN1+DaaNL8QoD6mQxJp555RoaaqfDP4GWRRIWuVz61v7pp002iPVII8rIckSZRqsFeyKlfZ9u5MlW8b35OgWtZRwusMd7xRszBFUkhS4RtVMn0NI4LmZVDthvFsDvvvTnYA4jE2DR+qyCz2DobFv7gxSM2/94lZiMPbnsNJai68qfnECHXOs+cp7Xh/0o1QCEkSvB6z8IQFeTuSgIP69dkDVCwOEIKQ5IeGg75eZcBKJhA9ImksSUPajm5o9TepqNLhB7AiBVpJwUJN7fBwiVmAkATgTYxN4uxtrcsSddBxAwCGICQBAEMQkgCAIQhJAMAQhCQAYAhCEgAwBCEJABgif15Sc3NzUVGRw+Ewm82LFy+mt50WAEQP+a2kgwcPDhkypKio6JZbbjl06JCCZQKAqCW/lZSZmZmSkkIIiYuLE7d+JYQcO3bs7NmzhJAJEybExcX5+bi4+Ib7g4rT6/UcR2tlcfLf3W7p7fnHcZxOR3FuPc/zHMdR3bNQp9NRTZ/juJiYGHpnSa/XC4IQ0vLtIRF3uw14ijiOo1QANsm/nP369SOEVFRUfPTRR88995z44vXr16urqwkhbW1tAXd/EwSB3unmeT6YDbhlE0tOb4c7juPEQ6CXPqFZfvLfPcSppk9vg3J3+lSrKO1TFInCakds3769qqpq1qxZvvuaK7JDSThk7FASEmV3KPGlzg4l9fX1lNInwe1QEo4I3aHEjd5utxFNfiupvLzcYrHMnz9fwdIAQJSTH5JOnjx5+vTpZ555hhAyefLk0aNHK1cqAIhS8kPSE088oWA5AAAIpkoCAFMQkgCAIQhJAMAQhCQAYAhCEgAwBCEJABiCkAQADEFIAgCGICQBAEMQkgCAIQhJAMAQhCQAYAhCEgAwBCEJABiCkAQADEFIAgCGICQBAEMQkgCAIQhJAMAQhCQAYAhCEgAwhNYW1QH3RDQaja2trVR3N3Y6nbQ34Ka3r6G4Dyq9rTd5njcYDDabjVL6hBC9Xk/v/JDIr0LiBtzBnCKq+5izhtZ+6jabzf82oQaDwWq1Yrfb9qiw261er6e6Gy3t3W7FkBoNu91GVUhCxw0AGIKQBAAMQUgCAIYgJAEAQxCSAIAhCEkAwBCEJABgCEISADAEIQkAGIKQBAAMQUgCAIYgJAEAQxCSAIAhCEkAwBCEJABgCEISADAEIQkAGIKQBAAMQUgCAIYgJAEAQxCSAIAh8ncocTgcL7/8ssVi6d279yOPPKJckQAgeslvJR07dqx79+7Lly+/fPlyVVWVgmUCgKglPySdO3cuPT2dEJKenn7u3DnligQA0Ut+x625ublz586EkJSUFIvFIr64devWQ4cOEUKWLl2alpbm5+M8z8fFxdHbSlTczZVS4oQQQRAIITodrb05CeVD4DiO47jExERK6RNCBEGgfX7MZjPVKhQTE0MpcTF9juMCniJ6B8gm+TXGZDLV1dWlp6fX1dW5o09WVpZ4F+l0upaWFj8fFwSB6u7Jer3e4XDQu5wGg4HjOP/HGA6xstLbypXneXFDYErpE0JiYmKopi8IAtXdaPV6vdPppFdFg6xCHMdR/XJljfyQlJmZeeHChdzc3MrKylGjRokvDhkyZMiQIYSQhoYG//vNx8bGtra20tuAW7zY9OqT+BXn/xjDTJ8QQi99nU5nNBrppU8IEQSBavpiFaIXtQkhVENekFVIEASz2UypDAySP5Y0YsSI6urqtWvXpqWl9erVS8EyAUDUkt9K0ul0hYWFChYFAABTJQGAIQhJAMAQhCQAYAhCEgAwBCEJABhCa3KtOK3Gj5qampiYGHEONCWCIHAcRylxi8Xicrloz66md36cTuelS5doT3ihen1pVyGO4wJW43A0Nja6XK6AE8SploFBnFbT1e+7776ioqIBAwZoknv4Xn31VbvdPm/ePK0LItO5c+fmzZu3Z88erQsi3/Tp05ctW5adna11QWTatGnTjRs3Fi1apHVB2BJdARgAGEfxqUj/xo8fn5ycrFXu4RswYAC9Rw1UkJiYOHHiRK1LEZZ77rknJSVF61LI179/f6vVqnUpmKNZxw0AwBc6bgDAEA06bpG7Qm5zc3NRUZHD4TCbzYsXL7558+avf/1rcWGW+fPnd+/eXesCBlBbW+tZ4LS0tIi7ECUlJcePHyeEWCyW4cOH33vvvZF1CX7zm98sXLjQaDR63QWRe1Moz6W6w4cPb9myxeVyrV69+uLFi+oXQLbdu3eXlJS4XK7i4uJ9+/Z99dVXW7du1bpQIfAqcOReCJfLtWHDhsuXL0fQJWhsbFy4cOG9995rtVpdPic/oq+FsjTouEXuCrmZmZljxowhhMTFxen1+itXrly6dGnDhg1lZWUalyw4XgWO3AtRWVkZGxvbtWvXCLoEcXFxa9asGTx4sPir18mP3GuhOA1CkuQKuRGhX79+KSkpFc/zSeIAAAPJSURBVBUVH330UW5urslkGjRo0EMPPbR///7PP/9c69IF5lXgyL0QJSUl06dPJz5HpHW5AhDXbBN/9jr5kXstFKfBWJLkCrmRYvv27VVVVcuWLTOZTMOHDxdfvOuuu/7zn/+4vwCZ5VXgCL0QTU1NVqs1Pj6e+BwR+5fAzevkR+i1oEGDVpK4Qi4hpLKyMiMjQ/0CyFZeXm6xWObPny8+h7Fly5aTJ08SQiorK7t166Z16QLzKnCEXohPPvnEHXoi7hK4eZ38CL0WNGgwL8nhcGzYsMFut6elpc2cOVPl3MOxcePG06dPx8bGEkImT56clZW1fv16nU6XkpIyd+5c9p9FunbtmmeB29raIvFCrFu37sc//rG4trLXEbF/CZ577rmlS5eKf3HzPPmRe1MoDlMlAYAhrH+rAEBUQUgCAIYgJAEAQxCSAIAhCEkAwBCEpI5g27Ztubm5dXV1/fv3l/Fx9wfFdJQuHUAINFvCDRQ0adKkESNGBHyb0+m8ceNGp06dwkwHgB60kjqCzz//fOHChU899VRlZWVBQQEhZN26denp6VlZWStWrCCEHD16ND8/Pzs7e9OmTS6Xa86cOT169Bg4cGBhYaHL5XJ/UEyHELJixQpxSvGqVavEj8+YMWPx4sUPPPBAfn5+U1OTpocLHZq2CxGAIo4cOfLggw/W1tZmZWW5XK79+/fn5OTU1dXdvHlz4sSJmzdvPnLkSGJi4jfffONyub744ovx48e3tra2trZmZmaeOXPG/UExnX/+858jRoxoampqamoaPnz4+++/f+TIkdjY2Pr6epfLlZeXt3PnTm2PFzowdNw6oLKysoaGhvz8fEJIdXV1RUVF3759R40aJS5/MWjQoLfeemvfvn0nTpyoqamx2Wy+H585c6bJZCKEzJgxo6ysbMqUKSNHjhTXSk9PT/f9CIBSEJI6IJPJNHv2bHE3HqfT6XK5jh8/7t6yrby8/LHHHvvFL34xefLkgwcP+n7c5XK519DgOE7c9cDPCBSAgjCW1KE4HA5CyNixY4uLixsbG+12+7hx43bt2uX5nn/961/i+rBdunQ5ffq03W53f1D0ox/9aPPmzTabzWq1bt68WVy1DkAdCEkdR1JSUlJS0qOPPpqbmztz5szc3NyMjIxhw4ZNmzbN820PP/zwp59+etttty1YsKCgoGDFihXuD4pvmDJlypgxY7Kzs7OzsydMmDBp0iTPj/M8r9OhcQ20YCUAAGAIWkkAwBCEJABgCEISADAEIQkAGIKQBAAMQUgCAIYgJAEAQ/4/gXyL8zjYliUAAAAASUVORK5CYII=" alt=""/></p>

<h3>n = 10000000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5285875 282.3   10014072 534.9 10014072 534.9
Vcells 21373168 163.1   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 10000000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">9.468093</td>
<td align="right">9.690777</td>
<td align="right">10.09193</td>
<td align="right">9.815535</td>
<td align="right">9.972428</td>
<td align="right">16.23264</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">11.913958</td>
<td align="right">12.179799</td>
<td align="right">12.45315</td>
<td align="right">12.343016</td>
<td align="right">12.478671</td>
<td align="right">15.74856</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.258327</td>
<td align="right">1.256844</td>
<td align="right">1.23397</td>
<td align="right">1.257498</td>
<td align="right">1.251317</td>
<td align="right">0.9701783</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 10000000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYYAAAEECAMAAAAbJmMEAAAC3FBMVEUAv8QICAgJCQkKCgoMDAwNDQ0PDw8PwccREREUFBQVFRUaGhobGxscHBweHh4fHx8gICAhISEjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKysvLy8wMDAyMjI0NDQ2NjY3Nzc4ODg7Ozs7ys48PDw8ys49PT0+Pj5AQEBBQUFCQkJDQ0NERERFzdFGRkZHR0dISEhJSUlKz9JLS0tMTExNTU1Nz9NOTk5PT09QUFBRUVFTU1NUVFRU0dRVVVVWVlZZWVlbW1tcXFxdXV1eXl5fX19gYGBhYWFjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29v1NdwcHBycnJzc3N0dHR1dXV11dd2dnZ3d3d4eHh5eXl7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSWlpaXl5eYmJidnZ2enp6fn5+goKCg4OKh4eKioqKjo6OkpKSlpaWmpqanp6eoqKiqqqqq3+Grq6usrKytra2urq6vr6+v4OKwsLCxsbGx5eaysrKzs7O0tLS1tbW2tra4uLi44eK55ue6urq7u7u8vLy84uK9vb2+vr6/v7/AwMDBwcHCwsLDw8PExMTF5OXGxsbG6OnIyMjJycnKysrK5ebLy8vMzMzM6uvNzc3Pz8/Q0NDQ5ubR0dHR5ufS6+zT09PU1NTV5+fW1tbX19fY2NjZ2dnc3Nzd3d3f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojo8PDp6enp8PDq6urr6+vs7Ozt7e3u7u7v7+/w8PDx8fHy6Ojy6ejy8PDy8vLz19Xz3dvz4+Lz6unz8/P0wr/0ycb09PT1sq31tK/1ubX19fX2l5H29vb39/f4dm34+Pj5+fn6+vr7+/v8/Pz9/f3+/v7///8dgW7qAAAN4UlEQVR4nO3dj58UZR0H8C3LstIUlEOlUxMx6FIvIkUuSbOsNCkjbE2Qkx+SUhd6Gch5YHbK0YEloWBJASUbeif9IEtTExHwR8bAeZbbj6urrt29/XH3/APNPrM7+zzzPDM7s8/Oztz5+b7E25l59jPPPO+dmd2dvb0IQYWgIkF3AJUvMISiwBCKAkMoygVDYsCsIea2tJJllo+FALZBonYMvZpZmbjmXIkyy9PKAf2KAUPKAQPMRC8YKgsAgwYGMBQKDBoYwFAoMGhgCDfDVx7XfvsldwFg8I/h9+d8/+zH3QWAwceD0k/e8V2XAWDwj+E3Z//wnJ+7CwCDfwyRSATnhsAZdIWI2wAwgIEGjEGGVCqV/2EqgCEohpS3ADD4tzd4CAAD3sygAWFgEB6+3rYBDGCgBQbNhqH0dBUMXC1LEu3yaPTFmjHgCatY/dEZSfJ0Z3HS91M0GOR7w/DCJNl528qdNWLQcFCSH5Sak6T7Ya35CULWXHbZgaxZI7mscw2XWa4eUK5BbQPSfjPotaOLkOe7u7U+s7KDfc41VGa5ckAmEXRAOslMxP1muHcvWRujE3j5xgfU9KB0eEFz6zAYJAFheN2guA1gqBKD8wsHMNSOwcEBDLVjUNiG8DDYPpxGB4MGBmYCp+gKA8CghYmh8gAwgIEWGMBgBIAhzxBxfuEAhlow5C/QgIGZAEOFAWOFQWkbwFANBpyiwWAEgAEMNCAsDA7naDDUjMHpqRIYRiOD+MQLDG4ZqnhQAoMCg8I2iAz4bZ8wMFiPcGDwxFDhpSvhFB0Yg+2BdTQx2J2mpdvANE0LjpaksgzOH+x3zZAaExdBCxvh8BuEKa7MGYKjRwYmUF4JpqVsOctQasDcHE0MWmlorYNQ2D5nBmYQ+F+NdsvADaHU0cZLZ8jP5ReyE2FlSJRqOJ3gKt97bkY2Udj6RMpSwoxU4c5GQv69WyOgmGs24ConLLG0y/LzhYRcpngPIcOYzibsymigBzBVOwanZ0riQcl8EDKPW/PBJjoU71h8C53uTrLHfKHSwjHF0jBh3uRyzLnG3pBi9wSmX5pwXC3dLuz7oTooMT1lp4qjWFyUKh2PLAyWwTAU8gHMQuZu9gyl24w+P5RcUn+pP+xx1Y6BtwwxAzfA/DIBKxU358vaW1LsGYpr5vcIUde6P5jLUuwya1vJXstUWBlS4hbZlcNbe5YBYx1kDBy8MFRsrNlAK+4NkgShCyU2YTVMp0PCIOy4DgR0FB1ehksizNEoBQijaBnAhPyVmZk0ZA2Q9EAGXJoI4d7A7cla9d/oFmjZV9EivD5l14NiW/7NDOvdU/Qcz8YKpmE8N1iHqurXG8oxlA3gWqfG2ntK1g10uQ3eL/s4MLgLYILEvcFLQKFCy+BhGyq4+sY/4FXe2gNDsXARNLQM3CU4MATIgO/MCAWDhwAw+PdFPh4CwIBTNA0AAxhogQEMRgAYwEADwAAGWmAAgxEABjDQADCAgRYYwGAEgMENQ5lfXweDF4ZlSZK9deka7wzlvkUADO4Z6DfW71pHbjlox0BHW/bNDT4yRApVZh2JUnNpS51B7fsmavuN9e3dpHMHIa8dOnSk16zsAP0RKVUvX8U5dJG4uDczYJ1jqaTtkkjEfrWSALuG6UHJXHaOfQ+KAcxEn58M+S+HXrWPbNtMSOvUqc+PmEWMH8x4jFgqPytSajBitjIWkJFIsZ31nmKSNTjisF5JP+TtyIg4100gE8BU1m+G9h66NxDZQYkZDusezS4q/DOPYBF+wv6QwN5Rs67RsmprVkLWnD2miCvnmyW4uXyzyg5KuaNuGYbvv6Hx/AX3DZcYdq0nLQdsGJhO2TIYbYobw42JXNCItIwiN1L5G/QUzS4UGmqW1fGNtYj1DtYHFc8Q4btj/OfEsOKkCYtJ+6XksTNzbdc0Tb0yHZt92nKXDFunL73/mWc33TR9q8mQbW1ZSxwYxDHkN760meYQ6//SEXNvkEVYxcSRNp4pCQsLPeAFuTCe11y9xSpidthca0QsB4bt9UfjjR3kvM31T5G2cQPkijtix+4rq1BguDtjTGXvljRxwSAOnA2W4zMlYWMlj3fzCWtpYFkN+2HmkqxHO34vkh4C2QUODDeOa2iYOJfsf+fNhLRdQ8hDl8Qayytw54YReZMKGGzLgcEyiNbTQjGgn7uLdYRl3TDTZD3k50giigBGhjVAYFjeop8LsuTJ4+boDJ8n5MFZsSYPDD+eS2a+bY06g+0oF0bRlqH4oCxss3WBGSAylG6abeXdoEsdX77JJK3b5HyK7pkUz0zbkD1jT/0jpO09h7MfWeWJYdy23Re8OF6BwbhR+XtKhQ0XAxwY2OcJRQ2HHpRn0IweOD6cyjxTap1wQpQsvZ784tRk20VnnfiZtCeG48nCNvLeShnYbXAs54OSPIAbk9H0ZkZbswsAnmH65Se+tuisIBlcBoxthr479pKlz4Mh4PeUhrZ0dHR0SpuAgQ/wk6Fx1rx5864FQ8AMF9k3AQMf4CdDdGs6l8uBIWiGtxyvFxhUGeJCeWJ4/6BtEzDwAX4yXDEEBpcBfjJcdNyMmTNngiFghhgtMATKYH5XmexLy8DAB7hieMOZ4fWGc2ewY20wXLnklfyPV5Z8FgxVYfh3KvVPJ4ZVXyOL7xQYSKxx4pQpExulRyUw8AEuGP6a/56UvzAM3RfPWP3NB8mS2NpPz71k/qUbHjtEbr9HZNDr4EGpGxisAS4Y/pVn+BvDsLAr22EwfJ1Mee7VJkIemPK6lMG2wMAHuGD4s67wvzcYhhcu++B6naE5traTXJAbmElu/sRr7N3A4DnAzbnh7//57z/Yc8PdBxOTVn2HNBQZNkb5u4HBc0AlT1i3XvjxRQc+MPOKPQbDVXNOnzx5nYyhY252IxjcBPj58m1R48TctOvBEDDDKf0NJBPoRwJcBoxthhN7G0i8DgwBM3yjflzL6bdLmzh8Y71Q9l/3Xvi++OADMmUaeAuoMgPZfuPyPfIm2Bv4AD/3Bnwyw3WAnwz4ZIbrAF8v+9g3AQMf4CcDPpnhOsBXBnwyw20APpkxahh+8NGPPVoJAz6Z4TrABcPv8r9K8SeGwXrZx44Bn8xwHeCC4a48w6MMg3jZR86AT2a4DnDB8Ms8wx8ZBuGyj5Shfn8TLTBU6dzw7Q99+EfsucF62UfO0BnH3uA6oBqXfeQMhMzJ/++TYAj0CWtd3TF1dXXj68EQKMORI7OP6IVX0W4C/Hz55lBg4APAAAZaYBgl3zxZZjkYwEALDBoYwFAoMGhgAEOhwKCBAQyFAoMGBs8M2uXR6ItgkATUlOFp85OUYOADasqw87aVO/Ufv9648ZV+s3LJfufKlFmuHJAdClXAgN8M3Q9rzU8Q8r358w8NmTWcGXKuXJnl6gHZoANyXIDfDHrt6KI/cFDiA2p6ULp3L1kbA4MkoKYMhxc0tw6DQRKA1w1goAUGMBgBYAADDQADGGiBAQxGABjAQAPAAAZaYACDEQAGMNAAMICBFhjAYASAAQw0AAxgoAUGMBgBYAADDQADGGiBAQxGABjAQAPAAAZaYAiOId5nVnawz7mGyixXDsgkgg5IJ5kJd9+IAYbqBwTFgIMSH4BzAxhogQEMRgAYwEADwAAGWmAAgxEABjDQADCAgRYYwGAEgAEMNAAMYKAFBjAYAWAAAw0AAxhogQEMRgAYwEADwAAGWmAAgxEABjDQADC8+Riyty5dAwZZQE0Zdq0jtxwEgySgpgzt3aRzBxgkATVlWLWPbNtMyLqrrz6UMWskl3Gu4TLLlQOGwxWQ9puhvYfuDfjDAY4Bvv/hgF3rScsBegsHJT6gts+UWlvWEjBIAvC6AQy0wAAGIwAMYKABYAADLTAEx9DXa9ZLWq9zJcosf/mwakDgPXjpVWair3YMTF21XXF112xVDPjyJsWAG7oUAxbdoxggKzB4rRAwdDyjuLrOpxQDuvYqBtz3K8WATd2KAbLyxoDyqcAQivLCULouWlENNi9Yli79GWrvRe+r0omuaPRz7Qo9WJY0xkBxICTlhaF0XbSienADuXdb6c9Qey96X8VOrHq54h70R2ckjdUr9kFSXhhK10Urqj8cIZt/Wvgz1BUVva9aJ164k1Teg+GFSWP1igMhKS8MheuilVfPgsHCn6GuqOh91Tpxa5wo9KA5aYyB8kAI5Wlv6FF7EKy/jV4z3KHwzH1Hl1InBr5KVHqgM9DVqw6EWJ7ODeZ10Ypqdzth/wy196L3VerEzzYr9UBnoKtXHAhJeXqmZF4XrahWf3H+/EdKf4bae9H7KnVixQH2D2F7Lp2Brl5xICSF1w2hKDCEosAQigJDKAoMoSgwhKLCzdBZf6ROmKnP6qwPoDN+VrgZ4vsZhtxR46c+K74/mP74VuFmiDXNPmYOWXHShMUkNvu05SNfePepc0f0WbEmsnjc+KUkdul1F8+u1qeqg6ywM+gP/e31R+ONHbFj95Enz89kTn5WnxVr2nLW4OAZD8Xe2ksuvD/oXlahRgHDjeMaGibOjTXq04e3LH77Xspw3WpCvrUgNo2QeQpXMEJTo4BheYt+XsjqxyGy+9QVPecaDNE2QlZel58JBt9LZxhPeibFM9M25Ef8pvnkhXft0WfFmh6YnEycuQUMNalYU67+U6R1wglRkh/x585736wl0/VZ+kTzKScvpjOv3RB0L6tQ4WZ40xQYQlFgCEWBIRQFhlAUGEJRYAhFgSEU9X8BEmvvpw0Q3QAAAABJRU5ErkJggg==" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5286000 282.4   10014072 534.9 10014072 534.9
Vcells 21973621 167.7   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">11.57273</td>
<td align="right">15.95823</td>
<td align="right">20.20550</td>
<td align="right">16.33830</td>
<td align="right">16.74091</td>
<td align="right">371.38775</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">12.36590</td>
<td align="right">16.86605</td>
<td align="right">17.60888</td>
<td align="right">17.45341</td>
<td align="right">18.03776</td>
<td align="right">25.32309</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.068539</td>
<td align="right">1.056887</td>
<td align="right">0.8714894</td>
<td align="right">1.068252</td>
<td align="right">1.077466</td>
<td align="right">0.068185</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5286066 282.4   10014072 534.9 10014072 534.9
Vcells 22975010 175.3   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">24.24469</td>
<td align="right">25.12204</td>
<td align="right">28.08517</td>
<td align="right">26.06423</td>
<td align="right">27.20822</td>
<td align="right">42.71805</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">26.42340</td>
<td align="right">27.71908</td>
<td align="right">32.14471</td>
<td align="right">29.45709</td>
<td align="right">30.90727</td>
<td align="right">54.88753</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.089864</td>
<td align="right">1.103377</td>
<td align="right">1.144544</td>
<td align="right">1.130173</td>
<td align="right">1.135954</td>
<td align="right">1.284879</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  5286123 282.4   10014072 534.9 10014072 534.9
Vcells 24975042 190.6   47156013 359.8 90959857 694.0
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">34.26886</td>
<td align="right">38.35344</td>
<td align="right">43.67921</td>
<td align="right">46.08772</td>
<td align="right">48.48639</td>
<td align="right">55.77299</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">46.05692</td>
<td align="right">46.85997</td>
<td align="right">54.80666</td>
<td align="right">51.45627</td>
<td align="right">54.98157</td>
<td align="right">411.68036</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.343988</td>
<td align="right">1.221793</td>
<td align="right">1.254754</td>
<td align="right">1.116486</td>
<td align="right">1.133959</td>
<td align="right">7.381357</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYYAAAEECAMAAAAbJmMEAAAC3FBMVEUAv8QICAgJCQkKCgoMDAwNDQ0PDw8REREUFBQVFRUaGhobGxscHBweHh4fHx8gICAhISEjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKysvLy8wMDAyMjIzMzM0NDQ2NjY3Nzc4ODg7Ozs8PDw9PT0+Pj5AQEBBQUFCQkJDQ0NERERFRUVFzdFGRkZHR0dISEhJSUlKz9JLS0tMTExNTU1Nz9NOTk5PT09QUFBRUVFTU1NUVFRU0dRVVVVWVlZXV1dZWVlbW1tcXFxdXV1eXl5fX19gYGBhYWFjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBycnJ0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmbm5udnZ2enp6fn5+goKCg4OKhoaGh4eKioqKjo6OkpKSlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+wsLCxsbGx5eaysrKzs7O0tLS1tbW2tra3t7e4uLi5ubm55ue6urq7u7u8vLy9vb2+vr6/v7/AwMDBwcHCwsLDw8PExMTFxcXGxsbG6OnHx8fIyMjJycnKysrLy8vMzMzM6uvNzc3Ozs7Pz8/Q0NDR0dHS6+zT09PU1NTW1tbX19fY2NjZ2dnc3Nzd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojo8PDp6enp8PDq6urr6+vs7Ozt7e3u7u7v7+/w8PDx8fHy6Ojy6ejy8PDy8vLz19Xz3dvz4+Lz6unz8/P0wr/0ycb09PT1sq31tK/1ubX19fX2l5H29vb39/f4dm34+Pj5+fn6+vr7+/v8/Pz9/f3+/v7///9CXmzMAAAQt0lEQVR4nO2dj58WRR3Hn7IfVpqCcqDmqYlFV+pFhOglJVmkhqSCpyC/wRAlfibBlUBll6JwZqEQpamFT5ocpWFG/kh+aFwXD9yP8unHU0/1tM/v5+Yf6NnZmd2Z3dnZ59l5bp897vt5vbjnmf3Od2Z23js/dneYJ4JAIVCk3gUA6QIMoRBgCIUAQygkwpCaP2f1QGHl4k1GUEuayielSmlyey4lt6fl5qxH8h7u6aySu5ZjAwFg2NWBVr3y9P3ojsM42BOjOoZiUvXG5fZir9yuyc3ZhJJ7Mq3k3ldgAj0BYHh+dc+c7o170JYnAYOlwDH03zh7QX7da+jx7QhtmDjxQNEUKkpVKsntyMM+4GFWcy95JV+Fez4ADN/Yizoe29iJW8OR/ftjvVR9qFeqeEpuL8Xl9qzcnPdI3sM9nVNyTxSZQH8AGNZ3oq07n34QLT+Eg9ApYQXeKXXPmb80W1i9fDMCDJYCx2ATYMACDESAwRBgoAIMvt0BAxFgAAyAgQowAAbAQAUYAANgoAIMgAEwUAEGwAAYqAADYAAMVIABMAAGKsAAGAADFWAADEMdg2YqzXwXKZuT2weycntBbi7mldzzHnYPc7bEhoLHAK0Bq96tATBgAQYiwGAIMFABBt/ugIEIMAAGwEAFGAADYKACDIABMFABBsAAGKgAA2AADFSAATAABirAABgAAxVgAAyAgQowVINh4Ou3r2X22gMMWIFj6GxHu4/AXns2BY5h87fW/giRvfbS/f3Hj1EdR8ek6kvI7aU+uT0tN+eSSu4pD7uHub/ABHoDwLDuru4lL5C99pade+5rNc7yRFCxxumJMGx6Hj21ley1h6BTIgq8U3r6AbRx9/Dday+TyYjMgWMo3Hnb8uLw3WsvLBhsAgxYgIHIhsFRW0oYrMofahgc5WUwUBsXxQ0DjWyvR1v6JoaM7pAhXlYpOHdnZbIYMhmb3RYWoAgjBlxMXBlsSZ0Y+LOTYMCxNPFhKoyBZMxhILF09wzjbPvmwGDnYDfzEcKMgS9qZRicF1oVGBgCZnuz3BmPajHEMprdfAJgoJels1NynL8Vy4mBC5sYHNGqxuDslfjcmdZGFVoMjpqqaIjORMoS2ysYokXjJ9OYXMz4c6jdvlWAQSwHBludGJ2SEgahXEZ4mxQxcITDjUE27MXMIbpmGGzpDyqGTNgwCGfVgqI6+2ev+wbGnflmBkUY2PyGFQZJ9+veGswJrmii5BbfOn2jDrIJwWSfOWLNG4Sp6xgEMyRB7sJDnDUUGBwFJkfch2g6A3ROQMRnbcWSYbBdo2ZUcQ4WBnEBXCZh9HvIhmgXDPqHNwbxfJVKc7v5ypBOqUYY3MsoORQyDJKalE1YGQyucTyHaFFFMe5Gp+eWBR0b3PLXhL2t+TV0GFy7d+l9Q9lpaDxhdVH4MLjpxHjQ7SLAQBQ4BvaBTCYzRDE4b9IGDYMxGtQSAxntyVfHBG/oYBA8swgeA1uCajFkAINQ1WPgiuC3NVivOCwBBpH0OhI9qYpEmFJUjYEXDNFE0iFa+NzWPwan6o3B2mAujfSzkmxH52OvPTY9pb32xCVjCnwC7bXncs3Rz7h5CQoj0NZAWnwkYl2t+ENj4ztzYluDqBz2y5kkQ4Oi1kCsXO4uqndr8MLA1GSEr1tbBBuGiBsGfEyQE8FAs3FUlK0e3UrBoOGKrjmdMnSsjoQLg+PU7efC1a29AsQYrLrFSysyHhhM2o6CVIqBLbAUg/moUD8Ydgwx61ziosbg1ilx8RgMGXq92/Px0RoifJD/xl0FMTGGTFgxuD8g1WdKouoxJZwpMbNz/E7fLQVXgz0hU7bLwRobuF7UlEZsfIr4X+gwOB5y6yVkbzdlNcRgYN8nRKiz3g4yTIL4OP1TNsgekleAAVcqH4F9WTeEhmjrvQn9o5+rDEPGsNN30VbUCK08o7IyEdL6SXxSUZiN8aIiYk+fK4roHSiloLtiDIzRcspEIqa7pL1Vj6F4vFoMpYdva75k9kMlTwyUAy48rTjyKcKQoVc36WTJsMD0PREWg8HBhIXTNDBbMDkKGdtiVuZZkBUxQotsmUwnsyh0DLCLHvPAsOL0UQvRxqvQc+cX225s+fB1uejks5ZViWHn+MUP/+7l7y8Zv9MTA33UZV61pBL10oruojkMtOFww7jZUztqkMGgx8+KFgQQDHoSmnmQr05S1ckMk4OZk1kUCYaIN4YnGo/Hm9vRxdsbf4vaRiTR1PXRd1Xxv9UMDPfmjVDh3gowmLXL9NXuGGJM14+bDHfu/Plqzus9YrQnA4NjgYy5eoadaBFobDLYP5lmWqzV7ZlFUWoN80c0NY2egQ68eylCbTcitOvKaHPlFLixYUAcxWXCypcYd7DyZ0pul5slTfR61eoDJc+UrIk/KYw9H4whxo/+1MLkLpoCELscw7Ll5bGggF46eXoZw5cQevSKaIsPDD+ZgSa9Y1M1GASq36M9szWYYUcMOmF1Xxciz12OofOceH7ctsJ5ext3o7b3HS18Yp0vDCMef+bSN0cOWQyVuA/uE9bVo05tRYtvRb8ck2677ILTrsn5wnAKmtuG3g8Y3FX5hLVtXhUAeAzjrz6td8EFgMFdgWDoW78PLX4dMGAJnyIHched3dHe3r4FMOji72nMx09BYGi+YubMmTcDBl11xHCZe5ThiCFm/x5Qp9S6M1csivdFGXYYxAoGw9tOKQswuEuOIe6QLwwfTLlGAQxYgWCYmmWP7luFhvVee8a7cN4cCIbLTp4wadIkEkjNWolOkL32mLqs5r5B8Ag4EAxRLBJYv3cl3Wvv9T17Yn1U/ahPqkRKbi8l5Pas3JzXqnbXb7uo0rlK3SkGzpwsMgFHJdcEg7kIDX/p7Oheichee5umTDlUMIUKUhWLcvuAh73k4e5hF5jxfJ+aSw6bm7tusVkLxQEmkHPD8JYcQ3/TRRNEK/4MDNct6tI/uhZdq3/MWbJg6q6A9toTrI1wldkpuayQES2sZzoXe6dkT6EWQ/S/M5l/yjCsuxMtvMcVA4o2jx47dnQz7ZXKrcH3XntWv+qoKDsGEtGsD81u5aNTDNhL8PpOWI9CDDRb7m65Bhj+qr+j+guDYc/lEzaseRQtim7+wowrZ1217bk30NrvumMo6/Bh62gZg/dee8x9PvnUMURsYquTw2DFMLlpMSZBZz3rGCIxLm0uNc0W5hcjRSJpN5uRmhYTtrFqMPxLx/A3BsPcrYV2A8NdaOyr3S0IPTK2X4rBVQIM7OXIYbBD4K9bIYaYEIOjng0MNsIx7mLQ+KvbXPphpWqzCTG4cagEw5/LFP73FoPh4JSPPFjGMC+6eQu6tJichJZ+VriTri8MzFXOnRPBwNSxFwa+XmwY7BVhYnBZCKmJqprNzmHjUNYAQ/zv//nvP9ix4d7D2jnrvoOaKIaOVnEdK2Ewz8A4GsMYrNOmVnGnxA0dxnfuBkqGgfFl4jEYYiIMaYcHl71mLxQvX/cNOyd+ZsGhD02autfA8MXpZ1944f0yDO0zCh2VYhDXgrGG1e0sdA3K7ZuVoyapxNjQeJixoHl0cdytlWIQ1kIo76IZDQUMZyaaUB6WBEgUCIbTeppQvAEwuCsQDF9pHLH87LWAwV2BYEBPzF+2VxwFMGAFgqHClRnSqQhgUMZQ2coMyd2NLsCgiqGylRmAgWiwMFS2MkNOATCoY4CVGYFhWDPu4IsPrOkWYYCVGTXB8INPfupZbwy70E25Lm69sXhlBmBwqhIMv9EHzz8xGOyvfQiG1DUIfVqEgVuZARgEqgTDN3UMzzIYnK99pukYnr8DoWtiAgzcygzAIFAlGH6lY/gjg8H+2mf3tDHTvrdm10ObEFrQ6cDQeKAFCzC4q6Kx4dsf+/iP2bHB/tqHaQ3XHnVg2BKH1jAoMyX7ax+CQR8bJrPutFOarv/5HGBwVw0nrLvQDfnuuU4MDQ0nNTQ0jGwUevX1UPWiHqn6k3J7qV9uT8vNuZSSu5ZVck8UmUCfEoaPHtr3wNouJ4ZjxybrP78rvotOJqiSKCFVKi23l1Jye05uLmSV3HN5JXetxASSKhgEOmF2nvR2D02nBBgU3AEDUZgxKAowVOoOGIgAgyHAQAUYfLsDBiLAABgAAxVgAAyAgQowAAbAQAUYAANgoAIMgAEwUAEGwAAYqAADYAAMVIChGgypebNvzw3rvfZEChzDo9vQfY+fIHvtMRpqGF45hrb/lOy194vNm7uSVCmUlErLyu0Dmtyel5sLHsl7uOcKSu7pEhNw/085tcOAUOfsFNlr74dLl/4hTZVFaalyebl9ICe3F+TmokfyHu6FopJ7rsSGgsDw4KokCmivvWq6hWHWKT2zsfzH9157EgGGajBsuGnWrN3ee+05BRhqicEmwIAFGIgAgyHAQAUYfLsDBiLAABgAAxVgAAyAgQowAAbAQAUYAANgoAIMgAEwUAEGwAAYqAADYAAMVIABMAAGKsCggCFh7tSUEOzexCqlye2llNyek5sLaSX3bF7JXSsygUTwGPp7qfpQr1TxpNxeisvtabk5n1JyT+eU3BNFJiD6QclBxgCdEla9OyXAgAUYiACDIcBABRh8uwMGIsAAGAADFWAADICBCjAABsBABRgAA2CgAgyAATBQAQbAABioAANgAAxUgAEwDE0MsMmbTfXBAJu82VQfDGSTN8BAVR8MZJO3+6+//o28KZSXqlCU2wcKcnvJw+yRvId70St5ubkwwARyQWEgm7z9uqOji/ldWPmPyKr+Qq7HT9h6/UKu1y/getg9zPJfyB0sDLDJm011minBJm+84L6BCDAYAgxUgMG3O2AgAgyAATBQAQYFDH09VMcP9UjVn5DbD8fkdk1uPnJUyb27S8k99iYT6Aseg6X+c9Uym7Bfyf3WDiX3TUuV3J+bouQuF2CoVOHBoKmdCPraESX3jheU3H++Q8n99/couctVFQbQYAkwhELVYLDei/oQ/vms2NWtrW/6csee/guwtbV12kb/ud+eNk5eqQZkqgaD9V7Uh/DPZ+3f4tcdeyoVYN0Rv7knWiekjbyVCiBTNRis96I+hH8+66lVdz/lzx17qhTg4D3Id+6luWkjb6UakKkaDOS9qF91zk7teSw270VfzthTpQAr48h/7vPSxskr1oC7qmoNnSrXgv7zWWU9udVvAk9uVShA8stIIfcyBpy3Wg1IVNXYYL4X9SH881n37UObo77csadCAX62XSX3Mgact1INyFTVTMl8L+pD+Oezjs6et7rkyx17KhRgxSGShi/vMgact1INyAT3DaEQYAiFAEMoBBhCIcAQCgGGUCi8GLY0HmtwHCwf2tJYh8IMtsKLIX6AwVA8bnyWD8UP1Kc8g6rwYoi2TD5pOlpx+qiFKDr5rGUDN7x3zIyB8qFoC1o4YuRiFL3qlssn13pldb0UZgzlS/+JxuPx5vbou15DL12Sz5/xcvlQtGXHBanUebuib+9BEx+udylrpJBjmD+iqWn0jGhzOXx0x8J37sMYbtmA0FdnR8chNNP3+4uQKeQYli0vjwuFcj+EnhmzovMiA0NrG0J336IfBAyDrjKGkajznHh+3Da9xpfMQgffs7d8KNryyIVp7fwdgCEQRVuKjZ9Hq0ed2or0Gn/14g9csWh8+VA5MO/MMxbigzdvq3cpa6TwYhhWAgyhEGAIhQBDKAQYQiHAEAoBhlAIMIRC/wfdzsGtawveMQAAAABJRU5ErkJggg==" alt=""/></p>

<h2>Appendix</h2>

<h3>Session information</h3>

<pre><code class="r">R version 4.1.1 Patched (2021-08-10 r80727)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 18.04.5 LTS

Matrix products: default
BLAS:   /home/hb/software/R-devel/R-4-1-branch/lib/R/lib/libRblas.so
LAPACK: /home/hb/software/R-devel/R-4-1-branch/lib/R/lib/libRlapack.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] microbenchmark_1.4-7   matrixStats_0.60.1     ggplot2_3.3.5         
[4] knitr_1.33             R.devices_2.17.0       R.utils_2.10.1        
[7] R.oo_1.24.0            R.methodsS3_1.8.1-9001 history_0.0.1-9000    

loaded via a namespace (and not attached):
 [1] Biobase_2.52.0          httr_1.4.2              splines_4.1.1          
 [4] bit64_4.0.5             network_1.17.1          assertthat_0.2.1       
 [7] highr_0.9               stats4_4.1.1            blob_1.2.2             
[10] GenomeInfoDbData_1.2.6  robustbase_0.93-8       pillar_1.6.2           
[13] RSQLite_2.2.8           lattice_0.20-44         glue_1.4.2             
[16] digest_0.6.27           XVector_0.32.0          colorspace_2.0-2       
[19] Matrix_1.3-4            XML_3.99-0.7            pkgconfig_2.0.3        
[22] zlibbioc_1.38.0         genefilter_1.74.0       purrr_0.3.4            
[25] ergm_4.1.2              xtable_1.8-4            scales_1.1.1           
[28] tibble_3.1.4            annotate_1.70.0         KEGGREST_1.32.0        
[31] farver_2.1.0            generics_0.1.0          IRanges_2.26.0         
[34] ellipsis_0.3.2          cachem_1.0.6            withr_2.4.2            
[37] BiocGenerics_0.38.0     mime_0.11               survival_3.2-13        
[40] magrittr_2.0.1          crayon_1.4.1            statnet.common_4.5.0   
[43] memoise_2.0.0           laeken_0.5.1            fansi_0.5.0            
[46] R.cache_0.15.0          MASS_7.3-54             R.rsp_0.44.0           
[49] progressr_0.8.0         tools_4.1.1             lifecycle_1.0.0        
[52] S4Vectors_0.30.0        trust_0.1-8             munsell_0.5.0          
[55] tabby_0.0.1-9001        AnnotationDbi_1.54.1    Biostrings_2.60.2      
[58] compiler_4.1.1          GenomeInfoDb_1.28.1     rlang_0.4.11           
[61] grid_4.1.1              RCurl_1.98-1.4          cwhmisc_6.6            
[64] rappdirs_0.3.3          startup_0.15.0          labeling_0.4.2         
[67] bitops_1.0-7            base64enc_0.1-3         boot_1.3-28            
[70] gtable_0.3.0            DBI_1.1.1               markdown_1.1           
[73] R6_2.5.1                lpSolveAPI_5.5.2.0-17.7 rle_0.9.2              
[76] dplyr_1.0.7             fastmap_1.1.0           bit_4.0.4              
[79] utf8_1.2.2              parallel_4.1.1          Rcpp_1.0.7             
[82] vctrs_0.3.8             png_0.1-7               DEoptimR_1.0-9         
[85] tidyselect_1.1.1        xfun_0.25               coda_0.19-4            
</code></pre>

<p>Total processing time was 1.49 mins.</p>

<h3>Reproducibility</h3>

<p>To reproduce this report, do:</p>

<pre><code class="r">html &lt;- matrixStats:::benchmark(&#39;sum2&#39;)
</code></pre>

<hr/>

<p>Copyright Henrik Bengtsson. Last updated on 2021-08-25 18:36:11 (+0200 UTC). Powered by <a href="https://cran.r-project.org/package=R.rsp">RSP</a>.</p>

<script>
 var link = document.createElement('link');
 link.rel = 'icon';
 link.href = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAA21BMVEUAAAAAAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8BAf4CAv0DA/wdHeIeHuEfH+AgIN8hId4lJdomJtknJ9g+PsE/P8BAQL9yco10dIt1dYp3d4h4eIeVlWqWlmmXl2iYmGeZmWabm2Tn5xjo6Bfp6Rb39wj4+Af//wA2M9hbAAAASXRSTlMAAQIJCgsMJSYnKD4/QGRlZmhpamtsbautrrCxuru8y8zN5ebn6Pn6+///////////////////////////////////////////LsUNcQAAAS9JREFUOI29k21XgkAQhVcFytdSMqMETU26UVqGmpaiFbL//xc1cAhhwVNf6n5i5z67M2dmYOyfJZUqlVLhkKucG7cgmUZTybDz6g0iDeq51PUr37Ds2cy2/C9NeES5puDjxuUk1xnToZsg8pfA3avHQ3lLIi7iWRrkv/OYtkScxBIMgDee0ALoyxHQBJ68JLCjOtQIMIANF7QG9G9fNnHvisCHBVMKgSJgiz7nE+AoBKrAPA3MgepvgR9TSCasrCKH0eB1wBGBFdCO+nAGjMVGPcQb5bd6mQRegN6+1axOs9nGfYcCtfi4NQosdtH7dB+txFIpXQqN1p9B/asRHToyS0jRgpV7nk4nwcq1BJ+x3Gl/v7S9Wmpp/aGquum7w3ZDyrADFYrl8vHBH+ev9AUASW1dmU4h4wAAAABJRU5ErkJggg=="
 document.getElementsByTagName('head')[0].appendChild(link);
</script>

</body>

</html>
