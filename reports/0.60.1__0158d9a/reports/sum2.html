<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>sum2() benchmarks</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>

<meta name="author" content="Henrik Bengtsson">

</head>

<body>
<p><a href="https://cran.r-project.org/package=matrixStats">matrixStats</a>: Benchmark report</p>

<hr/>

<h1>sum2() benchmarks</h1>

<p>This report benchmark the performance of sum2() against alternative methods.</p>

<h2>Alternative methods</h2>

<ul>
<li>sum() + [()</li>
</ul>

<p>as below</p>

<pre><code class="r">&gt; sum2_R &lt;- function(x, na.rm = FALSE, idxs) {
+     sum(x[idxs], na.rm = na.rm)
+ }
</code></pre>

<h2>Data type &ldquo;integer&rdquo;</h2>

<h3>Data</h3>

<pre><code class="r">&gt; rvector &lt;- function(n, mode = c(&quot;logical&quot;, &quot;double&quot;, &quot;integer&quot;), range = c(-100, +100), na_prob = 0) {
+     mode &lt;- match.arg(mode)
+     if (mode == &quot;logical&quot;) {
+         x &lt;- sample(c(FALSE, TRUE), size = n, replace = TRUE)
+     }     else {
+         x &lt;- runif(n, min = range[1], max = range[2])
+     }
+     storage.mode(x) &lt;- mode
+     if (na_prob &gt; 0) 
+         x[sample(n, size = na_prob * n)] &lt;- NA
+     x
+ }
&gt; rvectors &lt;- function(scale = 10, seed = 1, ...) {
+     set.seed(seed)
+     data &lt;- list()
+     data[[1]] &lt;- rvector(n = scale * 100, ...)
+     data[[2]] &lt;- rvector(n = scale * 1000, ...)
+     data[[3]] &lt;- rvector(n = scale * 10000, ...)
+     data[[4]] &lt;- rvector(n = scale * 1e+05, ...)
+     data[[5]] &lt;- rvector(n = scale * 1e+06, ...)
+     names(data) &lt;- sprintf(&quot;n = %d&quot;, sapply(data, FUN = length))
+     data
+ }
&gt; data &lt;- rvectors(mode = mode)
</code></pre>

<h3>Results</h3>

<h3>n = 1000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5340337 285.3    8529671 455.6   8529671 455.6
Vcells 37466993 285.9   62359815 475.8 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 1000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.001080</td>
<td align="right">0.0011120</td>
<td align="right">0.0012025</td>
<td align="right">0.0011670</td>
<td align="right">0.0011970</td>
<td align="right">0.005213</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.004836</td>
<td align="right">0.0049205</td>
<td align="right">0.0054662</td>
<td align="right">0.0049965</td>
<td align="right">0.0051545</td>
<td align="right">0.035289</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">4.477778</td>
<td align="right">4.42491</td>
<td align="right">4.545864</td>
<td align="right">4.281491</td>
<td align="right">4.306182</td>
<td align="right">6.769423</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 1000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338175 285.1    8529671 455.6   8529671 455.6
Vcells 15832238 120.8   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.002298</td>
<td align="right">0.0025450</td>
<td align="right">0.0028229</td>
<td align="right">0.0027095</td>
<td align="right">0.002846</td>
<td align="right">0.012645</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.004501</td>
<td align="right">0.0047685</td>
<td align="right">0.0050898</td>
<td align="right">0.0049205</td>
<td align="right">0.005056</td>
<td align="right">0.020009</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.95866</td>
<td align="right">1.873674</td>
<td align="right">1.803052</td>
<td align="right">1.816018</td>
<td align="right">1.776528</td>
<td align="right">1.582365</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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SXRHkVr2BO64hTJ8LanriZP0w7nE/alRuCwV+o+irzex8PRDuEaori1Q/XqOQod6h+6uce7iNG13nxAM/CYAxrXb5d3GLhI2+zvaud8n3H8WmlTtz/C1JDa1w41kf8mywMhgZu+1qRCvKKDJfsN1UUH0EJK01J41I4VxSeruD7LQapPNg7GqKqEDKeNevMZi+JB0bkDfeGeBLSpOfTavFjZzpYKxDsTn8126dKlz587xyoBMSPL7/W+99daRI0eOHTvm9/sHDx48dOjQu+66i+fR8cQuY533oLfly5c/88wzFotl6tSpJSUlL7300s6dO9euXXvkyJGZM2ceOHDg+eef/+STT+rr651OZ25u7tNPP11ZWbl69epPPvnkvvvumz9/frxyLo0y27dvLywsPH78+E033bRixYpVq1YNHz78xIkThYWF27dvj0sWIeEhnmpr165dGzdu/OCDDyorK48ePbpu3br777//3Llzb7311u9///sXXnhBEARCyDvvvPPyyy/v2rXL4/G88MILhJAdO3ZUVFTEMR6R0FrS+fPn33zzTfpyIqpv376FhYVer3fDhg3tmzfoQBCVNLRnz56GhoYpU6YQQurq6iorK3/5y18+99xzgwcPnjNnTv/+/elqY8eOtdvthJApU6a88MILN954Y0FBgcPhiGfWQ0PSr371K8kSURQ5jjOZTKF/AgAG2Wy24uLiuXPnEkJ8Ph8dDt3Y2CgIQl1dXWA1v99PP3i9XvqZRqj4ku8e2rlz56xZswghEydOTEtLe/nll9s1UwDQBqNGjVq/fn1jY6PH4xk9evTWrVu9Xu9vf/vb7du3Hz16dN++fXS1LVu2nDt3zuv1rlmz5qc//Wl88xwgH5KKi4vHjx9/6NAht9t98uTJv/zlL+2cLQBQLT8/f9q0afn5+b179x4yZMjkyZOXLl06cuTIvLy8NWvW/O53v6PP9OTl5RUWFubm5l5zzTUPPvhgvHP9Hfln3LKzs8+cObNw4cLs7Ozi4uJevXpVV1frnRWd3ioZkYbPuEmofqtkNGJ68Com8XrGrS3UPeMWJf2KOi0tLV7PuD377LO1tbVPPvmk5im3kfy4pIEDB06bNm3v3r0fffTR448/fu2117ZztnT1/WNxGNMEwBj5kLRu3br169c/+uij6enpgiAk0r22QDwC6MiKi4vjnQV58n1JVqu1Z8+eJ06cWLdu3fXXX3/kyJF2zpZ+UDMCYJl8LWnixIk2my07O5t+5XmejnEI5vV6V69e7XK5cnJyioqKZBfKrnP8+PFdu3bNnj1bj+OJBqISALPkQ5LFYtm8ebPylocPH+7evfvUqVNLS0tra2t79OgRurC6ulqyTnNz84YNG7KysrQ/FAAwPvmQlJubu3379lGjRtGB54SQwIeAqqoqOgzU4XBUVVXRkCRZWF1dLVnnn//859133713795AOhcvXqS3M6xWa+heAnieF0VRYQXVOI7jOE6PlOlTgXqkTAjRKc9E5wLheR5FHZxyxALpaM+Whn0TwKRJk7p06RL4eubMGckKzc3NdIXMzEyXyyW7UPK1srKyW7duOTk5wem8/PLLFRUVhJAXX3yxZ8+e4fLDcRwhJCkpKcYDjJZOE4pyHJeenq5HykS30uA4zmw26zfDKoo6gD4XYbPZFNaJOD13qMbGRhWZSU1tt7euK5EPSYcOHXI6ncolZbPZnE6nw+FwOp2BhphkoeTrli1brFbr8ePHz5w5s2PHjttvv50QMmvWLDpSvKGhQWEID8YlSWBcUjCMS0oY8iGpT58+EWuqubm51dXV+fn5NTU1BQUFsgvNZnPwVzpo/dtvv127di2NRwAAweSbqRcuXOjRo0dhYeHEq0LXGTZsWF1dXVlZWVZWVnZ29qlTp8rLyyULJV91PhYAMDz5B0oOHDggWXLzzTfrnRU8UBITNNyCoeEWLKH6klpaWpKTk2UDEP1Tu+QKAHTg9xPd7t9dvnx58uTJra2tnTp12rRpk+pYIc3frFmzlixZcvbs2eCFZ8+eXbJkycyZM1VmFgDiTdjznmXpIsufF/DHPtQj/VdeeeW22257//33hwwZ0pZH0KS1pGefffbAgQP3339/dXU1vX9//vz5Xr16LViwoB3abgCgB67ujLB/D/1s2vZGa98bSLLS/XRCyNGjR5966imv1zt27NgrV6707t173LhxS5Ysue2227744ot9+/alpKR8/fXXDoejtrZ24sSJeXl5dHBi586drVar6qzK3HG7+eab33nnHUJIbW0tIYTuhhF4iB9ABe7ypR98dTWKkUJSRUXFvffeO2HChE2bNoX2dvXp02fevHm33HJLaWlpamrq9OnTX3vtNULItm3bNm/evG3bNtVZVWpY9ujRg6l4ZD/6UbyzAGBI/p7fv1Hb/z+9xcyuETd56KGHtm7dOmbMGIvFEljo9XrpBzqq2W639+rVy2630+VLly599dVXKyoq0tLUTy1upHncmoYORlQCUMNm88yYyx//kJgt/sF50XRyv//++6WlpZmZmQUFBQ888EBDQwMh5PDhw2PGjJFd/4033mhoaPjXv/7VxpwaKSQRQs4N6Nv1xEm02gBiJXZK990yKvr1u3TpMn36dLvdXlhYWFhY+Otf//r111/Pzs6WfbamW7duO3fuPHDgwIgRIwgh06dPnzp1qrp8yo9LIoSsW7eusrLyr3/9a0VFxaRJk9SlHhOMS4oJxiUFw7ikYAk1Lol6/PHHKysrq6urOY575plnjhw5smzZsnbOGQB0QPJNyo0bN7766qvXXXedIAjvvvvupk2b2jlbANAxyYek1tZWj8dDP7vdbgzaBoD2IR+Spk+fPnr06NOnT5eVlY0YMeLhhx9u52wBQMck35c0Z86cIUOG7Nmzx+fzPf/883l5ee2crWjQYZO4+waQSORrSVeuXHG73X379s3Ozj558iSDfUmBYdyYBAkgkaifoQQAQHPqZyiJLzpmkqDhBpBY5BtudIaS1tZW31XtnK1onBvQF/EIIMGon6EEACCcVatWVVRUvPTSSxcvXvz888/r6+t/8YtfRDOBo/oZSgDAQHY3up7/1pnEc4926zrA1h4jDefNm5eTk7N8+fKysrKGhoann376ySefjLiV+hlKOg50WrUnvBJLD9VXWu869RX9vPnCxbODByRHehlArK9wmzx5cmgizc3Nzc3NFoulW7duVVVV0WRV/QwlHYTq0QZdT5zM/Pgz/v2DOmQqYWFIh07+r+kHz6t/6VZ60Jeir3B74403ZB/H7dOnz8qVK7/55psHH3xwxYoVGzdupMslw6o///xzh+O7VzWlpqaeP38+4n7la0lz586dO3duxI0hnHCXVgesAuj3MpkOWJiqSVpqDmvkyXsfeuihBQsWrFmzpri4OLBQ9hVubrfb6/Xu27dv/fr1e/fuffjhhwOzNP73v/+99tpr6efu3bufPn06uIdaljQk5efnb968eeXKlZLl7fDibeX39ZrNZnJ1Gm5t0Rnfw8283nzTENuR/6Mf1KVvt9tDU7Db7epSCzCbzW1PRJbJZOJ5XpOp6OmBdz1xkh47x3HJh797F71seaor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YzoAbYdaUiL7+OOP58yZ88gjj9TU1EyfPp0Qsnz5cofD0a9fv5KSEkLIgQMHpkyZMnDgwOeee04UxRkzZlx33XX9+/efNWuWKIqBDWk6hJCSkhI61PiJJ56gm993333z5s2bNGnSlClTdJqlGjqW+L6IAHS1f//+u++++/z58/369RNFcefOnXl5eU6n8/Lly3fcccfatWv379/fqVOnL7/8UhTF//znP7fffntra2tra2tubu7nn38e2JCm8/bbbw8bNqypqampqWno0KHvvvvu/v37k5OTL1y4IIpiYWHhli1b4nu8kADQcOtA9uzZ09DQQKceqaurq6ys7NWrV0FBAX0txoABA1555ZX33nvv6NGj33zzjdvtDt182rRpNpuNEHLfffft2bNn/Pjxw4cPz8jIIIQ4HI7QTQBihZDUgdhstuLi4rlz5xJCfD6fKIpHjhwJzH126NChBx544De/+c24ceN2794durkoioF3a3Ac5/P5CCEKPVAAKqAvqUPwer2EkFGjRq1fv76xsdHj8YwePXrr1q3B6/z73/+m74rt1q3bZ5995vF4AhtSt95669q1a91ud0tLy9q1a+mb6gC0hZCU+NLT09PT0++///78/Pxp06bl5+f37t17yJAhkydPDl7t3nvv/eijj37yk588+uij06dPLykpCWxIVxg/fvzIkSMHDhw4cODAMWPGjB07Nnhznuf1mCAXOhq8CQAAGIJaEgAwBCEJABiCkAQADEFIAgCGICQBAEMQkgCAIQhJAMCQ/w/ikDBDVkQmBgAAAABJRU5ErkJggg==" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338241 285.1    8529671 455.6   8529671 455.6
Vcells 15832390 120.8   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.003173</td>
<td align="right">0.0033285</td>
<td align="right">0.0036057</td>
<td align="right">0.0034740</td>
<td align="right">0.0036150</td>
<td align="right">0.013935</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.005667</td>
<td align="right">0.0058870</td>
<td align="right">0.0063276</td>
<td align="right">0.0060775</td>
<td align="right">0.0063005</td>
<td align="right">0.023069</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.786007</td>
<td align="right">1.768665</td>
<td align="right">1.754882</td>
<td align="right">1.749424</td>
<td align="right">1.742877</td>
<td align="right">1.655472</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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bUlXXXXVm2++SQgR7juj+T6PYSdOBb5szxsfq0gAaMZcvPCdl50d/nApae/evbfffvsPf/jDXbt2BV8eHTdu3OrVq6+55poNGzakpqYuW7bs1VdfJYS88cYbNTU1b7zxhuZQlU4sR48eTXM+Svv481iHABAf+i/99ona/f8rx58xLOwid9999549e0pKSgJv0PH5fMI/l156KSHEZrONHTvWZrMJ05944olXXnll7969l1xyieZQMY4bwCDA8977VrHHPyLmpP4p09Q0cr///vsbNmzIyMiYMWPGkiVLXC4XIeTo0aMlJSWy87/22msul+sPf/hDlJHGcUq6MPU/AitKOGsDUOBPs/ddc536+YcOHbps2TKbzVZWVlZWVnbHHXf88Y9/zM7Olu1BPXz48P379x8+fPjqq68mhCxbtuy2227TFqd8721CyPbt2+vr63/zm9/s3bv35ptv1lZ6NNB7WyX03hah97YgAXtvP/zww/X19U1NTQzDPPvss3V1dU899dQARwYAg5D8KWV1dfUrr7wyatQojuPeeuutXbt2DXBYANEYduKU8BfrQCBi8impt7dXrP16PB502oY4gkwU1+RT0rJly66//vovv/yysrLy6quvvueeewY4LADNcKEjrsm3Ja1cuXLq1Km1tbV9fX2///3vp02bNsBhAUQDWSl+ydeSenp6PB7P+PHjs7OzT506hbYkABgY2kcoSQxiuwN+VwFooH2EkgQz7MQpZCWAmNM+QgkAgO60j1CSYFBFAonAzgTdV05VPz+OJULIpk2b9u7d++KLL3799dcnT55sa2v78Y9/nJmZGXZB+ZQkjFDC82EeX5AAcPRoEPhdjXIHJszXmP7OUO91dP7+X04Lyzw4fFgePxA9DVevXj1mzJiNGzdWVla6XK7f/va3jz32WNil5FPSuHHjxIEA4lrwlydhvgMRob+lTCFC+oMnhLTnjac5KzX19P5nwz+E/2u++vrclDxruIcBRPoIt3nz5gUX0t3d3d3dnZSUNHz48MbGRjWhyocljFBSVlY29xtqyoovNB9A+hK2lMLtVRNSDIMX86DKhNieN174MzIojT7u+s6N2X/3hL/nWXiE22uvvSZ7O+64ceOeeeaZs2fP3nXXXU8//XR1dbUwXdKt+uTJkw7Hvx/VlJqaev78+bDrpXeEEuVnZXIcl5ycbDab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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338304 285.1    8529671 455.6   8529671 455.6
Vcells 15833144 120.8   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.004799</td>
<td align="right">0.005038</td>
<td align="right">0.0053652</td>
<td align="right">0.005231</td>
<td align="right">0.0054240</td>
<td align="right">0.017298</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.008000</td>
<td align="right">0.008382</td>
<td align="right">0.0088059</td>
<td align="right">0.008612</td>
<td align="right">0.0088285</td>
<td align="right">0.027749</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.667014</td>
<td align="right">1.663755</td>
<td align="right">1.641309</td>
<td align="right">1.646339</td>
<td align="right">1.627673</td>
<td align="right">1.604174</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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dXX16tVr9+7dEdcKZX5Lly5dtWrVlStX/CdeuXJl1apVjz32WITJAkCscYfet77wjPX5Fexnn5oR/7XXXps0adJHH300atSoaH6Cpuwlbdmy5dixYw899FBdXZ10EkBTU1NOTs6KFStUu04AQD/mwnnu6CHpMb//j11Dh5HkEN+nnzp16sUXXxQEYfr06Z2dnYMHD54xY8aqVasmTZr097///ciRIykpKRcvXnQ6nQ0NDbNmzSosLBwwYAAhpE+fPtoXGtKmcizptttue+eddwghDQ0NhBBpNQAQv5jr1/7H05ZmMVRJ2rdv3/3333/33Xfv3r078PIpQ4YMWb58+e23375mzZrU1NTFixe/+eabhJD9+/dXVVXt378/4lS1BpYDBgxAPQJIAL5B315R2/e/BosZ/UIu8vDDD+/du3fq1KlW67e3kRcEQXowaNAgQojD4cjJyXE4HNL0F1544Y033ti3b19aWlrEqeLWkgA9gN3uWVLOnvmUWKy+Wwr1HOT+6KOP1qxZk5GRUVxcvGDBArfbTQg5ceLE1KlTVef/4x//6Ha7f//730eZKUoSQI8g9urtvX2i/vn79u27ePFih8NRUlJSUlLy4IMP/uEPf8jOzk5KSgqcuX///gcPHjx27Ni4ceMIIYsXL77vvvsiyzPo3W5ff/316urql156ad++fbNnz44selhwoduw4EK3/nChW38J+Bu3Z599trq6uq6ujmGYl19++eTJk2vXru3mzACgB1IfUu7ateuNN9646aabOI579913d+/e3c1pBdPv7FfSX6wTAQBTqPeSurq6PB6P9Lijo4OSk7Ydp04rpsi1qTF/aLenAwDGU+8lLV68ePLkyV9//fW6devGjRu3aNGibk5LVevoW/yfoq8EkHjUe0llZWWjRo06dOiQ1+v93e9+V1hY2M1pBdOYP7Tf2a/iqE/EfvRxHGULEHPqvaTOzs6Ojo6hQ4dmZ2d/9dVX9BxLIn5jtMAHeph0NEo1ZsbnXxIdvTkcIAOQxfcdSsLtgJi028tho+zB6VlcWhd6XpCocIeSeOJf+9puHeVfYVWLVMgZwl01SiGYTb0kSXcomThxonxVycS47q20RwV2RlKqP/OfIZhgX/BJR7gC53eNGCadKql4NdjiRu3wZgxL5QeoSmCqRLtDSbCq4T89+p0qcM/UiKmnQOhMKVjt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" alt=""/></p>

<h3>n = 10000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338302 285.1    8529671 455.6   8529671 455.6
Vcells 15832768 120.8   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 10000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.008386</td>
<td align="right">0.0086155</td>
<td align="right">0.0088378</td>
<td align="right">0.008770</td>
<td align="right">0.0088515</td>
<td align="right">0.019229</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.023377</td>
<td align="right">0.0236815</td>
<td align="right">0.0246369</td>
<td align="right">0.024441</td>
<td align="right">0.0246135</td>
<td align="right">0.050206</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">2.787622</td>
<td align="right">2.748709</td>
<td align="right">2.787671</td>
<td align="right">2.786887</td>
<td align="right">2.780715</td>
<td align="right">2.610952</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 10000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338430 285.2    8529671 455.6   8529671 455.6
Vcells 15833826 120.9   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.009527</td>
<td align="right">0.0099820</td>
<td align="right">0.0117364</td>
<td align="right">0.0102575</td>
<td align="right">0.0108405</td>
<td align="right">0.044110</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.015059</td>
<td align="right">0.0154035</td>
<td align="right">0.0179442</td>
<td align="right">0.0161040</td>
<td align="right">0.0167765</td>
<td align="right">0.052554</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.580666</td>
<td align="right">1.543128</td>
<td align="right">1.528937</td>
<td align="right">1.569973</td>
<td align="right">1.547576</td>
<td align="right">1.191431</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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AIBBItxL6u7unjBhQn5+PidMr7/++hB6BQDACEVYktauXYsfIwYAABhK+JLU398fHR193XXX+WbFHw2JVwAAKIDHg0jp4fbF6enpWbJkidPpHDVq1L59+yRrBV+SVq9enZSUtGLFijFjxnCJFy5c2LVrV3t7+3PPPSfd5YCu0DTpv73wRxqNJvazRpzy/YxMWeolCAI/DiqLNW9w3HElLGPjylkepPHYzxoFvx2SJBVqajzDEIlNHbBBRC6KkKCOfEh9cgQhxCy83ZN1jSw2vXnllVfmzJnzu9/9buPGjdXV1ffee680O3xJevbZZ48fP37PPfe0tLTgRQBdXV2pqanr168X7DqFEX/nPRBe8G8GfDuqgmj/DusRQoh++zXnpCkoOsD99NOnTz/11FMMwxQWFg4MDKSlpS1YsODxxx+fM2fOV199dezYsZiYmI6ODovF0tbWtnjx4uzsbLxzWnx8vHeg/VARmEu67rrr3n33XYRQW1sbQghXMwQwDCOyJlOr1bIs63K5uJSLmZO830oG95JkMcWDJEmezzKi1WoVsuzxeDwez+CNx37WyAUax1AURRCEEm7jGDuR2NRut1vcuCz3vomeK/akIOy9bCBJOnDgwJ133nnbbbft27fPN3xKRkbGunXrfvazn1VUVBiNxpUrV+7fvx8h9Pbbb9fW1r799tuSXRXrE06YMGHI9Ch48FnOO9cBFQLfkXrwTPwxorbnJ2lsQmLAIg888MCbb745b948rVbLJXI7F+D9zQwGQ2pqqsFgwOmbN29+9dVXDxw4IGFLFQ7p+7iFETjX1Qx8O2pEr3etWks2fIo0Ws+M7GAmuT/++OOKioqEhISCgoL77rsP72xWV1c3b948wfyvvfaazWb7y1/+MkhPI1KSVAi3dS1ckIA6YUfFun92U/D5R48evXLlSoPBsGjRokWLFt19991//etfk5OTo6KifDOPGTPm0KFDx48fv/766xFCK1euLC4uluancKBbhNCePXvq6+v/+Mc/Hjhw4Pbbb5dmPSQiN9Ct91ba3pIEgW55yBjolvcbAIFuvRmGz7g99thj9fX1LS0tBEHs3Lnz1KlTW7ZsGWLPAAAYgQgPKWtqal599dXx48dTFPXee+/t27dviN2KLLieEYza5CKx8Rz+k9egXNYA5RDuJTmdTu7GpMPhgEXbAQExUojExnMh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DGMwGNatW9fT07NmzRociaWkpCQpKSncDgrT1dXl7afZbFZ/m9fW1p46dQohZLfbc3Nzb7nlFvU39ZNPPllaWqrT6SAGtF9Y1XPs2LHq6mqWZTdv3vzdd9+F250AvP3227W1tSzL7t2798MPP/zXv/5VU1MTbqcCw/Mzstq8qqqqs7NT5U3d29tbWlp6yy239Pf3sz4tHFkNrigRMHCLrPC46enps2bNQgjFxMRoNJoLFy50dHRUVVUdOXIkzJ6JwvMzgtq8tbU1Ojp67NixKm/qmJiYLVu2TJs2Db+FGND+iABJEgyPq1oyMjISEhLq6+tPnDiRk5Oj1+szMzOLi4sPHTr0+eefh9s7v/D8jKA2r62t/fnPf458DiHcfgmAV4ri18HEgB6ZRMBckmB4XDWzf//+tra2DRs26PX63NxcnDh79uympibuR1Jt8PyMlDa/fPlyf3+/0WhEPoeg2qbGBBMDemQSAb0kHDwXIdTa2pqWlhZudwJw8uRJu91eUlKCH26orq5uaGhACLW2to4bNy7c3vmF52ektPmnn37KSU+kNDWG18KR0uBDQASsS2IYpqqqyuVymc3mpUuXhtudAOzatevLL7+Mjo5GCC1YsGDy5Mnbtm2jaTohIeG3v/2tap9XunjxorefHo8nItp869atv/jFL/BqQ94hqLOpy8rK1q9fj++4ebdwZJ3kihIBkgQAwMhBjb8kAACMWECSAABQESBJAACoCJAkAABUBEgSAAAqAiRpOLNv376cnByr1TplyhQJxbmC2I7c3gGAABGwehuQTGFhYV5eXsBsbrf70qVL8fHxg7QDAIMHeknDmc8//7y0tPShhx5qbW1duXIlQmjr1q0Wi2Xy5MkbN25ECB0/fryoqGj69OnPPfccy7KrVq0aP3781KlTV69ezbIsVxDbQQht3LgRLzXetGkTLn7XXXetW7fu9ttvLyoqUmiXamBkEd5ABICifPLJJ3fccUdXV9fkyZNZlj106FB2drbVau3p6Zk/f/7u3bs/+eSTUaNGff311yzL/vOf/5w7d67T6XQ6nenp6WfPnuUKYjvvvPNOXl7e5cuXL1++nJub+957733yySfR0dHd3d0syy5atOiNN94I7/ECwwAYuI0gjhw5YrPZ8NYj7e3t9fX1qampBQUFOCxGZmbmK6+88uGHH54+ffr8+fMOh8O3+NKlS/V6PULorrvuOnLkyMKFC/Pz8+Pi4hBCFovFtwgAhApI0ghCr9cvX7587dq1CCG3282y7KlTp7i9z06ePHnffffde++9CxYsOHz4sG9xlmW52BoEQbjdboSQyAwUAEgA5pJGBAzDIIRuuummvXv39vb2ulyum2+++c033/TO87e//Q3Hih0zZsyXX37pcrm4gpgbbrhh9+7dDoejv79/9+7dOFIdAMgLSNLwJzY2NjY29p577snJyVm6dGlOTk5aWtrMmTOXLFnine3OO+/87LPPrrnmmkceeWTlypUbN27kCuIMCxcunDVr1vTp06dPnz5v3rzCwkLv4iRJKrFBLjDSgEgAAACoCOglAQCgIkCSAABQESBJAACoCJAkAABUBEgSAAAqAiQJAAAVAZIEAICK+P9Xa8tuB374yQAAAABJRU5ErkJggg==" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338493 285.2    8529671 455.6   8529671 455.6
Vcells 15835099 120.9   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.016355</td>
<td align="right">0.0174320</td>
<td align="right">0.0186418</td>
<td align="right">0.0179175</td>
<td align="right">0.0186795</td>
<td align="right">0.042341</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.024262</td>
<td align="right">0.0252945</td>
<td align="right">0.0269480</td>
<td align="right">0.0265455</td>
<td align="right">0.0273985</td>
<td align="right">0.046399</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.483461</td>
<td align="right">1.451038</td>
<td align="right">1.445568</td>
<td align="right">1.48154</td>
<td align="right">1.466768</td>
<td align="right">1.095841</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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Wlo6Ojruvvvut99+2+12P/LIIwcPHqyoqDh58qS021tvvXX16lW327158+Y777wztnX2kI+kBQsW3HvvvWfOnHG5XJcuXfr1r3/dzdWKCz0njzw/ac/5keNabm7u3Llzc3NzBw8ePHr06FmzZq1du3bSpEljxozZvHnzY4895nK5CCFjxowpKCjIyckZMGDAz3/+81jX+mvy45IyMzMvX768cuXKzMzMBQsWZGdn19TURP3YGJekAsYl+euecUk0Co/hY7dbtmypq6t74YUXol5yhOTHJY0cOXLu3LknTpz4+OOPn3/++RtuuKGbqwWMwFVt6GbykbRz585du3Y988wzaWlpgiDgXhv0u3AJqZRIFixYEOsqyJOPJL1eP2jQoAsXLly4cOGmm246d+5cdnZ291YMAHoi+UiaOXOmwWDIzMyU/svzvDTGAXqaq8OHSn03NJGge8hHklar3bdvXzdXBdiEMILuJD8IICcn5+DBg+3t7Z3f6OZqAUDPFHAmgAceeKBv376e/16+fLlb6gMAkWppaVHxqtTU1KjXRAX5SDpz5ozVajUYDN1cGwDo4eQ7bkOGDJGeFQYA6E7yraSmpqYbb7xx3LhxnmDav39/N9bKl/djn7jaCpDA5CNp6dKl0mPEAADdyTeSnE5ncnLy+PHj/XeVvuX5r9vt3rRpk91uz8rKKiwslN3ocDiKi4vdbrfRaFy2bBmlFUEAICRdXYSntU5ac3PzrFmz2tvbTSbT3r17vbMiLL71W7Ro0erVq69cueK98cqVK6tXr3766ae9N549ezYjI6OoqKihoaGurk524/Hjx0eNGlVcXHzTTTedOHFCXRXJN5OBeKYEAYBwCeVHtGuf0764gv/kQxrlv/HGG1OmTHn//fdHjx4dySNovq2kLVu2nD59et68eTU1NdIggMbGxuzs7BUrVvg0naqrq6Xp6SwWS3V19Y033ui/MScnx2w2E0JSUlI8M1Veu3ZNepZdr9crXETneZ7jOEpX2XmeF0WRUuEcx/E8T69wSiULgkCvcI7j4rdwadU/GoWTb067wg58NNo1XP1l4VS59LXmwF/ah95MkoPcT6+oqPjNb37jdrunT5/e1tY2ePDgGTNmrF69esqUKf/6179OnjyZkpLy5ZdfWiyWurq6mTNnjhkzRgqBPn36KC/RqEzmWtL48ePfffddQojU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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338556 285.2    8529671 455.6   8529671 455.6
Vcells 15837402 120.9   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.031270</td>
<td align="right">0.0318510</td>
<td align="right">0.0335354</td>
<td align="right">0.0329085</td>
<td align="right">0.034248</td>
<td align="right">0.049881</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.044507</td>
<td align="right">0.0454465</td>
<td align="right">0.0476911</td>
<td align="right">0.0468330</td>
<td align="right">0.048695</td>
<td align="right">0.078203</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.423313</td>
<td align="right">1.426847</td>
<td align="right">1.422112</td>
<td align="right">1.423128</td>
<td align="right">1.421835</td>
<td align="right">1.567791</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h3>n = 100000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338554 285.2    8529671 455.6   8529671 455.6
Vcells 15837334 120.9   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 100000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.065744</td>
<td align="right">0.067973</td>
<td align="right">0.0737974</td>
<td align="right">0.0717315</td>
<td align="right">0.078840</td>
<td align="right">0.089428</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.165231</td>
<td align="right">0.170689</td>
<td align="right">0.1832806</td>
<td align="right">0.1766735</td>
<td align="right">0.197123</td>
<td align="right">0.237330</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">2.513248</td>
<td align="right">2.511129</td>
<td align="right">2.483565</td>
<td align="right">2.462983</td>
<td align="right">2.500292</td>
<td align="right">2.653867</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 100000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338682 285.2    8529671 455.6   8529671 455.6
Vcells 15843793 120.9   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.063903</td>
<td align="right">0.067166</td>
<td align="right">0.0721924</td>
<td align="right">0.069458</td>
<td align="right">0.0746845</td>
<td align="right">0.109951</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.088549</td>
<td align="right">0.092299</td>
<td align="right">0.1001226</td>
<td align="right">0.095327</td>
<td align="right">0.1030570</td>
<td align="right">0.155435</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.385678</td>
<td align="right">1.374192</td>
<td align="right">1.386887</td>
<td align="right">1.372441</td>
<td align="right">1.379898</td>
<td align="right">1.413675</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338745 285.2    8529671 455.6   8529671 455.6
Vcells 15854204 121.0   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.118642</td>
<td align="right">0.1276185</td>
<td align="right">0.1419532</td>
<td align="right">0.135050</td>
<td align="right">0.1500780</td>
<td align="right">0.212853</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.162325</td>
<td align="right">0.1734950</td>
<td align="right">0.1920553</td>
<td align="right">0.183081</td>
<td align="right">0.2030225</td>
<td align="right">0.294414</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.00000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.368192</td>
<td align="right">1.359482</td>
<td align="right">1.352949</td>
<td align="right">1.355654</td>
<td align="right">1.35278</td>
<td align="right">1.38318</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338808 285.2    8529671 455.6   8529671 455.6
Vcells 15874246 121.2   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.197302</td>
<td align="right">0.2147235</td>
<td align="right">0.2483672</td>
<td align="right">0.2407505</td>
<td align="right">0.271971</td>
<td align="right">0.338193</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.276557</td>
<td align="right">0.3030615</td>
<td align="right">0.3443118</td>
<td align="right">0.3294850</td>
<td align="right">0.370356</td>
<td align="right">0.565140</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.401694</td>
<td align="right">1.411404</td>
<td align="right">1.386301</td>
<td align="right">1.368575</td>
<td align="right">1.361748</td>
<td align="right">1.671058</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 100000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h3>n = 1000000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338806 285.2    8529671 455.6   8529671 455.6
Vcells 15874312 121.2   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 1000000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.521554</td>
<td align="right">0.524181</td>
<td align="right">0.5749577</td>
<td align="right">0.539465</td>
<td align="right">0.598880</td>
<td align="right">0.867486</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.288353</td>
<td align="right">1.290860</td>
<td align="right">1.4028904</td>
<td align="right">1.323739</td>
<td align="right">1.414983</td>
<td align="right">2.198585</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">2.47022</td>
<td align="right">2.462624</td>
<td align="right">2.439989</td>
<td align="right">2.4538</td>
<td align="right">2.362715</td>
<td align="right">2.534433</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 1000000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338934 285.2    8529671 455.6   8529671 455.6
Vcells 15934770 121.6   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.522885</td>
<td align="right">0.5585940</td>
<td align="right">0.7055779</td>
<td align="right">0.719080</td>
<td align="right">0.821523</td>
<td align="right">1.014041</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.725518</td>
<td align="right">0.7857915</td>
<td align="right">1.0181303</td>
<td align="right">0.947988</td>
<td align="right">1.254359</td>
<td align="right">1.357609</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.387529</td>
<td align="right">1.406731</td>
<td align="right">1.442974</td>
<td align="right">1.318334</td>
<td align="right">1.52687</td>
<td align="right">1.338811</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5338997 285.2    8529671 455.6   8529671 455.6
Vcells 16034814 122.4   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.047207</td>
<td align="right">1.088124</td>
<td align="right">1.218961</td>
<td align="right">1.123151</td>
<td align="right">1.328041</td>
<td align="right">1.90907</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.445381</td>
<td align="right">1.479166</td>
<td align="right">1.786106</td>
<td align="right">1.532172</td>
<td align="right">1.813354</td>
<td align="right">10.10205</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.380225</td>
<td align="right">1.359373</td>
<td align="right">1.465269</td>
<td align="right">1.364173</td>
<td align="right">1.365435</td>
<td align="right">5.291606</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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K8G0vBJmu00YkJIiw/tSyWCGEwi+y4O0CbijnJL80Vav5ao2wQTciSSpByfBKphEExfHaAHF8MCtd+mqzFhtO0E5nc6enp7MzJjVq4+U5HK53n777cbGxk8//dTlco0dO3bixIn33nsvTcMNceA7Me8/AvI2bNjw0ksvKRSKuXPnrlmz5tVXXz106NC2bdsaGxufeuqpEydO/OUvfzl37tylS5f0en1eXt6LL77Y1NS0ZcuWc+fOPfTQQ8uXL49VyT2zzIEDB8rKys6cOXPLLbds3Lhx8+bNJSUlZ8+eLSsrO3DgQEyKCADol8OHD9fW1n788cdNTU2nTp3avn37ww8/3NnZ+fbbb//6179+5ZVXxOsz33333ddee+3w4cN2u/2VV15BCL3//vv79u2LYT5C3q2krq6ut956i+M4acnIkSPLysocDsfOnTujWza/InIXLgCJqr6+3mAwiLeadnR0NDU1/exnP3v55ZfHjh1bUVExatQocbUZM2ZoNBqEUHl5+SuvvDJ69OjS0lKdThfLonunpJ///OceSwRBoCiKZVnvp2LCvWPV332hACQznucXLFiwdOlShJDT6RRPYfX29jIMI97aJXK5XOIDh8MhPhYzVGz57h46dOjQ4sWLEUKzZs1KTU197bXXolqo/ojVOGQAfX9gpliXBfzXlClTduzY0dvba7fb77zzzr179zocjl/96lcHDhw4derUsWPHxNX27NnT2dnpcDi2bt36ox/9KLZllvhOSQsWLLj77rtPnjxpsVjOnz//u9/9LsrFkuFvuFXpWwHfEJDkiouL582bV1xcnJubO27cuDlz5qxbt27y5MkTJkzYunXrwoULxQs+JkyYUFZWlpeXd9111z366KOxLvV3fF8EYLVap06d+uyzz9533305OTmYrsvAwT0xiQ/gyA4kocWLF4sHOiJpEKHx48efO3dOfHzzzTfv2bNHWufWW2+99dZbo1lIn3ynpKKionnz5h09evT06dOrV68ePHhwlIsVkPfAAN5/SgshK2Hic9hJqG0QDt8Hbtu3b580adKePXvS09MZhiHnXJsH74O40EZ0BeHzbp8Cki1YsEC6QZUovlOSSqUaPnz42bNnt2/ffsMNNzQ2Nka5WP0STFYC0QTdeSBkvg/cZs2axfP80KFDxT9pmo7gcNo4yKchSFIAxAvfKUmhUNTV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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339060 285.2    8529671 455.6   8529671 455.6
Vcells 16235382 123.9   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">2.112259</td>
<td align="right">2.197957</td>
<td align="right">2.398759</td>
<td align="right">2.244506</td>
<td align="right">2.409871</td>
<td align="right">8.233795</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">2.903906</td>
<td align="right">3.038551</td>
<td align="right">3.416180</td>
<td align="right">3.113480</td>
<td align="right">3.347508</td>
<td align="right">9.807027</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.374787</td>
<td align="right">1.382443</td>
<td align="right">1.424145</td>
<td align="right">1.387156</td>
<td align="right">1.389082</td>
<td align="right">1.19107</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 1000000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h3>n = 10000000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339058 285.2    8529671 455.6   8529671 455.6
Vcells 16235006 123.9   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 10000000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">6.020235</td>
<td align="right">6.29380</td>
<td align="right">6.410239</td>
<td align="right">6.402584</td>
<td align="right">6.44013</td>
<td align="right">8.621124</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">13.624796</td>
<td align="right">14.35236</td>
<td align="right">14.468808</td>
<td align="right">14.441155</td>
<td align="right">14.53758</td>
<td align="right">17.598591</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">2.263167</td>
<td align="right">2.280396</td>
<td align="right">2.25714</td>
<td align="right">2.25552</td>
<td align="right">2.257342</td>
<td align="right">2.041334</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 10000000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339186 285.2    8529671 455.6   8529671 455.6
Vcells 16835464 128.5   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">7.74858</td>
<td align="right">9.293142</td>
<td align="right">9.585663</td>
<td align="right">9.523988</td>
<td align="right">9.833519</td>
<td align="right">23.48308</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">9.80373</td>
<td align="right">13.081651</td>
<td align="right">14.231241</td>
<td align="right">13.544375</td>
<td align="right">14.462466</td>
<td align="right">33.10655</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.265229</td>
<td align="right">1.407667</td>
<td align="right">1.484638</td>
<td align="right">1.422133</td>
<td align="right">1.470731</td>
<td align="right">1.409805</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339249 285.2    8529671 455.6   8529671 455.6
Vcells 17836139 136.1   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">12.37166</td>
<td align="right">13.65880</td>
<td align="right">15.91483</td>
<td align="right">16.54473</td>
<td align="right">16.91556</td>
<td align="right">26.35991</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">17.05854</td>
<td align="right">24.41128</td>
<td align="right">24.74192</td>
<td align="right">25.18623</td>
<td align="right">26.24817</td>
<td align="right">36.06298</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.00000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.37884</td>
<td align="right">1.78722</td>
<td align="right">1.554646</td>
<td align="right">1.522311</td>
<td align="right">1.551718</td>
<td align="right">1.3681</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339312 285.2    8529671 455.6   8529671 455.6
Vcells 19836181 151.4   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">23.37447</td>
<td align="right">24.59431</td>
<td align="right">28.03045</td>
<td align="right">25.54718</td>
<td align="right">32.55787</td>
<td align="right">37.81159</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">31.73629</td>
<td align="right">45.11006</td>
<td align="right">47.10391</td>
<td align="right">49.35651</td>
<td align="right">50.27411</td>
<td align="right">61.88578</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.357733</td>
<td align="right">1.834167</td>
<td align="right">1.680455</td>
<td align="right">1.931975</td>
<td align="right">1.544146</td>
<td align="right">1.636688</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on integer+n = 10000000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h2>Data type &ldquo;double&rdquo;</h2>

<h3>Data</h3>

<pre><code class="r">&gt; rvector &lt;- function(n, mode = c(&quot;logical&quot;, &quot;double&quot;, &quot;integer&quot;), range = c(-100, +100), na_prob = 0) {
+     mode &lt;- match.arg(mode)
+     if (mode == &quot;logical&quot;) {
+         x &lt;- sample(c(FALSE, TRUE), size = n, replace = TRUE)
+     }     else {
+         x &lt;- runif(n, min = range[1], max = range[2])
+     }
+     storage.mode(x) &lt;- mode
+     if (na_prob &gt; 0) 
+         x[sample(n, size = na_prob * n)] &lt;- NA
+     x
+ }
&gt; rvectors &lt;- function(scale = 10, seed = 1, ...) {
+     set.seed(seed)
+     data &lt;- list()
+     data[[1]] &lt;- rvector(n = scale * 100, ...)
+     data[[2]] &lt;- rvector(n = scale * 1000, ...)
+     data[[3]] &lt;- rvector(n = scale * 10000, ...)
+     data[[4]] &lt;- rvector(n = scale * 1e+05, ...)
+     data[[5]] &lt;- rvector(n = scale * 1e+06, ...)
+     names(data) &lt;- sprintf(&quot;n = %d&quot;, sapply(data, FUN = length))
+     data
+ }
&gt; data &lt;- rvectors(mode = mode)
</code></pre>

<h3>Results</h3>

<h3>n = 1000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339310 285.2    8529671 455.6   8529671 455.6
Vcells 25391305 193.8   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 1000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.001527</td>
<td align="right">0.0015745</td>
<td align="right">0.0016713</td>
<td align="right">0.0016475</td>
<td align="right">0.001710</td>
<td align="right">0.004277</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.004602</td>
<td align="right">0.0047165</td>
<td align="right">0.0049874</td>
<td align="right">0.0047680</td>
<td align="right">0.004897</td>
<td align="right">0.021078</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">3.013752</td>
<td align="right">2.995554</td>
<td align="right">2.984186</td>
<td align="right">2.894082</td>
<td align="right">2.863743</td>
<td align="right">4.928221</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 1000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339435 285.2    8529671 455.6   8529671 455.6
Vcells 21392619 163.3   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.002360</td>
<td align="right">0.0025725</td>
<td align="right">0.0028508</td>
<td align="right">0.0026895</td>
<td align="right">0.0027980</td>
<td align="right">0.017461</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.004557</td>
<td align="right">0.0048975</td>
<td align="right">0.0051876</td>
<td align="right">0.0049900</td>
<td align="right">0.0051075</td>
<td align="right">0.021845</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.930932</td>
<td align="right">1.90379</td>
<td align="right">1.819675</td>
<td align="right">1.855363</td>
<td align="right">1.825411</td>
<td align="right">1.251074</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339501 285.2    8529671 455.6   8529671 455.6
Vcells 21392768 163.3   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.003100</td>
<td align="right">0.0032785</td>
<td align="right">0.0036107</td>
<td align="right">0.0034525</td>
<td align="right">0.0036215</td>
<td align="right">0.016606</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.005823</td>
<td align="right">0.0060935</td>
<td align="right">0.0064466</td>
<td align="right">0.0062715</td>
<td align="right">0.0064365</td>
<td align="right">0.020972</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.878387</td>
<td align="right">1.858624</td>
<td align="right">1.785403</td>
<td align="right">1.81651</td>
<td align="right">1.777302</td>
<td align="right">1.262917</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339564 285.2    8529671 455.6   8529671 455.6
Vcells 21393010 163.3   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.004478</td>
<td align="right">0.0047255</td>
<td align="right">0.0051842</td>
<td align="right">0.004876</td>
<td align="right">0.0050400</td>
<td align="right">0.033111</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.007943</td>
<td align="right">0.0082695</td>
<td align="right">0.0087572</td>
<td align="right">0.008471</td>
<td align="right">0.0086815</td>
<td align="right">0.033366</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.773783</td>
<td align="right">1.749974</td>
<td align="right">1.689207</td>
<td align="right">1.737285</td>
<td align="right">1.72252</td>
<td align="right">1.007701</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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7u5uu91+9dVXh84qftQnUQGACQIBYsI9Z0Tnz5+fPn16b2/vgAEDtm7dqjtXyOObP3/+smXLTp06FTzx1KlTy5Yte+CBB3QGCwDxxtW+l7LisZQnFrOff2pG+S+99NJ111330UcfjR07NpZL0OStpOeee27fvn133XVXY2OjeBJAa2trXl7e4sWLFZtOAEA/puU4t7dWfM3veK135KXEHuF4+qFDh5566imfzzdlypSenp78/Pwbb7xx2bJl11133d/+9rc9e/akpqaeOHHC5XI1NzdPmzatuLh46NChhJCBAweq345RncJY0tVXX/32228TQpqbmwkh4moAIHEx589d8LajXYiUkrZv337HHXfccsstW7duDb19yogRIxYtWvS9731v5cqVaWlpc+fOffXVVwkhO3bsqKmp2bFjh+5Q1TqWQ4cORT4CIIQMPnJs8JFj8Y5Cv8Dwb++oHfh/+ULW4IiL3HPPPW+88UZZWVlKSoo00efziS+GDx9OCHE6nXl5eU6nU5y+YsWKV155Zfv27enp6bpDxXPcACJwHPyL+GLwkWOni0bGNxidHA7vvIXs4U+JJSVwRbGWQe6PPvpo5cqVWVlZEyZMmD17dltbGyHkwIED4W6J+9prr7W1tf3xj3+MMVKkJIB+QRiQ4f/etdrnHzRo0Ny5c51OZ3l5eXl5+c9+9rM//elPubm5Vqs1dOYhQ4bs2rVr37594l29586de/vtt+uLM+wDuF9++eW6urrf/OY327dvv/XWW/WVHhXc6DYquNFtMFNvdCt12QxvIpl0o9skvMZt6dKldXV1jY2NDMM8++yzBw8eXLVqVR9HBkCJrqvGmpT9IZRyl3LLli2vvPLKJZdcwnHcO++8s3Xr1j4OCwD6J+VWUm9vr9frFV97PB56Tto2rwkNADRQbiXNnTv3+uuv//rrr1evXj1x4sR77723j8NS5Dz0WbxDAABzKbeSKisrx44dW1tb6/f7f//73xcXF/dxWIo6x12BrASQ3JRbST09PR6PZ+TIkbm5uceOHaNtLAm9NoBklWBPKJElIwwtASSZBH5Cib4T/MWlkMIA6JTATyjRkVakLEbV9Uri9VNUhQQQL4n9hJIka+wk8CVUABdav3799u3bX3zxxbNnzx49evTkyZM//vGPs7OzIy7Yv55QcrpoJBojEAuNw5cUjnJ+2N7x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" alt=""/></p>

<h3>n = 10000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339562 285.2    8529671 455.6   8529671 455.6
Vcells 21392634 163.3   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 10000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.012963</td>
<td align="right">0.0130415</td>
<td align="right">0.0131632</td>
<td align="right">0.0130935</td>
<td align="right">0.0131750</td>
<td align="right">0.018478</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.020136</td>
<td align="right">0.0203890</td>
<td align="right">0.0206724</td>
<td align="right">0.0204945</td>
<td align="right">0.0206465</td>
<td align="right">0.034497</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.553344</td>
<td align="right">1.563394</td>
<td align="right">1.570472</td>
<td align="right">1.565242</td>
<td align="right">1.567097</td>
<td align="right">1.866923</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 10000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYYAAAEECAMAAAAbJmMEAAAC2VBMVEUAv8QICAgJCQkKCgoMDAwNDQ0PDw8REREUFBQVFRUaGhobGxscHBweHh4fHx8gICAhISEjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKysvLy8wMDAyMjIzMzM0NDQ2NjY3Nzc4ODg7Ozs8PDw9PT0+Pj5AQEBBQUFCQkJDQ0NERERFzdFGRkZHR0dISEhJSUlKz9JLS0tMTExNTU1Nz9NOTk5PT09QUFBRUVFTU1NUVFRU0dRVVVVWVlZZWVlbW1tcXFxdXV1eXl5fX19gYGBhYWFjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBycnJ0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSWlpaXl5eYmJidnZ2enp6fn5+goKCg4OKh4eKioqKjo6OkpKSlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6wsLCxsbGx5eaysrKzs7O0tLS1tbW2tra4uLi55ue6urq7u7u8vLy9vb2+vr6/v7/AwMDBwcHCwsLDw8PExMTFxcXGxsbG6OnIyMjJycnKysrLy8vMzMzM6uvPz8/Q0NDR0dHS6+zT09PU1NTW1tbX19fY2NjZ2dnc3Nzd3d3f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojo8PDp6enp8PDq6urr6+vs7Ozt7e3u1NLu7u7v7+/w8PDxtrLxt7PxuLTx8fHyqqXyq6bysKzysa3yt7Py6Ojy6ejy8PDy8vLz19Xz3dvz4+Lz6unz8/P0mpP0wr/0ycb09PT1jYb1sq31tK/1ubX19fX2l5H29vb39/f4dm34+Pj5+fn6+vr7+/v8/Pz9/f3+7ez+/v7////tvKTPAAANM0lEQVR4nO2djX8URx3Go9VatZVCS6BF0iJUMbZERKDEYrWKtrZoCw1NKuGtiFSkIEJJAaVpibyIUqDKW8WTlqCiFQrISxGs7MUEMa1vPV+ixpfz7nJvzfwF7u3u7M7e7c7s7d7eLfA8nw+3L8/O/H4739uXY3YzVQQKgKoqnQCUEzAEQsAQCAFDIOQcQ6xXV6qXrzjf7hP4AjuaFPgxvt8n8AXhY33sQtkxdEpUYRKWeApHubYU7+X7Mb7dmeX7XRG+nxL4gvDdKTYXYLATMGg+MAADMFAfGIABGKgPDGXB8MbvJOnCr20TBYbyYCAXXv3Na/aJAkOZMIT//i9OosBQJgx/eO3Cq/aJAkNJMKQfm7eaTjobm5b252N44/eS9FtcGyR/MXx/HfniKW3yjR3k0aP5GHCnpOfiI4ZV+0nbbm1yJiZ9PkzImUOHpC5d5HwXT+fjXLsrKfD7+HYkK/CjfD/d6yl8b5pZ6PYRw4pjZMcWOumb8XCckJXjxx/P6CIZvvoFdtZT8awgfFZUvcfwrJ/yEcOqdvVoyE3k68KKncpanJRUle/asJ4sOqlNlh0mT+0GBkblu1NaumgNObJcmZycMXtRChgYBeh3AzDQXIDBTsCg+cAADMBAfWAABmCgPjAAAzBQHxiAARioDwzAAAzUBwZgAAbqAwMwAAP1gQEYgIH6wAAMwEB9YAAGYKA+MAADMFAfGIABGKgPDMBwiWPoiehi5y3U08e1IymBn+Tbvf0CP8b3MwJfED6WYRZ6yo6h23jHxee3fQS232/7CMKX7W0fa+GkpArXBm3XgUERMBi5AIOdgEHzgQEYgIH6wAAMwEB9YAAGYKA+MAADMFAfGIABGKgPDMAADNQHBmC47DAkEtaJAkM5MSQSNhyAARguOww4KQUDg52AIagYTOevQGCwO5Rlh1/84sAgN7iBge5rokgMzNaFF6CSYLC9sFkENCu4GNjEE9oOKp90l4rEwG6uzNN/6q5nC6KqvjZjxsBkkGDWJBLmIEaOxmprVMHDoO2KaQe0/UtQGe2kF5AxqEt5O2i0t1ETWymtIqvXxaRhBOxKmAGxnl4ry8HIuBCDvkovHTgMdN+YbI0vmhmDqTXtmsbaZqosqDzB5pHIw2iFgS1pEVUpol+a7IIyX59yDaMRbW6an7TBwHxv2a+8JYeEEIONTAeKTYuYl7tMbWU+MrUpu1DQugkbhgUb+oyBHUZj60by9A47DFLC8oZDvkRbtZRk3ZLsGrtzmiFO0+kYIvklzRvKl+gEc460qkvAoTwY2GE0joTJlucIiXd3d4SpOogxb6WOmD4r51zoazujTtU1xrw8iatTu+q7skYdpo20xfM9BWFNi6lIQSZhti62WiNVut5cdZePGEzDaJD2pighC4cPP1aiiDkl1M9EwlstHssrVZBEQTJ51dLFhEW8jNcENImG0SDrl/Sqa/ErWlVFhtHYt4quBQZVFRlGY+UDjY17gYFR4H432AkYgAEYdB8YgAEYqA8MJmU6nGLIbn647ramb2adYaiSxUn0ssaw+NrBc8iqO8kLN2da7q9/3z3J0OQbFjrEsH3svM2HX/rWI2O3A4M3DLtqOiJ1reTWLTU/Iy0De8mUx0NXOvj/BxXDWm1sy/Rapxh4iV7OGGYNrK0dMo0cf9sCQlruJ+TZO0J1Ygqma0M/d0tcG1TxMSxcJF8L0uTFq6bKGD5LyNZJofoiMOycRia+ZTUwiMPzMbQPi6RGb0zfdKBmL2l557n0h1YUhWHgjn1jTg8CBnF4wSV66eBrGsi8h8gPh8ZbJowY8OlkURiuJjNbyLuAQRze+Q1rS7MDAGYMY+8a0DV7BDCIw/uK4fzjB8m8nwODOLyvv6L7trW2trYBgzi8rxjqJk2fPv1BYBCH9xXDBOGWwKDKVwwN25OZDLeDGxhU+YvhTVfLAgZxeD6Gwj8YWhSG90RFWwKDKl8xTOkDBmfhfcUw4apxEydOBAZxeF8xhBQBgzi8jxhidDFmuyEwaHKG4XU+hu7aW8axba1iuGfu2dzk7Ny7gaEkGP6dSPyDh2HFo2TOEwUYSKhuyKhRQ+p4ZyVgUOUEw59zjx3/icGw//ZxK7+ylcwNrfnUtDsa79z4wstk2VOFGGSdOsVhAAy6nGD4Zw7DXxgMMzekW1UMXyKjjr5ST8gzo9i/do8HZIoN7wTDH2UK/3udwXDiY+9fL2NoDq1pI2MyvRPJgo+bXo3A+A3FhueP36BdEP76n//+jb02rD0VG7biSVJLMWxqMBfDaCbFhuePZlK4vbJ6+/iPzj753olTDqgYPjP1xpEj11lhaJ2W3sTFgJOSKl9/vs2uG5IZ/RAwiMP7iuH6nlqSwiMBDsL7imFAZy2JVAODOLyvGL5cM3DRjcuAQRzeVwxk16yFB7hbAoMqXzHgyQyn4X3FUOyTGbxnuoHBNYYin8ygbzhYwjBhsOBVKQxazrYYtFQriaHIJzOqFEnahO6gpM1HjaanvraJsj2LoUp/ZaWKXVPFGEbN2q5n2UYzbaAUUTDo4SRtRjJSjSh1GdXTr5Q2zcNA06FJ+ouhyCczqkQyNWqe8jEYLWYUt6/YYlZrQ/OiuLZCDIUb5C8E7MkM22Yy76OlVYCBaTjT0SAKYZ6TLAwHKTLHssUG+QvOMHz7wx953g2Gop/MqLJPnt3FgnaWWNM46CXDqoqZi+ZXzIQwzZqOLqsyUt46JgWbgPQopZs4xfDTXOFfMRjyu33sMLh/MsPYa7pD5jsllpc2MV+iTdByH+zJucooSGc6rSjm5cO0qcT6uVn7OyW1QIz57ljICYav5Uo/z2Ao7PaxxoAnM5yGd4LhRzkMv2QwFHT7WGKoOV6vCBjE4R1dG77+gQ9+h7025Hf7WGNoi+BocBre1Z1SfrePNQZCpuY+PgEM4vA+3rBWV19RXV09qAYYxOF9xBAOT879HUW83+AgvL//0S0UMKgCBm3XgUERMBi5OG4+YMgTMKgCBmAABipgAIaLBwM7jAYh8+PAwKp8fyqdGUajp2EcMJhUNgzsMBokOxMYTCobBvMwGs05DCvHjz+e0UUyfPUL7Kyn4llB+Kyoeo/hWT/lIwbTMBoqhjOHDknGOy4+v+3Tx7f9fttHEJ7/tk8JMbDDaGgYCE5KVBUZRgMY8oXfDdquA4MiYDByAQY7AYPmAwMwAAP1gQEYgIH6wAAMwEB9YAAGYKA+MAADMFAfGIABGKgPDMAADNQHBmAABuoDAzAAA/WBARiAgfrAAAzAQH1gAAZgoD4wAMMljiFmiJ23Uopvp0U+3+7rF/hJvp8V+ILwySy7VHYMOBpU4aSk7TowKAIGIxdgsBMwaD4wAAMwUB8YgAEYqA8MwAAM1AcGYAAG6gMDMAAD9YEBGICB+sAADMBAfWAABmCgPjAAAzBQHxiAARioDwzAAAzUBwZguGQwsMNoaPPAoKsiw2ho88CgqyLDaGjzwKCrIsNoaPPr7rvv5ZQukuIrw7ezIp9vp/sFvqD6fm/hM2z4pI8Y2GE0tPkfb9p0tkcX6eGqN8n3UyKfb0f7BX6c72cEviB8PMMs9PqIgR1GQ5snOClRVWQYDW0sDWDQhd8N2q4DgyJgMHIBBjsBg+YDAzAAA/WBwT8M5zupOk52ctUV5ftnX+H7Mb4dFoTv7uH7v5A8hZdOMwvny47BUHJ43FPMBas9FT86xlNxcu9OT8X33O0tvKWAoVgFBkN6gbeBYbf9wFPxc8s8FSethz0VP7LWW3hLucEAlVzAEAi5wGD0i7pQtLlpflK6q6HhtKviSkkPCWxoaLh3lfvw8+P5XcMlkgsMRr+oC23dSJ7ecajNbXGlpKcEyIozbsP3NIyL53cNl0guMBj9oi50JEy2PLdnyfI97oorJT0lcOIJ4jp8dmY8v2u4RHKBQesXdav2puj+70rNP3FVWCnpKYHHIsR9+Oa4qWu4dHJzNLR7+SqsX6J0HO7e4LaC3Ru8JND7BeIhvIyB7RoundxcG/R+URfat0r+ePogWRNyVVwp6SWB723xEl7GkNc1XCK5uVPS+0VdaOUDjY17zzU1L826Kq6U9JLA4pNaJa5KyxjyuoZLJPxuCISAIRAChkAIGAIhYAiEgCEQCj6GtppwdcFKeVVbTQWS8UvBxxA5zmDIdKhTeVXkeIUS8kPBxxCqn3zFVLL42sFzSGjyDQv7P/eOodP65VWhejJn4KB5JHTnjNsnl+rJ6krpYsAgf/V31XRE6lpDVx4jL96WSl33krwqVL9tRDR607OhN3eS8ZsrnaVHXSQYZg2srR0yLVQnL5/bNuetBxUMM1YS8tWm0GhCprvuwAiILhIMCxfJ14W0fB4i+4Yubr9FxdDQQsjyGbmVwOC7ZAyDSPuwSGr0xlyLP9JITrz9gLwqVP/MyHjs5m3AUBaF6jM1nyRLB1/TQHItfvTWd0+aO1ZeJS80X3/dHGXlgxsrnaVHBR/DZSFgCISAIRAChkAIGAIhYAiEgCEQAoZA6P8g0oz12o7TlQAAAABJRU5ErkJggg==" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339687 285.2    8529671 455.6   8529671 455.6
Vcells 21393687 163.3   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.009948</td>
<td align="right">0.0103690</td>
<td align="right">0.0111516</td>
<td align="right">0.010542</td>
<td align="right">0.0107875</td>
<td align="right">0.040533</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.015721</td>
<td align="right">0.0161145</td>
<td align="right">0.0166822</td>
<td align="right">0.016340</td>
<td align="right">0.0166380</td>
<td align="right">0.032135</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.580318</td>
<td align="right">1.554104</td>
<td align="right">1.495953</td>
<td align="right">1.549991</td>
<td align="right">1.542341</td>
<td align="right">0.7928108</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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8vLy9PT0cFdQWEdHh3c909LS2G/z2traEydOEEIcDkd+fv7tt9/OflM/8cQTFRUVBoMBOaADcjPv8OHDu3fvdrvdGzZs+OKLL8JdnSBee+212tpat9u9a9eud955529/+9uePXvCXangfOoZWW1eU1Nz9uxZxpu6u7u7oqLi9ttv7+npcfu1cGQ1uKoiYOAWWelxrVZrcXExISQ+Pl6v1587d+7MmTM1NTV1dXVhrpkon3pGUJu3trbGxcVdeeWVjDd1fHz8xo0bp0yZQj8iB3QgERCSBNPjMis7OzslJaW+vv7o0aN5eXlGozEnJ2fRokUHDx786KOPwl27gHzqGUFtXltb+53vfIf4HUK46yWA3ilK/y8lB/TIFAFzSYLpcVm2b9++tra2NWvWGI3G/Px8unDGjBlNTU2eP5Ks8alnpLT5pUuXenp6EhISiN8hMNvUlJQc0CNTBPSSaPJcQkhra2tWVla4qxPEsWPHHA5HeXk5fbhh9+7dDQ0NhJDW1tYxY8aEu3YB+dQzUtr8r3/9qyf0REpTUz4tHCkNPgwi4L4knudrampcLldaWtrixYvDXZ0gtm/f/umnn8bFxRFCbrvttkmTJm3evFmn06WkpPz0pz9l9nml8+fPe9dzcHAwItp806ZN3/3ud+ndhj6HwGZTr127dvXq1fQbN+8WjqyTXFUREJIAYORg8S8JAIxYCEkAwBCEJABgCEISADAEIQkAGIKQFM327t2bl5dns9muvvpqGZt7NqTlKF07AAERcPc2yDZnzpyCgoKgqw0MDFy8eDE5OXmI5QAMHXpJ0eyjjz6qqKh46KGHWltbly5dSgjZtGmTxWKZNGnSunXrCCFHjhwpKSmZOnXqM88843a7H3744bFjx06ePHnZsmVut9uzIS2HELJu3Tp6q/Fjjz1GN7/nnntWrlx55513lpSUqPSWahhZwpuIAFT1/vvv33XXXR0dHZMmTXK73QcPHszNzbXZbF1dXbNnz96xY8f7779/xRVX/OMf/3C73R9//PGtt97a39/f399vtVo/++wzz4a0nNdff72goODSpUuXLl3Kz89/880333///bi4uM7OTrfbPW/evJdffjm8xwtRAAO3EaSurs5ut9NXj7S3t9fX10+YMKGoqIimxcjJyfnDH/7wzjvvnDx58ssvv+zt7fXffPHixUajkRByzz331NXVzZ07t7CwMCkpiRBisVj8NwEIFULSCGI0GsvKylasWEEIGRgYcLvdJ06c8Lz77NixY/fff/9999132223vffee/6bu91uT24NjUYzMDBACBGZgQKQAXNJIwLP84SQm2++edeuXd3d3S6X65ZbbnnllVe81/nzn/9Mc8WOHj36008/dblcng2pb33rWzt27Ojt7e3p6dmxYwfNVAegLISk6JeYmJiYmHjvvffm5eUtXrw4Ly8vKyvr2muvXbhwofdqd99994cffnjdddc98sgjS5cuXbdunWdDusLcuXOLi4unTp06derUWbNmzZkzx3tzjuPUeEEujDTIBAAADEEvCQAYgpAEAAxBSAIAhiAkAQBDEJIAgCEISQDAEIQkAGDI/wfyOEI53nq3ywAAAABJRU5ErkJggg==" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339753 285.2    8529671 455.6   8529671 455.6
Vcells 21395661 163.3   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.016865</td>
<td align="right">0.0176325</td>
<td align="right">0.0188636</td>
<td align="right">0.018211</td>
<td align="right">0.0186700</td>
<td align="right">0.037426</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.026689</td>
<td align="right">0.0273155</td>
<td align="right">0.0285793</td>
<td align="right">0.028219</td>
<td align="right">0.0286755</td>
<td align="right">0.042925</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.582508</td>
<td align="right">1.549156</td>
<td align="right">1.515051</td>
<td align="right">1.549558</td>
<td align="right">1.535913</td>
<td align="right">1.14693</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339816 285.2    8529671 455.6   8529671 455.6
Vcells 21397703 163.3   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.030188</td>
<td align="right">0.0312015</td>
<td align="right">0.0328614</td>
<td align="right">0.0323760</td>
<td align="right">0.0331525</td>
<td align="right">0.066086</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.046036</td>
<td align="right">0.0479720</td>
<td align="right">0.0504642</td>
<td align="right">0.0499225</td>
<td align="right">0.0518280</td>
<td align="right">0.069338</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.524977</td>
<td align="right">1.53749</td>
<td align="right">1.535669</td>
<td align="right">1.54196</td>
<td align="right">1.563321</td>
<td align="right">1.049209</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h3>n = 100000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339814 285.2    8529671 455.6   8529671 455.6
Vcells 21397327 163.3   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 100000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.097902</td>
<td align="right">0.101419</td>
<td align="right">0.1110586</td>
<td align="right">0.108645</td>
<td align="right">0.1172055</td>
<td align="right">0.138381</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.132707</td>
<td align="right">0.137319</td>
<td align="right">0.1486058</td>
<td align="right">0.142150</td>
<td align="right">0.1585965</td>
<td align="right">0.207001</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.355509</td>
<td align="right">1.353977</td>
<td align="right">1.338084</td>
<td align="right">1.30839</td>
<td align="right">1.353149</td>
<td align="right">1.495877</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 100000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5339939 285.2    8529671 455.6   8529671 455.6
Vcells 21403781 163.3   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.072930</td>
<td align="right">0.0779365</td>
<td align="right">0.0829905</td>
<td align="right">0.0811135</td>
<td align="right">0.087062</td>
<td align="right">0.129356</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.098074</td>
<td align="right">0.1053360</td>
<td align="right">0.1133689</td>
<td align="right">0.1097675</td>
<td align="right">0.119640</td>
<td align="right">0.182286</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.344769</td>
<td align="right">1.351562</td>
<td align="right">1.366047</td>
<td align="right">1.353258</td>
<td align="right">1.374193</td>
<td align="right">1.409181</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5340005 285.2    8529671 455.6   8529671 455.6
Vcells 21413830 163.4   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.124989</td>
<td align="right">0.1334660</td>
<td align="right">0.1470526</td>
<td align="right">0.1424240</td>
<td align="right">0.1551605</td>
<td align="right">0.237338</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.175266</td>
<td align="right">0.1867355</td>
<td align="right">0.2031613</td>
<td align="right">0.1930095</td>
<td align="right">0.2183635</td>
<td align="right">0.266677</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.402251</td>
<td align="right">1.399124</td>
<td align="right">1.381555</td>
<td align="right">1.355175</td>
<td align="right">1.407339</td>
<td align="right">1.123617</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 100000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5340068 285.2    8529671 455.6   8529671 455.6
Vcells 21434970 163.6   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.201214</td>
<td align="right">0.2172525</td>
<td align="right">0.2546372</td>
<td align="right">0.2445735</td>
<td align="right">0.287387</td>
<td align="right">0.385431</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">0.293808</td>
<td align="right">0.3306700</td>
<td align="right">0.3769303</td>
<td align="right">0.3700465</td>
<td align="right">0.419070</td>
<td align="right">0.529244</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.460177</td>
<td align="right">1.522054</td>
<td align="right">1.480264</td>
<td align="right">1.513028</td>
<td align="right">1.458208</td>
<td align="right">1.373123</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 100000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h3>n = 1000000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5340066 285.2    8529671 455.6   8529671 455.6
Vcells 21434594 163.6   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 1000000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">0.850235</td>
<td align="right">0.8728215</td>
<td align="right">0.9497212</td>
<td align="right">0.905692</td>
<td align="right">0.977403</td>
<td align="right">1.411579</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.105976</td>
<td align="right">1.1242015</td>
<td align="right">1.2118393</td>
<td align="right">1.165135</td>
<td align="right">1.211707</td>
<td align="right">1.888446</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.300789</td>
<td align="right">1.288008</td>
<td align="right">1.275995</td>
<td align="right">1.286458</td>
<td align="right">1.239721</td>
<td align="right">1.337825</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 1000000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5340191 285.2    8529671 455.6   8529671 455.6
Vcells 21495047 164.0   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">0.936315</td>
<td align="right">1.001854</td>
<td align="right">1.262010</td>
<td align="right">1.373705</td>
<td align="right">1.494080</td>
<td align="right">1.930367</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.093936</td>
<td align="right">1.151403</td>
<td align="right">1.565472</td>
<td align="right">1.574640</td>
<td align="right">1.653115</td>
<td align="right">14.715051</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.168342</td>
<td align="right">1.149272</td>
<td align="right">1.240459</td>
<td align="right">1.146272</td>
<td align="right">1.106443</td>
<td align="right">7.622929</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5340257 285.3    8529671 455.6   8529671 455.6
Vcells 21595096 164.8   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.516914</td>
<td align="right">1.676809</td>
<td align="right">2.123159</td>
<td align="right">2.319498</td>
<td align="right">2.429150</td>
<td align="right">2.737486</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.910090</td>
<td align="right">2.077495</td>
<td align="right">2.720005</td>
<td align="right">2.640342</td>
<td align="right">2.787462</td>
<td align="right">14.416758</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.259195</td>
<td align="right">1.238958</td>
<td align="right">1.281113</td>
<td align="right">1.138324</td>
<td align="right">1.147505</td>
<td align="right">5.266423</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYYAAAEECAIAAACjmgRhAAAgAElEQVR4nO3de3xT5f0H8OfknKS5tLS1Ui7KZZVCQUYRKSIOxkuYtIBoQVfnnHhH7EtBBkwHclOpwHA4xCGvqdvkOhgoMtEfIpXLADsvKE465oaFcrMlQtPm0qT5/fHMs+zk5CRN8iRPcj7vV/9I0uTJ9zk5+eZ5Tp6cr+D3+wkAAB8MyQ4AAOC/kJIAgCNISQDAEaQkAOCIxKhdp9PZ1tamcQej0ej1etkdXDcYDH6/n137oigSQnw+H6P26VOwa18QBEmSWltbGbVPGMdPdLMLGQwGi8XCKAYOsUpJLpdLe1ubzeaWlhav18soAIvF4na7tdNiLKxWqyAITqeTUfsGgyEjI4Nd+5Ikmc3mS5cuMWqfEGKz2djFTwgxm81Op5NdVjWbza2treyyaoS7kCiKukpJmLgBAEeQkgCAI0hJAMARpCQA4AhSEgBwJNaUdOTIkV//+tdxCQUAIKaU1NLSsmHDBvxwN0aGb+2mAx/Qy6aag+L5s8mNJ7kEpzNjz/8Rv58QYvz8U7HuRLIjgoSKaV3SH/7wh9tuu23v3r3yLYcOHaqtrSWElJaWZmZmajyWrrsxGo2xBKDBaDQKgsAuXdLI47NgxGIxnPjKuH8PycwibpfY43vku6WMcWg8BIPBIAgC0wUvkiRF077FInS5IvP9d9q6djOcP+MrGUoEQfWOgiBkZGSw20pGo1EURXZL2yRJiuQlEEJ0P11F/3LW1NR06tSpe/fugTd+++239fX1hJC2tja6OFWDKIrsNrfBYBBFkV1KopGH7WOkfjBSWP97/9f/JlMeE79rn3YhPu0HiXP8IZ4iyvYHX0dOfi0e2uev/LloCDmQp5so+vjCoe0z3UWj30TpK/pxxJw5c8xms9frPXnyZEVFxZgxYwL/a7fbtZe95ubmNjU1pfrq7ebm5ri0Zqo5KDQ7/JlZgqPJPfJHJCGrtzt06HDhwgVG7RNCbDZbdNvH+Pkn4ul6X9crxPpTrjHjQ42ScnNzHQ5Hqq/eDruJRFHMzc1lFAOHoh8lPfvss4SQ8+fPr127VpGPoF0M39qFVg/NRKa/HRLPn/Xld052UEkjOFsMjQ2um8YRQSCCQTx5wtf9e8kOChKH4dEKiFBbTq572A/pZc/gockNJun8FivNzoSQ1v7FyQ0GEi/WqXh+fv6MGTPiEgoAAJZKAgBHkJIAgCNISQDAEaQkAOAIUhIAcAQpCQA4gpQEABxBSgIAjiAlAQBHkJIAgCNISQDAEaQkAOAIUhIAcAQpCQA4gpQEABxBSgIAjiAlAQBHkJIAgCNISQDAEVblAMIW2EpAnTLWdeIIyzporLcP6/hJLHXcIsZ6EyWgTlzY+JnGwCFWKUmSpLAV4iRJYre5aV1JdqUlaV1AdtV66f7Krn3W8dOnYNo+LQjM7lOHJgt2pQDpR2bYTYRqt/Hh8Xi0a/JZLBaPx8OutKQgCExLS9K3tMvlYtc+IYRd+5Ikmc1mdu0TQkRRZNo+3YXYlZYkhDAtLRnhLiSKos1mYxQDh/Q1JgQAziElAQBHkJIikrVsUbJDANAFpKTwaD5CVgJIAKQkAOAIUhIAcITVIoB00jRrXrJDANALjJIAgCNISQDAEaQkAOAIUhIAcAQpCQA4gpQEABxBSgIAjiAlAQBH0n+ppPzbNKx4BOCfjkZJ+N0sAP90lJIwSgLgX/qnJJqJkI8AUkL6pySCfASQOqI/vG2325csWSIIQqdOnaZNm8Z/HQUc5wbgX/SjpF27do0ePbqqqsrtdv/rX/+KY0ws4Ng2QEqIfpQ0YsSI7OzshoaGS5cu5eTk0BtPnDhx/vx5QkhBQYF2gaoEFOEyGo2qRZPiUlyMFvliWmeNdoFR+6zjJwmp48a0dCVtnF2pQVq6MuwmQmnJSHXu3Nntdi9dulSSJLnOVHV19e7duwkhixcvlvOUKkEQLBYL09KPkhTQu2ef982ZQQgRn33eRgi9TK9G3T5hXC1W2YW4oqUrmRYIY1qKliRkF2JdnZQQEvYlYFeLkE9C1Fvc7/fTMc6qVauKiopGjRoV+F+73a5dky83N7epqYldaUmLxRKqtGTwJC6Ko0tWq1UQhObm5ijjC8dgMGRkZDidTkbtS5LUoUOHCxcuMGqfEGKz2dhtH0JIbm6uw+FgV1rSbDYzLS0Z4S4kimJubi6jGDgU/Zhw5cqVx44dI4Tk5uam+tgy9iNNWcsW0b+4xAOgW9GnkvLy8ldffXX+/Pn19fU/+MEP4hgTa6pjoliyCTIRQLxEf6iiW7duS5cujWMoidQ0ax7ySCh6Xi1B+67DjvMjtSdcCRZqdibvwWmwKwf2Tm9ZW+6v3jrOlfQ/E0BY2nlE/tjU3k3TIBlBIPpytz6xMNmB6I5+U1JgEglMN6q36+RjM7ibWcsWIdvKMK1LAEzclO9DnWSfCOnq7dc0ax79U/2v3j6fkkW/o6RQAvfIUPO1/974v7tv4IHhVDxILIet8aVkCnWHKcXWSMWXm0/RL5XUxvNSyWCR70/ayyxDfX5G2Gzg3XhYKhkYVai5rYb0WyoZyfgo8pSEpZKqMHEj5LsRO/nuO7V2PTbsQyJPc1zNCAKj4iqwJAo1s8PIKI4wcVOhcUw3eKAuXzWXVZCyCtfOTWFbo481l1XQq664BJ1wep6qBM/ogwfLOtwscYGUFB9yflEV4fdWfO7EqsfFQi1f4rMLLMjDatXPG6LvlB0LHEv6H5F/5221WsWFT9DL9CEdj9bSq3SgpPggDT4iQwIS2Tf9+yja5+FYkraws7m2BUvS7FhSJFQ3i+pOhWNJqpCSokT3J8OCX0SSwqI47M1/SiLhspI+UxKJOCshJanSy+Htjkdr5VFMHEWdjzTWv6Qi1e4YFvxC+1HpeuBcdWukZU9Z0MUoKTAZBU+RotOu8yVpHAoNJSVGSaoiPLQU+xEobkdJgRTdDDzAhFGSKqSkKOEUbhpUj+yGenMq0H9FkqRSIiWRCMZH2p1FSooPrlIS+S4rxSsfEaSkCGjkINWD/cG036upkpJk0a2k1VtK0suxpG/69/mmfx96RInFQSVoF32u3NH+DR1QeklJCshKiaRRcDjsv9KeTroZOb1M3ChFJoplHidP3OQ24zgrJGkxcVP9jZvGAsL2Dp3iNXEL9QoyLQdAOxvJOgm9TdywejtuOh6tjW9WSoDEx6yRcZIyXgj8lErk1vjPN26JebKUkuSUlOBF9ymXMpgS9x4kqZlJ2Ylka7D4AhdkrCZuYWccZrPZ88Q0+WrbgiXxDUCSJJ/Px64uIC1SSmcN1sMfE0JarhsUx/ZpKVdGE1sacKD4Bk8ZjUZ2X4cRugt5PLEv0FfdGoE3KjaOxr/ahVZ7jmQTWSyWqJ8l5bAaJblcLu1JuMlkCrwa92/TY/lBSSSHhwIXAdC7xbcL7I4lqR7aD3ybxeuTn/X5kkwmk8vlijHryatDAjeLIklZD38capvE0sHIl0rqKiUl8xs355M8FsNQHFwIfgPTG20ffpLYuBJH4+vINFtFIXeEztciycWBH1eYtbGQtJQk7TuU++kX2uf0SIrg/SzUOzB4wB+dBL/D2/VGCpWA0iYrRUj1k4mkXY4mhPh8Pqbfw4alkpLa2trefPPNX/7yl2PHji0tLX3yySe3bdvG7if1vIl894ruOIK8EwfuzQnbp+VntA+82jfietX0JN8YOIgI9Z5MaXJPgy8QQpoGF18o7idfVWwExabjLUMtX768oKCgqKhowYIFhJDXXnvtrrvuIoQcPnx46NChPp/v5Zdffuyxx26//fYbb7xxypQpHo/nwIEDFRUVxcXFa9asSWLkymNJO3fuXLVq1ZAhQ6677rq7775bEITa2tojR4688sorlZWVZWVlcY/AXFbBzwBYdWdShEevWq3WSNpR3XF5kPvpF74R15PYjhwFfj/FaH0Wa8HRho0/1B2StZ4g2Pvvv79x48a//e1vRqOxoqJi3bp1995778aNG996661Fixb9/ve/F0WREPL2228fOXLEZrPdd999r7zyyoABA959992PP/64oKAgWZGT4JTU0NCwbds2+nUS1adPnwkTJni93g0bNsTxib3DhzJdKhkvUexY/OSdGCkO+qreQtKov6pUuxzhf5O1XKC6utput1dUVBBC6uvra2pqfvrTn65Zs+aaa66ZOXPm1VdfTe82duxYm81GCKmoqKApadiwYcnNRyQ4Jf3sZz9T3OL3+wVBkCQp+F/pJ3APY7EPqb7J4/4sYQP4pn8fSYroy9ZQAat+UZWutPeKUBtBcWMix01Wq3XKlCmzZs0ihMhLYZqamkRRrK+vl+8mH43xer30Ms1QyaW+X+7evfutt95asWJFeXn5e++9t3LlynvuuYdpHPycvzn2/UbeR1V31qTPa9obgPbxJm1ps6pQO/jANE3CJakEbIdRo0Y99NBDDz/8sNlsLi0tfeSRR2655Zb7779/586dU6dO3bdv3/Dhwwkhb7zxxvz583Nzc1evXl1aWso6qgipf+M2ZcqU8ePHHzx40OVy1dbWPvvsswkOK9VpfEOcrsMK2uWUzjsxon0PPvKY+OOJJSUlkydPLikp6dWr16BBgyZNmrR48eKRI0cOHjx49erVDz/8sMvlIoQMHjx4woQJhYWFnTt3fvDBB1lHFSH1UZLb7R49evTcuXNvvfXWrl27Ml2DCylNzzkoWOA3dxoztQRM4qZPnz59+nT56rx5/5l5XHvttV988QW9/P3vf/+NN96Q73PD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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 1000000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5340320 285.3    8529671 455.6   8529671 455.6
Vcells 21795138 166.3   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">2.404899</td>
<td align="right">2.529921</td>
<td align="right">2.855942</td>
<td align="right">2.616100</td>
<td align="right">2.806102</td>
<td align="right">8.765525</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">3.185238</td>
<td align="right">3.322214</td>
<td align="right">3.746452</td>
<td align="right">3.559729</td>
<td align="right">3.848832</td>
<td align="right">9.719662</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.324479</td>
<td align="right">1.313169</td>
<td align="right">1.311809</td>
<td align="right">1.360701</td>
<td align="right">1.371594</td>
<td align="right">1.108851</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 1000000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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yfzCQQNTKxMF/mDI7zN4EDJF43FJcfrwa8Xjg1Qf2RThHPWRrJdSH1mE2ypmQxn9gvFNFvFSj0tsTDTcrvv7mcToA4qwh6KzVkz0p2XQ8QGaN+jkO6I1Wbufzvqb/TaOKvuCka/cJR6PR8WLHgoEqSV5vd533333+PHjJ0+e9Hq9w4cPHzly5D333MPzVPJXnCYjz/Ln5HEAvlUVv7niSbiKjOoDFPwoSEOU7l5Wvcz4EuOR5WvXrt2wYYPBYJgxY0Z5efkbb7xRXV29adOm48ePL1iw4MiRI6+99trXX3996dKl5ubmvLy8l19+uba2dt26dV9//fWDDz745JOajXHxT0n79+/fsGHDyJEjb7nlloceeojjuDNnztTV1b3++uslJSVFRUWaRMkmb/nqoFdwO2saxFjgORD6lEierBGijZYYG+Gjjz7aunXrp59+qtfri4uLN2/ePHv27K1bt7777rsrV6588803BUEghOzbt6+urs5isTz88MOvv/76zTff/P7773/++ee5ubkaBu+fkpqamnbu3KnX6+V3Bg4cOGXKFLfbvWXLltjGBkr4nm+aT2bCrM66n2msKPa/STU1NVartbi4mBBy4cKF2traX/3qVxs3bhw+fHhZWdlNN/1wWWnSpEkWi4UQUlxcLKWk0aNHa5uPSGBK+vWvf+33jiiKHMfpdLrA/1JFnPZwB+qskyLEYjFg+/G5Y7FcKfiK/cY3m81z585dvHgxIcTj8UjDoW02myAIFy5ckBeTBxK73W7ptZShtBW8e6i6urq0tJQQMnXq1G7dur355psxDSr+dXatN8ZTZDDVr8yy0Nfm4667c9y4cZWVlTabzeVy3Xnnnbt373a73b/5zW/2799/4sSJQ4cOSYvt2rXrypUrbre7oqLipz/9qbYxy4IPApg7d25FRcXRo0cdDseZM2fuuOOOWbNmxTawBKFVOohyvdf9/UzC1F6jJOWj+NoghYWFM2fOLCwstNvt999///Tp01euXDl27NiCgoKKioqHHnros88+I4QUFBRMmTKlsbFx/PjxjzzySG1trdaBE9LZPW59+vQ5f/78U0891adPn7lz5/br1+/cuXNdKjfen3YbVgI/DiDwhkFlEuNpt93r/iH9qXpK0vYet1dffbWhoeGZZyKaljOWgteS8vPzZ86cefDgwS+++GL58uU9e/aM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" alt=""/></p>

<h3>n = 10000000 vector</h3>

<h4>All elements</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5340318 285.3    8529671 455.6   8529671 455.6
Vcells 21794762 166.3   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x), sum = sum(x), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum() on n = 10000000+all data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">9.681279</td>
<td align="right">9.929535</td>
<td align="right">10.14037</td>
<td align="right">10.07972</td>
<td align="right">10.22335</td>
<td align="right">14.11726</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">12.193736</td>
<td align="right">12.357595</td>
<td align="right">12.61751</td>
<td align="right">12.47128</td>
<td align="right">12.69246</td>
<td align="right">15.71873</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.00000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.259517</td>
<td align="right">1.244529</td>
<td align="right">1.244284</td>
<td align="right">1.237265</td>
<td align="right">1.241517</td>
<td align="right">1.11344</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum() on n = 10000000+all data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 20% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.2
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5340443 285.3    8529671 455.6   8529671 455.6
Vcells 22395215 170.9   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.2 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">11.80129</td>
<td align="right">16.07928</td>
<td align="right">20.19376</td>
<td align="right">16.34097</td>
<td align="right">16.81130</td>
<td align="right">384.22761</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">12.30583</td>
<td align="right">16.89651</td>
<td align="right">17.54230</td>
<td align="right">17.44373</td>
<td align="right">18.11617</td>
<td align="right">27.93323</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.042753</td>
<td align="right">1.050825</td>
<td align="right">0.8686989</td>
<td align="right">1.067485</td>
<td align="right">1.077619</td>
<td align="right">0.0726997</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.2 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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UQ1e2qlidM1zHKekfHqtbzb5TklxcXGVlZURDgUAwHebMCsrq6qqqqury/m9CIcFsQXj3kO4dNvlPGPGjH79+sn/PH/+fETigViFZMQOdU9cJiUlBZ6IPt8p6dixYy0tLXq9PsLRAEAv5/vCLTs7u7d1qgEAC3y3ki5fvjxw4MCxY8fKiWnXrl0RjApiT3jfxw29lu+UtGTJEukxYgCASPJMSZ2dnQkJCbfccov3pNKfIhIVAFDgchFqN162trbOnDmzq6urT58+FRUVqnOFZ0patGhRenr6ggUL+vfvL3/5zTffbN68ubGxMbojYALLcLHGOOHg+8KRg4QQx7QZrvybw17+a6+9dvvtty9btqysrGzHjh3z5s1TV45nSnrppZeOHj16//3319XVSTcBNDc3Z2ZmrlixwmfTCQDYxzWel/IRIUSz782unBtIQoDf00+ePPm73/3O4XAUFhbabLYhQ4ZMnTr1ySefvP322//5z38ePnw4MTHxwoULJpOpoaFh+vTpI0eOHDhwICGkb9++Op1Odag++pJuueWWt99+mxDS0NBACJGqoY07eFT+HNPDOfp8ZxzECoXvYY85XOvV//qnpU0MlJL27t17zz333H333RUVFd4D+2RnZy9duvTWW28tLy9PSkpauHDhG2+8QQjZt29fZWXlvn37VIfq78Jy4MCBkclHHqi+yCFp/ZrIvOMUb1JlQVCvw5Y2GdUNJ+1+kd83XIN/GFHb9aMhojE14CwPPvjgnj17Jk+eHBcXJ38pP5E3ePBgQojBYMjMzDQYDNL3a9euff311/fu3XvNNdeoDrV3PWQs7woR2Cd65Mk2vFQcn5E5nnvg6USvtz+yxHnrROekyc6Zs5V0cn/00Ufl5eVvvfXW2rVrNRqN2WwmhBw/fry76d98802z2fyXv/wlOTk5lEhZebWkOOEW+dotpi/ckIlUUHi55H5Gobqee+RGFPskO2+dpHz6fv36LVy40GAwFBUVFRUV3XfffX/9618zMjJ8DvDUv3///fv3Hz16dPz48YSQhQsXzp49W12c3aakbdu2nTp16tlnn927d++MGTPUlR4UFZlIdccN1X1OxU2DEeiBkqpg82CjF5X0piOFuxabKydapkyZ4v7exgMHDsifR44cKX2oqqoihBgMhs2bN4erXt/ttyeeeGLbtm3vvfcex3Evvvji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" alt=""/></p>

<h4>A 40% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.4
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5340509 285.3    8529671 455.6   8529671 455.6
Vcells 23396616 178.6   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.4 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">17.65581</td>
<td align="right">18.86862</td>
<td align="right">24.56920</td>
<td align="right">26.26744</td>
<td align="right">27.47351</td>
<td align="right">36.44340</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">19.86932</td>
<td align="right">21.30012</td>
<td align="right">26.66337</td>
<td align="right">28.62519</td>
<td align="right">30.88175</td>
<td align="right">33.18996</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.00000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.0000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.12537</td>
<td align="right">1.128865</td>
<td align="right">1.085236</td>
<td align="right">1.089759</td>
<td align="right">1.124056</td>
<td align="right">0.9107261</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.4 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h4>A 80% subset</h4>

<pre><code class="r">&gt; x &lt;- data[[&quot;n = 10000000&quot;]]
&gt; subset
[1] 0.8
&gt; idxs &lt;- sort(sample(length(x), size = subset * length(x), replace = FALSE))
&gt; gc()
           used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells  5340572 285.3    8529671 455.6   8529671 455.6
Vcells 25396658 193.8   49887852 380.7 101881463 777.3
&gt; stats &lt;- microbenchmark(sum2 = sum2(x, idxs = idxs), `sum+[()` = sum2_R(x, idxs = idxs), unit = &quot;ms&quot;)
</code></pre>

<p><em>Table: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.8 data. The top panel shows times in milliseconds and the bottom panel shows relative times.</em></p>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">29.59719</td>
<td align="right">31.11344</td>
<td align="right">38.8408</td>
<td align="right">39.11995</td>
<td align="right">45.29290</td>
<td align="right">50.06338</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">34.45029</td>
<td align="right">37.99091</td>
<td align="right">46.0696</td>
<td align="right">47.78903</td>
<td align="right">52.36147</td>
<td align="right">57.85133</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th align="left"></th>
<th align="left">expr</th>
<th align="right">min</th>
<th align="right">lq</th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">uq</th>
<th align="right">max</th>
</tr>
</thead><tbody>
<tr>
<td align="left">2</td>
<td align="left">sum+[()</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
<td align="right">1.000000</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">sum2</td>
<td align="right">1.163972</td>
<td align="right">1.221045</td>
<td align="right">1.186114</td>
<td align="right">1.221602</td>
<td align="right">1.156063</td>
<td align="right">1.155562</td>
</tr>
</tbody></table>

<p><em>Figure: Benchmarking of sum2() and sum+[()() on double+n = 10000000+0.8 data.  Outliers are displayed as crosses.  Times are in milliseconds.</em></p>

<p><img src="data:image/png;base64,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" alt=""/></p>

<h2>Appendix</h2>

<h3>Session information</h3>

<pre><code class="r">R version 4.1.1 Patched (2021-08-10 r80727)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 18.04.5 LTS

Matrix products: default
BLAS:   /home/hb/software/R-devel/R-4-1-branch/lib/R/lib/libRblas.so
LAPACK: /home/hb/software/R-devel/R-4-1-branch/lib/R/lib/libRlapack.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] microbenchmark_1.4-7   matrixStats_0.60.1     ggplot2_3.3.5         
[4] knitr_1.33             R.devices_2.17.0       R.utils_2.10.1        
[7] R.oo_1.24.0            R.methodsS3_1.8.1-9001 history_0.0.1-9000    

loaded via a namespace (and not attached):
 [1] Biobase_2.52.0          httr_1.4.2              splines_4.1.1          
 [4] bit64_4.0.5             network_1.17.1          assertthat_0.2.1       
 [7] highr_0.9               stats4_4.1.1            blob_1.2.2             
[10] GenomeInfoDbData_1.2.6  robustbase_0.93-8       pillar_1.6.2           
[13] RSQLite_2.2.8           lattice_0.20-44         glue_1.4.2             
[16] digest_0.6.27           XVector_0.32.0          colorspace_2.0-2       
[19] Matrix_1.3-4            XML_3.99-0.7            pkgconfig_2.0.3        
[22] zlibbioc_1.38.0         genefilter_1.74.0       purrr_0.3.4            
[25] ergm_4.1.2              xtable_1.8-4            scales_1.1.1           
[28] tibble_3.1.4            annotate_1.70.0         KEGGREST_1.32.0        
[31] farver_2.1.0            generics_0.1.0          IRanges_2.26.0         
[34] ellipsis_0.3.2          cachem_1.0.6            withr_2.4.2            
[37] BiocGenerics_0.38.0     mime_0.11               survival_3.2-13        
[40] magrittr_2.0.1          crayon_1.4.1            statnet.common_4.5.0   
[43] memoise_2.0.0           laeken_0.5.1            fansi_0.5.0            
[46] R.cache_0.15.0          MASS_7.3-54             R.rsp_0.44.0           
[49] progressr_0.8.0         tools_4.1.1             lifecycle_1.0.0        
[52] S4Vectors_0.30.0        trust_0.1-8             munsell_0.5.0          
[55] tabby_0.0.1-9001        AnnotationDbi_1.54.1    Biostrings_2.60.2      
[58] compiler_4.1.1          GenomeInfoDb_1.28.1     rlang_0.4.11           
[61] grid_4.1.1              RCurl_1.98-1.4          cwhmisc_6.6            
[64] rappdirs_0.3.3          startup_0.15.0          labeling_0.4.2         
[67] bitops_1.0-7            base64enc_0.1-3         boot_1.3-28            
[70] gtable_0.3.0            DBI_1.1.1               markdown_1.1           
[73] R6_2.5.1                lpSolveAPI_5.5.2.0-17.7 rle_0.9.2              
[76] dplyr_1.0.7             fastmap_1.1.0           bit_4.0.4              
[79] utf8_1.2.2              parallel_4.1.1          Rcpp_1.0.7             
[82] vctrs_0.3.8             png_0.1-7               DEoptimR_1.0-9         
[85] tidyselect_1.1.1        xfun_0.25               coda_0.19-4            
</code></pre>

<p>Total processing time was 1.45 mins.</p>

<h3>Reproducibility</h3>

<p>To reproduce this report, do:</p>

<pre><code class="r">html &lt;- matrixStats:::benchmark(&#39;sum2&#39;)
</code></pre>

<hr/>

<p>Copyright Henrik Bengtsson. Last updated on 2021-08-25 19:29:09 (+0200 UTC). Powered by <a href="https://cran.r-project.org/package=R.rsp">RSP</a>.</p>

<script>
 var link = document.createElement('link');
 link.rel = 'icon';
 link.href = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAA21BMVEUAAAAAAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8AAP8BAf4CAv0DA/wdHeIeHuEfH+AgIN8hId4lJdomJtknJ9g+PsE/P8BAQL9yco10dIt1dYp3d4h4eIeVlWqWlmmXl2iYmGeZmWabm2Tn5xjo6Bfp6Rb39wj4+Af//wA2M9hbAAAASXRSTlMAAQIJCgsMJSYnKD4/QGRlZmhpamtsbautrrCxuru8y8zN5ebn6Pn6+///////////////////////////////////////////LsUNcQAAAS9JREFUOI29k21XgkAQhVcFytdSMqMETU26UVqGmpaiFbL//xc1cAhhwVNf6n5i5z67M2dmYOyfJZUqlVLhkKucG7cgmUZTybDz6g0iDeq51PUr37Ds2cy2/C9NeES5puDjxuUk1xnToZsg8pfA3avHQ3lLIi7iWRrkv/OYtkScxBIMgDee0ALoyxHQBJ68JLCjOtQIMIANF7QG9G9fNnHvisCHBVMKgSJgiz7nE+AoBKrAPA3MgepvgR9TSCasrCKH0eB1wBGBFdCO+nAGjMVGPcQb5bd6mQRegN6+1axOs9nGfYcCtfi4NQosdtH7dB+txFIpXQqN1p9B/asRHToyS0jRgpV7nk4nwcq1BJ+x3Gl/v7S9Wmpp/aGquum7w3ZDyrADFYrl8vHBH+ev9AUASW1dmU4h4wAAAABJRU5ErkJggg=="
 document.getElementsByTagName('head')[0].appendChild(link);
</script>

</body>

</html>
